{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/landingpage/Preferences.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { X } from 'lucide-react';\r\n\r\ninterface PreferencesProps {\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function Preferences({ onClose }: PreferencesProps) {\r\n  const [activeTab, setActiveTab] = useState('region');\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-2xl p-6 w-full max-w-xl shadow-lg relative\">\r\n        {/* Close Button */}\r\n        <button\r\n          className=\"absolute top-4 right-4 text-gray-500 hover:text-black\"\r\n          onClick={onClose}\r\n        >\r\n          <X size={24} />\r\n        </button>\r\n\r\n        {/* Header */}\r\n        <h2 className=\"text-2xl font-bold mb-4\">Preferences</h2>\r\n\r\n        {/* Tabs */}\r\n        <div className=\"flex space-x-4 border-b mb-4\">\r\n          <button\r\n            className={`pb-2 ${activeTab === 'region' ? 'border-b-2 border-black font-medium' : 'text-gray-500'}`}\r\n            onClick={() => setActiveTab('region')}\r\n          >\r\n            Region & Language\r\n          </button>\r\n          <button\r\n            className={`pb-2 ${activeTab === 'currency' ? 'border-b-2 border-black font-medium' : 'text-gray-500'}`}\r\n            onClick={() => setActiveTab('currency')}\r\n          >\r\n            Currency\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        {activeTab === 'region' ? (\r\n          <div>\r\n            <h3 className=\"text-lg font-medium mb-2\">Select Region | Language</h3>\r\n            <div className=\"text-sm grid grid-cols-4 gap-3\">\r\n              {[\r\n                'Vietnam üáªüá≥',\r\n                'English (UK) üá¨üáß',\r\n                'Japan üáØüáµ',\r\n                'China üá®üá≥',\r\n                'South Korea üá∞üá∑',\r\n                'Russia üá∑üá∫',\r\n                'France üá´üá∑',\r\n                'Germany üá©üá™',\r\n                'Italy üáÆüáπ',\r\n                'Spain üá™üá∏',\r\n                'Portugal üáµüáπ',\r\n                'Saudi Arabia üá∏üá¶',\r\n              ].map((region) => (\r\n                <button\r\n                  key={region}\r\n                  className=\"p-2 rounded-lg border hover:bg-[#00d289] transition \"\r\n                >\r\n                  {region}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <h3 className=\"text-lg font-medium mb-2\">Select Currency</h3>\r\n            <div className=\"text-sm grid grid-cols-4 gap-4\">\r\n              {[\r\n                'VND (Vietnamese Dong)',\r\n                'GBP (British Pound Sterling)',\r\n                'JPY (Japanese Yen)',\r\n                'CNY (Chinese Yuan)',\r\n                'KRW (South Korean Won)',\r\n                'RUB (Russian Ruble)',\r\n                'EUR (Euro)',\r\n                'SAR (Saudi Riyal)',\r\n              ].map((currency) => (\r\n                <button\r\n                  key={currency}\r\n                  className=\"p-2 rounded-lg border hover:bg-[#00d289] transition \"\r\n                >\r\n                  {currency}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Footer */}\r\n        <p className=\"text-sm text-gray-500 mt-4\">\r\n          All preference changes are optional and will be saved for your session.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;;AAMe,SAAS,YAAY,EAAE,OAAO,EAAoB;;IAC/D,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBACC,WAAU;oBACV,SAAS;8BAET,cAAA,6LAAC,+LAAA,CAAA,IAAC;wBAAC,MAAM;;;;;;;;;;;8BAIX,6LAAC;oBAAG,WAAU;8BAA0B;;;;;;8BAGxC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,WAAW,CAAC,KAAK,EAAE,cAAc,WAAW,wCAAwC,iBAAiB;4BACrG,SAAS,IAAM,aAAa;sCAC7B;;;;;;sCAGD,6LAAC;4BACC,WAAW,CAAC,KAAK,EAAE,cAAc,aAAa,wCAAwC,iBAAiB;4BACvG,SAAS,IAAM,aAAa;sCAC7B;;;;;;;;;;;;gBAMF,cAAc,yBACb,6LAAC;;sCACC,6LAAC;4BAAG,WAAU;sCAA2B;;;;;;sCACzC,6LAAC;4BAAI,WAAU;sCACZ;gCACC;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;6BACD,CAAC,GAAG,CAAC,CAAC,uBACL,6LAAC;oCAEC,WAAU;8CAET;mCAHI;;;;;;;;;;;;;;;yCASb,6LAAC;;sCACC,6LAAC;4BAAG,WAAU;sCAA2B;;;;;;sCACzC,6LAAC;4BAAI,WAAU;sCACZ;gCACC;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;6BACD,CAAC,GAAG,CAAC,CAAC,yBACL,6LAAC;oCAEC,WAAU;8CAET;mCAHI;;;;;;;;;;;;;;;;8BAWf,6LAAC;oBAAE,WAAU;8BAA6B;;;;;;;;;;;;;;;;;AAMlD;GA7FwB;KAAA","debugId":null}},
    {"offset": {"line": 191, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/sidebar/SidebarMenu.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport {\r\n  FaTimes,\r\n  FaGlobe,\r\n  FaHome,\r\n  FaInfoCircle,\r\n  FaPhone,\r\n  FaShieldAlt,\r\n} from \"react-icons/fa\";\r\n\r\ninterface SidebarMenuProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function SidebarMenu({ isOpen, onClose }: SidebarMenuProps) {\r\n  // ‚úÖ Do not render if the sidebar is not open\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"\r\n        font-sans fixed top-0 left-0 h-full w-80 bg-white shadow-lg z-[100] p-5\r\n        transform transition-transform duration-300 ease-in-out translate-x-0\r\n      \"\r\n    >\r\n      {/* Close Sidebar Button */}\r\n      <button       \r\n        onClick={onClose} \r\n        className=\"absolute top-4 right-4 text-lg\"\r\n      >\r\n        <FaTimes />\r\n      </button>\r\n\r\n      {/* Header */}\r\n      <div className=\"flex items-center text-gray-800 space-x-2 font-semibold text-lg mb-8\">\r\n        <FaGlobe />\r\n        <span>United States, EN | USD</span>\r\n      </div>\r\n\r\n      {/* Menu Items */}\r\n      <ul className=\"space-y-4 text-gray-800\">\r\n        <li className=\"flex items-center space-x-3 hover:text-blue-500 cursor-pointer\">\r\n          <FaHome />\r\n          <span>Home</span>\r\n        </li>\r\n        <hr />\r\n        <li className=\"flex items-center space-x-3 hover:text-blue-500 cursor-pointer\">\r\n          <FaInfoCircle />\r\n          <span>About Us</span>\r\n        </li>\r\n        <hr />\r\n        <li className=\"flex items-center space-x-3 hover:text-blue-500 cursor-pointer\">\r\n          <FaPhone />\r\n          <span>Contact</span>\r\n        </li>\r\n        <hr />\r\n        <li className=\"flex items-center space-x-3 hover:text-blue-500 cursor-pointer\">\r\n          <FaShieldAlt />\r\n          <span>Policies</span>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAgBe,SAAS,YAAY,EAAE,MAAM,EAAE,OAAO,EAAoB;IACvE,6CAA6C;IAC7C,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,6LAAC;QACC,WAAU;;0BAMV,6LAAC;gBACC,SAAS;gBACT,WAAU;0BAEV,cAAA,6LAAC,iJAAA,CAAA,UAAO;;;;;;;;;;0BAIV,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,iJAAA,CAAA,UAAO;;;;;kCACR,6LAAC;kCAAK;;;;;;;;;;;;0BAIR,6LAAC;gBAAG,WAAU;;kCACZ,6LAAC;wBAAG,WAAU;;0CACZ,6LAAC,iJAAA,CAAA,SAAM;;;;;0CACP,6LAAC;0CAAK;;;;;;;;;;;;kCAER,6LAAC;;;;;kCACD,6LAAC;wBAAG,WAAU;;0CACZ,6LAAC,iJAAA,CAAA,eAAY;;;;;0CACb,6LAAC;0CAAK;;;;;;;;;;;;kCAER,6LAAC;;;;;kCACD,6LAAC;wBAAG,WAAU;;0CACZ,6LAAC,iJAAA,CAAA,UAAO;;;;;0CACR,6LAAC;0CAAK;;;;;;;;;;;;kCAER,6LAAC;;;;;kCACD,6LAAC;wBAAG,WAAU;;0CACZ,6LAAC,iJAAA,CAAA,cAAW;;;;;0CACZ,6LAAC;0CAAK;;;;;;;;;;;;;;;;;;;;;;;;AAKhB;KAjDwB","debugId":null}},
    {"offset": {"line": 366, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/auth/authService.tsx"],"sourcesContent":["// X·ª≠ l√Ω x√°c th·ª±c ƒëƒÉng nh·∫≠p v·ªõi google account\r\n// X·ª≠ l√Ω signout\r\n\r\nimport { auth, provider, db, signInWithPopup } from \"@/src/firebaseConfig\";\r\nimport { doc, setDoc, getDoc, serverTimestamp } from \"firebase/firestore\";\r\nimport { signOut } from \"firebase/auth\";\r\n\r\nconst signOutUser = async () => {\r\n  try {\r\n    await signOut(auth);\r\n    console.log(\"‚úÖ Signed out successfully\");\r\n    window.location.href = \"/\"; // ho·∫∑c d√πng router.push(\"/\") n·∫øu d√πng Next.js router\r\n  } catch (error) {\r\n    console.error(\"‚ùå Error signing out:\", error);\r\n  }\r\n};\r\n\r\nconst signInWithGoogle = async () => {\r\n  try {\r\n    // Hi·ªÉn th·ªã popup ƒëƒÉng nh·∫≠p Google\r\n    const result = await signInWithPopup(auth, provider);\r\n    const user = result.user;\r\n\r\n    // T·∫°o document tham chi·∫øu t·ªõi Firestore\r\n    const userRef = doc(db, \"users\", user.uid);\r\n    const userSnap = await getDoc(userRef);\r\n\r\n    // N·∫øu user ch∆∞a t·ªìn t·∫°i trong Firestore, th√™m m·ªõi\r\n    if (!userSnap.exists()) {\r\n      await setDoc(userRef, {\r\n        uid: user.uid,\r\n        name: user.displayName || \"\",\r\n        email: user.email || \"\",\r\n        photoURL: user.photoURL || \"\",\r\n        role: \"Customer\", // üëà G√°n role m·∫∑c ƒë·ªãnh\r\n        createdAt: serverTimestamp(), // ‚è± D√πng timestamp chu·∫©n\r\n      });\r\n    }\r\n\r\n    console.log(\"‚úÖ User signed in:\", user);\r\n    return user; // Tr·∫£ v·ªÅ user ƒë·ªÉ d√πng trong ·ª©ng d·ª•ng\r\n\r\n  } catch (error: any) {\r\n    if (error.code === \"auth/popup-closed-by-user\") {\r\n      console.warn(\"‚ö†Ô∏è Ng∆∞·ªùi d√πng ƒë√£ ƒë√≥ng c·ª≠a s·ªï ƒëƒÉng nh·∫≠p tr∆∞·ªõc khi ho√†n t·∫•t.\");\r\n    } else {\r\n      console.error(\"‚ùå L·ªói khi ƒëƒÉng nh·∫≠p:\", error);\r\n    }\r\n    return null;\r\n  }\r\n};\r\n\r\nexport { signInWithGoogle, signOutUser };\r\n"],"names":[],"mappings":"AAAA,8CAA8C;AAC9C,gBAAgB;;;;;AAEhB;AAAA;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,cAAc;IAClB,IAAI;QACF,MAAM,CAAA,GAAA,6MAAA,CAAA,UAAO,AAAD,EAAE,wIAAA,CAAA,OAAI;QAClB,QAAQ,GAAG,CAAC;QACZ,OAAO,QAAQ,CAAC,IAAI,GAAG,KAAK,qDAAqD;IACnF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;IACxC;AACF;AAEA,MAAM,mBAAmB;IACvB,IAAI;QACF,kCAAkC;QAClC,MAAM,SAAS,MAAM,CAAA,GAAA,qNAAA,CAAA,kBAAe,AAAD,EAAE,wIAAA,CAAA,OAAI,EAAE,wIAAA,CAAA,WAAQ;QACnD,MAAM,OAAO,OAAO,IAAI;QAExB,wCAAwC;QACxC,MAAM,UAAU,CAAA,GAAA,sKAAA,CAAA,MAAG,AAAD,EAAE,wIAAA,CAAA,KAAE,EAAE,SAAS,KAAK,GAAG;QACzC,MAAM,WAAW,MAAM,CAAA,GAAA,sKAAA,CAAA,SAAM,AAAD,EAAE;QAE9B,kDAAkD;QAClD,IAAI,CAAC,SAAS,MAAM,IAAI;YACtB,MAAM,CAAA,GAAA,sKAAA,CAAA,SAAM,AAAD,EAAE,SAAS;gBACpB,KAAK,KAAK,GAAG;gBACb,MAAM,KAAK,WAAW,IAAI;gBAC1B,OAAO,KAAK,KAAK,IAAI;gBACrB,UAAU,KAAK,QAAQ,IAAI;gBAC3B,MAAM;gBACN,WAAW,CAAA,GAAA,sKAAA,CAAA,kBAAe,AAAD;YAC3B;QACF;QAEA,QAAQ,GAAG,CAAC,qBAAqB;QACjC,OAAO,MAAM,qCAAqC;IAEpD,EAAE,OAAO,OAAY;QACnB,IAAI,MAAM,IAAI,KAAK,6BAA6B;YAC9C,QAAQ,IAAI,CAAC;QACf,OAAO;YACL,QAAQ,KAAK,CAAC,wBAAwB;QACxC;QACA,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 431, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/sidebar/UserSidebar.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { signOutUser } from '@/src/components/auth/authService';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faFileContract } from '@fortawesome/free-solid-svg-icons';\r\nimport {\r\n  FaTimes, FaPencilAlt, FaUser, FaCalendarAlt, FaEnvelope,\r\n  FaBuilding, FaCog, FaStore, FaMotorcycle, FaUserCog, FaBatteryFull,\r\n} from 'react-icons/fa';\r\nimport { useUser } from '@/src/context/AuthContext';\r\n\r\ninterface UserSidebarProps {\r\n  user: any;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nconst UserSidebar: React.FC<UserSidebarProps> = ({ user, isOpen, onClose }) => {\r\n  const router = useRouter();\r\n  const { role } = useUser();\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const normalizedRole = (role || '').toLowerCase();\r\n\r\n  const commonItems = [\r\n    { icon: FaPencilAlt, label: 'Write a review', onClick: () => {} },\r\n    { divider: true },\r\n    { icon: FaUser, label: 'Profile', path: '/profile' },\r\n    { icon: FaCalendarAlt, label: 'Bookings', path: '/bookings' },\r\n    { icon: FaEnvelope, label: 'Messages', path: '/messages' },\r\n    { icon: FaBuilding, label: 'My business', path: '/my-business' },\r\n    { divider: true },\r\n  ];\r\n\r\n  const supportItems = [\r\n    { icon: FaMotorcycle, label: 'Rent a Bike', path: '/rent' },\r\n    { icon: FaMotorcycle, label: 'Return a Bike', path: '/return' },\r\n  ];\r\n\r\n  const stationManagerItems = [\r\n    ...supportItems,\r\n    { icon: FaStore, label: 'Station Overview', path: '/stats' },\r\n  ];\r\n\r\n  const technicianItems = [\r\n    { icon: FaMotorcycle, label: 'Maintenance Logs', path: '/maintain' },\r\n  ];\r\n\r\n  const adminItems = [\r\n    { icon: FaStore, label: 'Rental Companies', path: '/rental-companies' },\r\n    { icon: FaMotorcycle, label: 'Ebike Management', path: '/ebikeManagement' },\r\n    { icon: FaUser, label: 'Users Management', path: '/users' },\r\n    { icon: FaUserCog, label: 'Customers Management', path: '/customers' },\r\n    { icon: FaBatteryFull, label: 'Battery Management', path: '/battery' },\r\n    { icon: faFileContract, label: 'Subscription Packages', path: '/subscriptionPackages' },\r\n    { icon: FaPencilAlt, label: 'Form Builder', path: '/my-business/form-builder' }, // ‚úÖ added\r\n  ];\r\n\r\n  const formBuilderItem = {\r\n    icon: FaPencilAlt,\r\n    label: 'Form Builder',\r\n    path: '/my-business/form-builder',\r\n  };\r\n\r\n  const footerItem = { icon: FaCog, label: 'Account Info', path: '/account' };\r\n\r\n  const getMenuItems = () => {\r\n    if (normalizedRole === 'support') {\r\n      return [...commonItems, ...supportItems, { divider: true }, footerItem];\r\n    }\r\n\r\n    if (normalizedRole === 'station_manager') {\r\n      return [...commonItems, ...stationManagerItems, { divider: true }, footerItem];\r\n    }\r\n\r\n    if (normalizedRole === 'technician') {\r\n      return [...commonItems, ...technicianItems, { divider: true }, footerItem];\r\n    }\r\n\r\n    if (['admin', 'company_admin'].includes(normalizedRole)) {\r\n      return [...commonItems, ...adminItems, { divider: true }, footerItem];\r\n    }\r\n\r\n    if (['company_owner', 'private_provider'].includes(normalizedRole)) {\r\n      return [...commonItems, formBuilderItem, { divider: true }, footerItem];\r\n    }\r\n\r\n    if (normalizedRole === 'customer') {\r\n      return [...commonItems, footerItem];\r\n    }\r\n\r\n    return [...commonItems, footerItem];\r\n  };\r\n\r\n  const menuItems = getMenuItems();\r\n\r\n  return (\r\n    <div className=\"fixed top-0 right-0 z-[100] w-80 max-w-full h-[100dvh] bg-white shadow-2xl flex flex-col transition-transform duration-300\">\r\n      {/* Header */}\r\n      <div className=\"p-4 border-b flex flex-col items-center relative\">\r\n        <button onClick={onClose} className=\"absolute top-4 right-4 text-xl\">\r\n          <FaTimes />\r\n        </button>\r\n\r\n        <img\r\n          src={user?.photoURL || \"/default-avatar.png\"}\r\n          alt=\"Avatar\"\r\n          className=\"w-16 h-16 rounded-full\"\r\n        />\r\n        <p className=\"mt-2 text-gray-600 text-sm\">Welcome</p>\r\n        <p className=\"font-semibold text-gray-800 mt-1 text-center\">\r\n          {user?.displayName || \"User\"}\r\n        </p>\r\n      </div>\r\n\r\n      {/* Menu */}\r\n      <nav className=\"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent\">\r\n        {menuItems.map((item, index) =>\r\n          item.divider ? (\r\n            <hr key={index} className=\"my-2 border-gray-200\" />\r\n          ) : (\r\n            <button\r\n              key={index}\r\n              onClick={() => {\r\n                if (item.path) router.push(item.path);\r\n                item.onClick?.();\r\n                onClose();\r\n              }}\r\n              className=\"flex items-center space-x-3 w-full text-left text-gray-700 hover:text-black\"\r\n            >\r\n              {item.icon === faFileContract ? (\r\n                <FontAwesomeIcon icon={faFileContract} className=\"w-4 h-4\" />\r\n              ) : (\r\n                <item.icon />\r\n              )}\r\n              <span>{item.label}</span>\r\n            </button>\r\n          )\r\n        )}\r\n      </nav>\r\n\r\n      {/* Footer */}\r\n      <div className=\"p-4 border-t\">\r\n        <button\r\n          onClick={() => {\r\n            signOutUser();\r\n            onClose();\r\n          }}\r\n          className=\"w-full border border-gray-300 rounded-lg py-2 text-black hover:bg-[#00d289] transition\"\r\n        >\r\n          Sign out\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserSidebar;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 773, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/auth/handleEmailLoginAndStoreUser.tsx"],"sourcesContent":["// src/components/handleEmailLoginAndStoreUser.ts\r\nimport { signInWithEmailAndPassword } from \"firebase/auth\";\r\nimport { doc, getDoc, setDoc, serverTimestamp } from \"firebase/firestore\";\r\nimport { auth, db } from \"@/src/firebaseConfig\"; \r\n\r\nexport const handleEmailLoginAndStoreUser = async (email: string, password: string) => {\r\n  const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n  const user = userCredential.user;\r\n\r\n  if (user) {\r\n    const userDocRef = doc(db, \"users\", user.uid);\r\n    const docSnap = await getDoc(userDocRef);\r\n\r\n    if (!docSnap.exists()) {\r\n      await setDoc(userDocRef, {\r\n        uid: user.uid,\r\n        email: user.email,\r\n        createdAt: serverTimestamp(),\r\n      });\r\n    }\r\n  }\r\n\r\n  return user;\r\n};\r\n\r\n"],"names":[],"mappings":"AAAA,iDAAiD;;;;AACjD;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEO,MAAM,+BAA+B,OAAO,OAAe;IAChE,MAAM,iBAAiB,MAAM,CAAA,GAAA,iOAAA,CAAA,6BAA0B,AAAD,EAAE,wIAAA,CAAA,OAAI,EAAE,OAAO;IACrE,MAAM,OAAO,eAAe,IAAI;IAEhC,IAAI,MAAM;QACR,MAAM,aAAa,CAAA,GAAA,sKAAA,CAAA,MAAG,AAAD,EAAE,wIAAA,CAAA,KAAE,EAAE,SAAS,KAAK,GAAG;QAC5C,MAAM,UAAU,MAAM,CAAA,GAAA,sKAAA,CAAA,SAAM,AAAD,EAAE;QAE7B,IAAI,CAAC,QAAQ,MAAM,IAAI;YACrB,MAAM,CAAA,GAAA,sKAAA,CAAA,SAAM,AAAD,EAAE,YAAY;gBACvB,KAAK,KAAK,GAAG;gBACb,OAAO,KAAK,KAAK;gBACjB,WAAW,CAAA,GAAA,sKAAA,CAAA,kBAAe,AAAD;YAC3B;QACF;IACF;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 811, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/auth/SignupPopup.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { X } from \"lucide-react\";\r\nimport { FaEye, FaEyeSlash } from \"react-icons/fa\";\r\nimport { createUserWithEmailAndPassword } from \"firebase/auth\";\r\nimport { doc, setDoc, serverTimestamp } from \"firebase/firestore\";\r\nimport { auth, db } from \"@/src/firebaseConfig\"; // Nh·ªõ export db t·ª´ firebaseConfig.ts\r\n\r\ninterface SignupPopupProps {\r\n  onClose: () => void;\r\n  onSwitchToSignin: () => void;\r\n}\r\n\r\nexport default function SignupPopup({ onClose, onSwitchToSignin }: SignupPopupProps) {\r\n  const [firstName, setFirstName] = useState(\"\");\r\n  const [lastName, setLastName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleSignup = async () => {\r\n    try {\r\n      const userCredential = await createUserWithEmailAndPassword(\r\n        auth,\r\n        email.trim(),\r\n        password.trim()\r\n      );\r\n      const user = userCredential.user;\r\n\r\n      // L∆∞u th√¥ng tin v√†o Firestore\r\n      await setDoc(doc(db, \"users\", user.uid), {\r\n        uid: user.uid,\r\n        name: `${firstName} ${lastName}`.trim(),\r\n        email: user.email,\r\n        photoURL: user.photoURL || \"\",\r\n        role: \"Customer\",\r\n        createdAt: serverTimestamp(),\r\n      });\r\n\r\n      console.log(\"User created and saved to Firestore!\");\r\n      onClose(); // ƒê√≥ng popup sau khi t·∫°o th√†nh c√¥ng\r\n    } catch (err: any) {\r\n      setError(err.message);\r\n      console.error(\"Signup error:\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"font-sans p-3 fixed inset-0 flex justify-center items-center bg-black bg-opacity-50 z-50\">\r\n      <div className=\"bg-white p-6 rounded-xl shadow-xl w-96 relative\">\r\n        {/* Close button */}\r\n        <button\r\n          className=\"absolute top-4 right-4 text-gray-600 hover:text-gray-900\"\r\n          onClick={onClose}\r\n        >\r\n          <X size={24} />\r\n        </button>\r\n\r\n        {/* Logo */}\r\n        <div className=\"flex justify-center mb-4\">\r\n          <img src=\"/assets/images/eBikeRental_logo1.png\" alt=\"Logo\" className=\"w-24 h-10\" />\r\n        </div>\r\n\r\n        {/* Title */}\r\n        <h2 className=\"text-2xl font-bold text-center mb-6\">\r\n          Join to unlock the best of eBikeRental\r\n        </h2>\r\n\r\n        {/* Name fields */}\r\n        <div className=\"flex gap-2 mb-4\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"First Name\"\r\n            value={firstName}\r\n            onChange={(e) => setFirstName(e.target.value)}\r\n            className=\"w-1/2 border rounded-lg p-2 focus:ring focus:ring-blue-300 outline-none\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Last Name\"\r\n            value={lastName}\r\n            onChange={(e) => setLastName(e.target.value)}\r\n            className=\"w-1/2 border rounded-lg p-2 focus:ring focus:ring-blue-300 outline-none\"\r\n          />\r\n        </div>\r\n\r\n        {/* Email */}\r\n        <input\r\n          type=\"email\"\r\n          placeholder=\"Email address\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          className=\"w-full border rounded-lg p-2 mb-4 focus:ring focus:ring-blue-300 outline-none\"\r\n        />\r\n\r\n        {/* Password */}\r\n        <div className=\"relative mb-4\">\r\n          <input\r\n            type={showPassword ? \"text\" : \"password\"}\r\n            placeholder=\"Create a password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            className=\"w-full border rounded-lg p-2 pr-10 focus:ring focus:ring-blue-300 outline-none\"\r\n          />\r\n          <button\r\n            type=\"button\"\r\n            className=\"absolute inset-y-0 right-3 flex items-center text-gray-600\"\r\n            onClick={() => setShowPassword(!showPassword)}\r\n          >\r\n            {showPassword ? <FaEyeSlash /> : <FaEye />}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Error message */}\r\n        {error && <p className=\"text-red-500 text-sm mb-2\">{error}</p>}\r\n\r\n        {/* Join Button */}\r\n        <button\r\n          onClick={handleSignup}\r\n          className=\"flex items-center justify-center w-full border py-2 rounded-lg mt-2 mb-3 hover:bg-[#00d289] transition\"\r\n        >\r\n          Join\r\n        </button>\r\n\r\n        {/* Already a member */}\r\n        <div className=\"flex items-center my-4\">\r\n          <hr className=\"flex-1\" />\r\n          <span className=\"mx-2 text-gray-500 text-sm\">Already a member?</span>\r\n          <hr className=\"flex-1\" />\r\n        </div>\r\n\r\n        <p className=\"text-center text-sm \">\r\n          <a\r\n            href=\"#\"\r\n            className=\"font-bold underline text-[#00d289]\"\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              onSwitchToSignin();\r\n            }}\r\n          >\r\n            Sign in\r\n          </a>{\" \"}\r\n          using your eBikeRental account.\r\n        </p>\r\n\r\n        {/* Terms */}\r\n        <p className=\"text-xs text-gray-500 mt-4 text-center\">\r\n          By proceeding, you agree to our{\" \"}\r\n          <a href=\"#\" className=\"underline\">Terms of Use</a> and confirm you have read our{\" \"}\r\n          <a href=\"#\" className=\"underline\">Privacy and Cookie Statement</a>.\r\n        </p>\r\n        <p className=\"text-xs text-gray-500 text-center mt-1\">\r\n          This site is protected by reCAPTCHA and the Google{\" \"}\r\n          <a href=\"#\" className=\"underline\">Privacy Policy</a> and{\" \"}\r\n          <a href=\"#\" className=\"underline\">Terms of Service</a> apply.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1146, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/auth/SigninPopup.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { X } from \"lucide-react\";\r\nimport { FaEye, FaEyeSlash } from \"react-icons/fa\";\r\nimport { handleEmailLoginAndStoreUser } from \"@/src/components/auth/handleEmailLoginAndStoreUser\";\r\nimport SignupPopup from \"@/src/components/auth/SignupPopup\";\r\n\r\nexport default function SigninPopup({ onClose }: { onClose: () => void }) {\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [showSignup, setShowSignup] = useState(false);\r\n\r\n  const handleLogin = async () => {\r\n    if (!email || !password) {\r\n      setErrorMessage(\"Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß email v√† m·∫≠t kh·∫©u.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setErrorMessage(\"\");\r\n      await handleEmailLoginAndStoreUser(email, password);\r\n      onClose(); // ƒë√≥ng popup sau khi ƒëƒÉng nh·∫≠p th√†nh c√¥ng\r\n    } catch (error: any) {\r\n      setErrorMessage(error.message || \"ƒêƒÉng nh·∫≠p th·∫•t b·∫°i.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"font-sans p-3 fixed inset-0 flex justify-center items-center bg-black bg-opacity-50 z-50\">\r\n      <div className=\"bg-white p-6 rounded-xl shadow-xl w-96 relative\">\r\n        <button\r\n          className=\"absolute top-4 right-4 text-gray-600 hover:text-gray-900\"\r\n          onClick={onClose}\r\n        >\r\n          <X size={24} />\r\n        </button>\r\n\r\n        <div className=\"flex justify-center mb-4\">\r\n          <img\r\n            src=\"/assets/images/eBikeRental_logo1.png\"\r\n            alt=\"eBikeRental Logo\"\r\n            className=\"w-24 h-10\"\r\n          />\r\n        </div>\r\n\r\n        <h2 className=\"text-2xl text-gray-600 font-bold text-center mb-6\">Welcome back.</h2>\r\n\r\n        <label className=\"block text-gray-600 font-semibold text-sm mb-1\">Email address</label>\r\n        <input\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          className=\"w-full border rounded-lg p-2 mb-4 focus:ring focus:ring-blue-300 outline-none\"\r\n        />\r\n\r\n        <label className=\"block text-gray-600 font-semibold text-sm mb-1\">Password</label>\r\n        <div className=\"relative\">\r\n          <input\r\n            type={showPassword ? \"text\" : \"password\"}\r\n            placeholder=\"Password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            className=\"w-full border rounded-lg p-2 pr-10 focus:ring focus:ring-blue-300 outline-none\"\r\n          />\r\n          <button\r\n            type=\"button\"\r\n            className=\"absolute inset-y-0 right-3 flex items-center text-gray-600\"\r\n            onClick={() => setShowPassword(!showPassword)}\r\n          >\r\n            {showPassword ? <FaEyeSlash /> : <FaEye />}\r\n          </button>\r\n        </div>\r\n\r\n        {errorMessage && (\r\n          <p className=\"text-red-500 text-sm text-center mt-2\">{errorMessage}</p>\r\n        )}\r\n\r\n        <a href=\"#\" className=\"text-[#00d289] text-sm mt-2 inline-block\">\r\n          Forgot password?\r\n        </a>\r\n\r\n        <button\r\n          onClick={handleLogin}\r\n          className=\"flex text-gray-600 items-center justify-center w-full border py-2 rounded-lg mt-2 mb-3 hover:bg-[#00d289] transition\"\r\n        >\r\n          Sign in\r\n        </button>\r\n\r\n        <div className=\"flex items-center my-4\">\r\n          <hr className=\"flex-1\" />\r\n          <span className=\"mx-2 text-gray-500 text-sm\">Not a member?</span>\r\n          <hr className=\"flex-1\" />\r\n        </div>\r\n\r\n        <p className=\"text-center text-gray-600 text-sm\">\r\n          <a\r\n            href=\"#\"\r\n            className=\"font-bold underline text-[#00d289]\"\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              setShowSignup(true);\r\n            }}\r\n          >\r\n            Join\r\n          </a>{\" \"}\r\n          to unlock the best of eBikeRental.\r\n        </p>\r\n\r\n        <p className=\"text-xs text-gray-500 mt-4 text-center\">\r\n          By proceeding, you agree to our{\" \"}\r\n          <a href=\"#\" className=\"underline\">Terms of Use</a> and confirm you have read our{\" \"}\r\n          <a href=\"#\" className=\"underline\">Privacy and Cookie Statement</a>.\r\n        </p>\r\n        <p className=\"text-xs text-gray-500 text-center mt-1\">\r\n          This site is protected by reCAPTCHA and the Google{\" \"}\r\n          <a href=\"#\" className=\"underline\">Privacy Policy</a> and{\" \"}\r\n          <a href=\"#\" className=\"underline\">Terms of Service</a> apply.\r\n        </p>\r\n      </div>\r\n\r\n     {/* ‚úÖ Hi·ªÉn th·ªã SignupPopup n·∫øu ƒë∆∞·ª£c b·∫≠t */}\r\n      {showSignup && (\r\n          <SignupPopup\r\n            onClose={() => setShowSignup(false)}\r\n            onSwitchToSignin={() => setShowSignup(false)} // ‚úÖ B·ªï sung prop b·∫Øt bu·ªôc\r\n          />\r\n        )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1471, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/auth/LoginPopup.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { FaGoogle, FaEnvelope } from \"react-icons/fa\";\r\nimport { X } from \"lucide-react\";\r\nimport SigninPopup from \"@/src/components/auth/SigninPopup\";\r\nimport { signInWithGoogle } from \"@/src/components/auth/authService\";\r\n\r\n// T·∫°o interface n√†y ƒë·ªÉ ƒë√≥ng popup khi c·∫ßn\r\ninterface LoginPopupProps {\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function LoginPopup({ onClose }: LoginPopupProps) {\r\n\r\n  // Khai b√°o tr·∫°ng th√°i c·ªßa ƒëƒÉng nh·∫≠p Signin l√† hiden\r\n  const [showSignin, setShowSignin] = useState(false);\r\n\r\n  const handleGoogleSignIn = async () => {\r\n    try {\r\n      const user = await signInWithGoogle();\r\n      console.log(\"User signed in:\", user);\r\n\r\n      // ‚úÖ ƒê√≥ng popup sau khi ƒëƒÉng nh·∫≠p th√†nh c√¥ng\r\n      onClose();\r\n    } catch (error) {\r\n      console.error(\"Google Sign-In Error:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-3 fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center\">\r\n      <div className=\"bg-white p-6 rounded-2xl shadow-xl w-96 relative\">\r\n        {/* Close button */}\r\n        <button\r\n          className=\"absolute top-4 right-4 text-gray-500 hover:text-gray-700\"\r\n          onClick={onClose}\r\n        >\r\n          <X size={24} />\r\n        </button>\r\n\r\n        {/* Logo */}\r\n        <div className=\"flex justify-center mb-4\">\r\n          <img\r\n            src=\"/assets/images/eBikeRental_logo1.png\"\r\n            alt=\"eBikeRental Logo\"\r\n            className=\"w-24 h-10\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-xl text-gray-600 font-semibold mb-4\">\r\n            Sign in to unlock the best of eBikeRental.\r\n          </h2>\r\n\r\n          {/* Continue with Google */}\r\n          <button \r\n            className=\"flex text-gray-600 items-center justify-center w-full border py-2 rounded-lg mb-3 hover:bg-[#00d289] transition\"\r\n            onClick={handleGoogleSignIn}\r\n          >\r\n            <FaGoogle className=\"mr-2\" /> Continue with Google\r\n          </button>\r\n\r\n          {/* Continue with Email th√¨ (M·ªü SigninPopup) */}\r\n          <button\r\n            className=\"flex text-gray-600 items-center justify-center w-full border py-2 rounded-lg hover:bg-[#00d289] transition\"\r\n            onClick={() => setShowSignin(true)}\r\n          >\r\n            <FaEnvelope className=\"mr-2\" /> Continue with Email\r\n          </button>\r\n\r\n          <p className=\"text-xs text-gray-500 mt-4\">\r\n            By proceeding, you agree to our{\" \"}\r\n            <a href=\"#\" className=\"underline\">\r\n              Terms of Use\r\n            </a>{\" \"}\r\n            and confirm you have read our{\" \"}\r\n            <a href=\"#\" className=\"underline\">\r\n              Privacy and Cookie Statement\r\n            </a>.\r\n          </p>\r\n          <p className=\"text-xs text-gray-500 mt-2\">\r\n            This site is protected by reCAPTCHA and the Google{\" \"}\r\n            <a href=\"#\" className=\"underline\">\r\n              Privacy Policy\r\n            </a>{\" \"}\r\n            and\r\n            <a href=\"#\" className=\"underline\"> Terms of Service</a> apply.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Popup Signin xu·∫•t hi·ªán khi b·∫•m \"Continue with Email\" */}\r\n      {showSignin && <SigninPopup onClose={() => setShowSignin(false)} />}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;;AAOe,SAAS,WAAW,EAAE,OAAO,EAAmB;;IAE7D,oDAAoD;IACpD,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,MAAM,qBAAqB;QACzB,IAAI;YACF,MAAM,OAAO,MAAM,CAAA,GAAA,4IAAA,CAAA,mBAAgB,AAAD;YAClC,QAAQ,GAAG,CAAC,mBAAmB;YAE/B,4CAA4C;YAC5C;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB;QACzC;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBACC,WAAU;wBACV,SAAS;kCAET,cAAA,6LAAC,+LAAA,CAAA,IAAC;4BAAC,MAAM;;;;;;;;;;;kCAIX,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BACC,KAAI;4BACJ,KAAI;4BACJ,WAAU;;;;;;;;;;;kCAId,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAA2C;;;;;;0CAKzD,6LAAC;gCACC,WAAU;gCACV,SAAS;;kDAET,6LAAC,iJAAA,CAAA,WAAQ;wCAAC,WAAU;;;;;;oCAAS;;;;;;;0CAI/B,6LAAC;gCACC,WAAU;gCACV,SAAS,IAAM,cAAc;;kDAE7B,6LAAC,iJAAA,CAAA,aAAU;wCAAC,WAAU;;;;;;oCAAS;;;;;;;0CAGjC,6LAAC;gCAAE,WAAU;;oCAA6B;oCACR;kDAChC,6LAAC;wCAAE,MAAK;wCAAI,WAAU;kDAAY;;;;;;oCAE7B;oCAAI;oCACqB;kDAC9B,6LAAC;wCAAE,MAAK;wCAAI,WAAU;kDAAY;;;;;;oCAE9B;;;;;;;0CAEN,6LAAC;gCAAE,WAAU;;oCAA6B;oCACW;kDACnD,6LAAC;wCAAE,MAAK;wCAAI,WAAU;kDAAY;;;;;;oCAE7B;oCAAI;kDAET,6LAAC;wCAAE,MAAK;wCAAI,WAAU;kDAAY;;;;;;oCAAqB;;;;;;;;;;;;;;;;;;;YAM5D,4BAAc,6LAAC,4IAAA,CAAA,UAAW;gBAAC,SAAS,IAAM,cAAc;;;;;;;;;;;;AAG/D;GAnFwB;KAAA","debugId":null}},
    {"offset": {"line": 1689, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/landingpage/Header.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { FaBars, FaRegUserCircle, FaGlobe } from \"react-icons/fa\";\r\nimport Image from \"next/image\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Preferences from \"./Preferences\";\r\nimport SidebarMenu from \"../sidebar/SidebarMenu\";\r\nimport UserSidebar from \"../sidebar/UserSidebar\";\r\nimport LoginPopup from \"@/src/components/auth/LoginPopup\";\r\nimport { useUser } from \"@/src/context/AuthContext\";\r\n\r\n// Import UserSidebar t·ª´ file ri√™ng\r\nimport Link from \"next/link\";\r\n// Qu·∫£n l√Ω ƒë√≥ng m·ªü sidebar cho ƒë·ªìng b·ªô\r\n\r\n\r\nconst Header = () => {\r\n  const [language, setLanguage] = useState(\"EN\");\r\n  const [currency, setCurrency] = useState(\"USD\");\r\n\r\n  // Qu·∫£n l√Ω m·ªü/ƒë√≥ng popup Preferences\r\n  const [isReferencePopupOpen, setIsReferencePopupOpen] = useState(false);\r\n  // Qu·∫£n l√Ω m·ªü/ƒë√≥ng popup Login\r\n  const [isLoginPopupOpen, setIsLoginPopupOpen] = useState(false);\r\n  // Qu·∫£n l√Ω m·ªü/ƒë√≥ng SidebarMenu (hamburger)\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n  // Qu·∫£n l√Ω m·ªü/ƒë√≥ng Sidebar ƒë·ªï xu·ªëng cho user (khi ƒë√£ ƒëƒÉng nh·∫≠p)\r\n  const [isUserSidebarOpen, setIsUserSidebarOpen] = useState(false);\r\n\r\n  const { user } = useUser();  // ‚úÖ\r\n  const router = useRouter();\r\n\r\n  // ƒê·ªïi ti·ªÅn t·ªá / ng√¥n ng·ªØ\r\n  const togglePopup = () => setIsReferencePopupOpen(!isReferencePopupOpen);\r\n  // ƒê√≥ng / m·ªü Login popup\r\n  const toggleLoginPopup = () => setIsLoginPopupOpen(!isLoginPopupOpen);\r\n  // ƒê√≥ng / m·ªü SidebarMenu (hamburger) v√† ƒë√≥ng UserSidebar n·∫øu c·∫ßn\r\n  const toggleSidebar = () => {\r\n    if (!isSidebarOpen) {\r\n      setIsUserSidebarOpen(false); // ƒê√≥ng UserSidebar n·∫øu SidebarMenu ƒëang m·ªü\r\n    }\r\n    setIsSidebarOpen(!isSidebarOpen);\r\n  };\r\n  // ƒê√≥ng / m·ªü UserSidebar v√† ƒë√≥ng SidebarMenu n·∫øu c·∫ßn\r\nconst toggleUserSidebar = () => {\r\n  if (!isUserSidebarOpen) {\r\n    setIsSidebarOpen(false); // ƒê√≥ng SidebarMenu n·∫øu UserSidebar ƒëang m·ªü\r\n  }\r\n  setIsUserSidebarOpen(!isUserSidebarOpen);\r\n};\r\n\r\n  return (\r\n    <header className=\"sticky flex items-center justify-between absolute top-0 left-0 w-full bg-white z-50 h-16\">\r\n      {/* N√∫t Menu Icon (hamburger) - ch·ªâ hi·ªán tr√™n mobile */}\r\n      <button className=\"text-2xl text-gray-800 md:hidden lg:hidden px-6 py-2\" onClick={toggleSidebar}>\r\n        <FaBars />\r\n      </button>\r\n\r\n      {/* Logo */}\r\n      <div className=\"flex items-center px-8\">\r\n        <Link href=\"/\">\r\n          <Image\r\n            src=\"/assets/images/eBikeRental_logo1.png\"\r\n            alt=\"eBikeRental Logo\"\r\n            width={60}\r\n            height={20}\r\n            className=\"w-[80px] md:w-[100px] lg:w-[120px] h-auto\"\r\n          />\r\n        </Link>\r\n      </div>\r\n\r\n\r\n      {/* User Icon (mobile) */}\r\n      <button\r\n        className=\"text-2xl md:hidden text-gray-800 lg:hidden px-6 py-2\"\r\n        onClick={user ? toggleUserSidebar : toggleLoginPopup}\r\n      >\r\n        {user ? (\r\n          <img\r\n            src={user.photoURL || \"/default-avatar.png\"}\r\n            alt=\"avatar\"\r\n            className=\"w-8 h-8 rounded-full\"\r\n          />\r\n        ) : (\r\n          <FaRegUserCircle />\r\n        )}\r\n      </button>\r\n\r\n      {/* Popup ƒëƒÉng nh·∫≠p (n·∫øu c·∫ßn) */}\r\n      {isLoginPopupOpen && <LoginPopup onClose={toggleLoginPopup} />}\r\n\r\n      {/* Sidebar Menu (hamburger) */}\r\n      <SidebarMenu isOpen={isSidebarOpen} onClose={toggleSidebar} />\r\n\r\n      {/* Desktop Only */}\r\n      <div className=\"hidden sm:block px-8\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          {/* N√∫t ƒë·ªïi ti·ªÅn t·ªá / ng√¥n ng·ªØ */}\r\n          <button\r\n            onClick={togglePopup}\r\n            className=\"flex items-center space-x-2 text-sm font-semibold\"\r\n          >\r\n            <FaGlobe className=\"text-lg\" />\r\n            <span className=\"border-l border-gray-400 h-4 mx-2\"></span>\r\n            <span>{currency}</span>\r\n            <span className=\"border-l border-gray-400 h-4 mx-2\"></span>\r\n          </button>\r\n\r\n          {/* N·∫øu ƒë√£ ƒëƒÉng nh·∫≠p => hi·ªÉn th·ªã avatar, n·∫øu ch∆∞a => n√∫t \"ƒêƒÉng nh·∫≠p\" */}\r\n          {user ? (\r\n            <img\r\n              src={user.photoURL || \"/default-avatar.png\"}\r\n              alt=\"avatar\"\r\n              className=\"w-8 h-8 rounded-full cursor-pointer\"\r\n              onClick={toggleUserSidebar}\r\n            />\r\n          ) : (\r\n            <button\r\n              onClick={user ? toggleUserSidebar : toggleLoginPopup}\r\n              className=\"px-4 py-1 bg-transparent border border-[#00d289] text-[#00d289] text-md font-semibold rounded-sm\"\r\n            >\r\n              Sign in\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Popup ƒë·ªïi ti·ªÅn t·ªá / ng√¥n ng·ªØ */}\r\n        {isReferencePopupOpen && (\r\n          <Preferences onClose={() => setIsReferencePopupOpen(false)} />\r\n        )}\r\n      </div>\r\n\r\n      {/* Sidebar ƒë·ªï xu·ªëng cho user (ch·ªâ hi·ªán khi ƒë√£ ƒëƒÉng nh·∫≠p) */}\r\n      {user && (\r\n        <UserSidebar\r\n          user={user}\r\n          isOpen={isUserSidebarOpen}\r\n          onClose={() => setIsUserSidebarOpen(false)}\r\n        />\r\n      )}\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1943, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/landingpage/Footer.tsx"],"sourcesContent":["export default function Footer() {\r\n  return (\r\n    <footer className=\"bg-[#00d289] text-white text-sm py-4 text-center w-full\">\r\n      <div>¬© 2025 eBikeRental. All rights reserved.</div>\r\n      <div className=\"mt-1 space-x-3\">\r\n        <a href=\"#\" className=\"underline\">About Us</a>\r\n        <a href=\"#\" className=\"underline\">Contact</a>\r\n        <a href=\"#\" className=\"underline\">Policy</a>\r\n      </div>\r\n    </footer>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAe,SAAS;IACtB,qBACE,6LAAC;QAAO,WAAU;;0BAChB,6LAAC;0BAAI;;;;;;0BACL,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAE,MAAK;wBAAI,WAAU;kCAAY;;;;;;kCAClC,6LAAC;wBAAE,MAAK;wBAAI,WAAU;kCAAY;;;;;;kCAClC,6LAAC;wBAAE,MAAK;wBAAI,WAAU;kCAAY;;;;;;;;;;;;;;;;;;AAI1C;KAXwB","debugId":null}},
    {"offset": {"line": 2014, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/rent/xedientrungnam/useRentBikeForm.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\n\r\nexport type Role =\r\n  | 'Staff'\r\n  | 'Customer'\r\n  | 'Station Manager'\r\n  | 'Company Owner'\r\n  | 'Private Owner'\r\n  | 'Agent'\r\n  | 'Technician'\r\n  | 'Investor'\r\n  | 'Admin';\r\n\r\nconst DEFAULT_COMPANY_ID = 'engkXQIeqS7QNJPWKPrw'; // Xe ƒêi·ªán Trung Nam\r\n\r\nexport function useRentBikeForm(role: Role) {\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [companyId, setCompanyId] = useState(DEFAULT_COMPANY_ID);\r\n  const [stationId, setStationId] = useState('');\r\n  const [customerName, setCustomerName] = useState('');\r\n  const [phone, setPhone] = useState('');\r\n  const [idNumber, setIdNumber] = useState('');\r\n  const [address, setAddress] = useState('');\r\n\r\n  const [vehicleModel, setVehicleModel] = useState('');\r\n  const [vehicleColor, setVehicleColor] = useState('');\r\n  const [vin, setVin] = useState('');\r\n  const [licensePlate, setLicensePlate] = useState('');\r\n\r\n  const [batteryCodes, setBatteryCodes] = useState<string[]>([]);\r\n  const [boxType, setBoxType] = useState<string[]>([]);\r\n\r\n  const [subscriptionPackageId, setSubscriptionPackageId] = useState('');\r\n  const [basePrice, setBasePrice] = useState('');\r\n  const [pinFee, setPinFee] = useState('');\r\n  const [accessories, setAccessories] = useState('');\r\n  const [total, setTotal] = useState('');\r\n  const [deposit, setDeposit] = useState('');\r\n  const [remaining, setRemaining] = useState('');\r\n  const [note, setNote] = useState('');\r\n\r\n  const handleSubmit = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const bookingData = {\r\n        companyId,\r\n        stationId,\r\n        customerName,\r\n        phone,\r\n        idNumber,\r\n        address,\r\n        vehicleModel,\r\n        vehicleColor,\r\n        vin,\r\n        licensePlate,\r\n        batteryCodes,\r\n        boxType,\r\n        subscriptionPackageId,\r\n        basePrice: Number(basePrice),\r\n        pinFee: Number(pinFee),\r\n        accessories,\r\n        total: Number(total),\r\n        deposit: Number(deposit),\r\n        remaining: Number(remaining),\r\n        note,\r\n        role,\r\n      };\r\n\r\n      console.log('üì§ Submitting booking form:', bookingData);\r\n      return true;\r\n    } catch (error) {\r\n      console.error('‚ùå Booking submission failed:', error);\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    companyId, setCompanyId,\r\n    stationId, setStationId,\r\n    customerName, setCustomerName,\r\n    phone, setPhone,\r\n    idNumber, setIdNumber,\r\n    address, setAddress,\r\n\r\n    vehicleModel, setVehicleModel,\r\n    vehicleColor, setVehicleColor,\r\n    vin, setVin,\r\n    licensePlate, setLicensePlate,\r\n\r\n    batteryCodes, setBatteryCodes,\r\n    boxType, setBoxType,\r\n\r\n    subscriptionPackageId, setSubscriptionPackageId,\r\n    basePrice, setBasePrice,\r\n    pinFee, setPinFee,\r\n    accessories, setAccessories,\r\n    total, setTotal,\r\n    deposit, setDeposit,\r\n    remaining, setRemaining,\r\n    note, setNote,\r\n\r\n    loading,\r\n    handleSubmit,\r\n  };\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2135, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/ui/input.tsx"],"sourcesContent":["import { ReactNode, InputHTMLAttributes } from 'react';\r\n\r\ninterface InputProps extends InputHTMLAttributes<HTMLInputElement> {\r\n  className?: string;\r\n  icon?: ReactNode;\r\n}\r\n\r\nexport const Input = ({ className = '', icon, ...props }: InputProps) => {\r\n  return (\r\n    <div className={`flex items-center border border-[#00d289] rounded-sm p-2 ${className}`}>\r\n      {icon && <span className=\"mr-2\">{icon}</span>}\r\n      <input\r\n        className=\"flex-1 outline-none bg-transparent\"\r\n        {...props}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAOO,MAAM,QAAQ,CAAC,EAAE,YAAY,EAAE,EAAE,IAAI,EAAE,GAAG,OAAmB;IAClE,qBACE,6LAAC;QAAI,WAAW,CAAC,yDAAyD,EAAE,WAAW;;YACpF,sBAAQ,6LAAC;gBAAK,WAAU;0BAAQ;;;;;;0BACjC,6LAAC;gBACC,WAAU;gBACT,GAAG,KAAK;;;;;;;;;;;;AAIjB;KAVa","debugId":null}},
    {"offset": {"line": 2179, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/ui/button.tsx"],"sourcesContent":["import { ReactNode } from 'react';\r\n\r\ntype ButtonVariant =\r\n  | 'default'\r\n  | 'ghost'\r\n  | 'outline'\r\n  | 'secondary'\r\n  | 'danger'\r\n  | 'greenOutline'\r\n  | 'destructive';\r\n\r\ninterface ButtonProps {\r\n  className?: string;\r\n  children: ReactNode;\r\n  onClick?: () => void;\r\n  type?: 'button' | 'submit' | 'reset';\r\n  variant?: ButtonVariant;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport const Button = ({\r\n  className = '',\r\n  children,\r\n  onClick,\r\n  type = 'button',\r\n  variant = 'default',\r\n  disabled = false,\r\n}: ButtonProps) => {\r\n  const baseClass =\r\n    'inline-flex items-center justify-center px-4 py-2 font-semibold rounded-md transition-all text-sm';\r\n\r\n  const variantClass: Record<ButtonVariant, string> = {\r\n    default: 'bg-[#00d289] text-white border border-[#00d289] hover:bg-[#00b67a]',\r\n    ghost: 'bg-transparent text-[#00d289] border border-transparent hover:bg-[#e6fff5]',\r\n    outline: 'bg-white text-[#00d289] border border-[#00d289] hover:bg-[#f0fdf8]',\r\n    secondary: 'bg-gray-100 text-gray-800 border border-gray-300 hover:bg-gray-200',\r\n    danger: 'bg-red-500 text-white border border-red-500 hover:bg-red-600',\r\n    greenOutline: 'bg-transparent text-[#00d289] border border-[#00d289] hover:bg-[#00d289]/10',\r\n    destructive: 'bg-white text-red-600 border border-red-500 hover:bg-red-50',\r\n  };\r\n\r\n  const disabledClass = disabled ? 'opacity-50 pointer-events-none cursor-not-allowed' : '';\r\n\r\n  return (\r\n    <button\r\n      type={type}\r\n      disabled={disabled}\r\n      className={`${baseClass} ${variantClass[variant]} ${disabledClass} ${className}`}\r\n      onClick={onClick}\r\n    >\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAoBO,MAAM,SAAS,CAAC,EACrB,YAAY,EAAE,EACd,QAAQ,EACR,OAAO,EACP,OAAO,QAAQ,EACf,UAAU,SAAS,EACnB,WAAW,KAAK,EACJ;IACZ,MAAM,YACJ;IAEF,MAAM,eAA8C;QAClD,SAAS;QACT,OAAO;QACP,SAAS;QACT,WAAW;QACX,QAAQ;QACR,cAAc;QACd,aAAa;IACf;IAEA,MAAM,gBAAgB,WAAW,sDAAsD;IAEvF,qBACE,6LAAC;QACC,MAAM;QACN,UAAU;QACV,WAAW,GAAG,UAAU,CAAC,EAAE,YAAY,CAAC,QAAQ,CAAC,CAAC,EAAE,cAAc,CAAC,EAAE,WAAW;QAChF,SAAS;kBAER;;;;;;AAGP;KAjCa","debugId":null}},
    {"offset": {"line": 2220, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/ui/label.tsx"],"sourcesContent":["import * as React from \"react\";\r\n\r\nexport interface LabelProps extends React.LabelHTMLAttributes<HTMLLabelElement> {}\r\n\r\nconst Label = React.forwardRef<HTMLLabelElement, LabelProps>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <label\r\n        ref={ref}\r\n        className={`block text-sm font-medium text-gray-700 mb-1 ${className ?? \"\"}`}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\n\r\nLabel.displayName = \"Label\";\r\n\r\nexport { Label };\r\n"],"names":[],"mappings":";;;;AAAA;;;AAIA,MAAM,sBAAQ,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAC3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,6LAAC;QACC,KAAK;QACL,WAAW,CAAC,6CAA6C,EAAE,aAAa,IAAI;QAC3E,GAAG,KAAK;;;;;;AAGf;;AAGF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 2253, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/rent/common/QRCodeScanner.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport { Input } from '@/src/components/ui/input';\r\nimport { Button } from '@/src/components/ui/button';\r\nimport { db } from '@/src/firebaseConfig';\r\nimport { collection, getDocs } from 'firebase/firestore';\r\nimport { Label } from '@/src/components/ui/label';\r\nimport QrScanner from 'qr-scanner';\r\n\r\ninterface QRCodeScannerProps {\r\n  onScanned: (bikeInfo: any) => void;\r\n}\r\n\r\nexport default function QRCodeScanner({ onScanned }: QRCodeScannerProps) {\r\n  const [vehicleID, setVehicleID] = useState('');\r\n  const [matchingBikes, setMatchingBikes] = useState<any[]>([]);\r\n  const [mode, setMode] = useState<'scan' | 'search'>('search');\r\n  const videoRef = useRef<HTMLVideoElement | null>(null);\r\n  const scannerRef = useRef<QrScanner | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (mode === 'scan' && videoRef.current) {\r\n      const scanner = new QrScanner(\r\n        videoRef.current,\r\n        (result) => {\r\n          if (result?.data) {\r\n            setVehicleID(result.data);\r\n            handleScanned(result.data);\r\n          }\r\n        },\r\n        {\r\n          returnDetailedScanResult: true,\r\n        }\r\n      );\r\n      scanner.start();\r\n      scannerRef.current = scanner;\r\n      return () => scanner.stop();\r\n    }\r\n  }, [mode]);\r\n\r\n  const fetchMatchingBikes = async (query: string) => {\r\n    const snapshot = await getDocs(collection(db, 'ebikes'));\r\n    const bikes = snapshot.docs.map(doc => ({ id: doc.id, ...(doc.data() as any) }));\r\n\r\n    // Only search if there is input, otherwise don't show suggestions\r\n    const filtered = query.trim()\r\n      ? bikes.filter(bike =>\r\n          bike.vehicleID?.toLowerCase().includes(query.toLowerCase())\r\n        )\r\n      : [];\r\n\r\n    setMatchingBikes(filtered);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (mode === 'search') {\r\n      fetchMatchingBikes(vehicleID);\r\n    }\r\n  }, [vehicleID, mode]);\r\n\r\n  const handleScanned = async (id: string) => {\r\n    const snapshot = await getDocs(collection(db, 'ebikes'));\r\n    const bike = snapshot.docs\r\n      .map(doc => ({ id: doc.id, ...(doc.data() as any) }))\r\n      .find(b => b.vehicleID?.toLowerCase() === id.toLowerCase());\r\n    if (bike) onScanned(bike);\r\n  };\r\n\r\n  const handleSelectBike = (bike: any) => {\r\n    onScanned(bike);\r\n    setVehicleID(bike.vehicleID);\r\n    setMatchingBikes([]);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex gap-2\">\r\n        <Button onClick={() => setMode('search')} variant={mode === 'search' ? 'default' : 'outline'}>\r\n          Search Vehicle ID\r\n        </Button>\r\n        <Button onClick={() => setMode('scan')} variant={mode === 'scan' ? 'default' : 'outline'}>\r\n          Scan QR Code\r\n        </Button>\r\n      </div>\r\n      {mode === 'search' && (\r\n        <div className=\"space-y-2\">\r\n          <Label>Enter part of Vehicle ID</Label>\r\n          <div className=\"relative\">\r\n            <Input\r\n              placeholder=\"e.g. DE0182\"\r\n              value={vehicleID}\r\n              onChange={(e) => setVehicleID(e.target.value)}\r\n              className=\"pr-10\"\r\n            />\r\n            {matchingBikes.length > 0 && (\r\n              <ul className=\"absolute z-10 w-full bg-white border rounded shadow-md mt-1 max-h-40 overflow-y-auto\">\r\n                {matchingBikes.map(bike => (\r\n                  <li\r\n                    key={bike.id}\r\n                    className=\"cursor-pointer px-4 py-2 hover:bg-gray-100\"\r\n                    onClick={() => handleSelectBike(bike)}\r\n                  >\r\n                    {bike.vehicleID} - {bike.plateNumber || 'No Plate'}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n      {mode === 'scan' && (\r\n        <div className=\"space-y-2\">\r\n          <Label>Scan QR Code with Camera</Label>\r\n          <video ref={videoRef} className=\"w-full max-w-md border rounded\" playsInline muted autoPlay />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2471, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/lib/services/customers/customerService.tsx"],"sourcesContent":["import { db } from '@/src/firebaseConfig';\r\nimport {\r\n  collection,\r\n  getDocs,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  doc,\r\n  getDoc,\r\n  Timestamp,\r\n} from 'firebase/firestore';\r\nimport { Customer } from '@/src/lib/customers/customerTypes';\r\n\r\nconst customersCollection = collection(db, 'customers');\r\n\r\nexport const getAllCustomers = async (): Promise<Customer[]> => {\r\n  const snapshot = await getDocs(customersCollection);\r\n  return snapshot.docs.map((docSnap) => ({\r\n    ...(docSnap.data() as Omit<Customer, 'id'>),\r\n    id: docSnap.id,\r\n  }));\r\n};\r\n\r\nexport const getCustomerById = async (id: string): Promise<Customer | null> => {\r\n  const docRef = doc(db, 'customers', id);\r\n  const docSnap = await getDoc(docRef);\r\n  if (docSnap.exists()) {\r\n    return { ...(docSnap.data() as Omit<Customer, 'id'>), id: docSnap.id };\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const createCustomer = async (\r\n  data: Omit<Customer, 'id' | 'createdAt' | 'updatedAt'>\r\n): Promise<Customer> => {\r\n  const now = new Date();\r\n  const payload = {\r\n    ...data,\r\n    createdAt: Timestamp.fromDate(now),\r\n    updatedAt: Timestamp.fromDate(now),\r\n    dateOfBirth:\r\n      data.dateOfBirth instanceof Timestamp\r\n        ? data.dateOfBirth\r\n        : typeof data.dateOfBirth === 'string'\r\n        ? Timestamp.fromDate(new Date(data.dateOfBirth + 'T00:00:00'))\r\n        : null,\r\n  };\r\n\r\n  const docRef = await addDoc(customersCollection, payload);\r\n\r\n  return {\r\n    ...data,\r\n    id: docRef.id,\r\n    createdAt: now,\r\n    updatedAt: now,\r\n  };\r\n};\r\n\r\nexport const updateCustomer = async (\r\n  id: string,\r\n  data: Partial<Omit<Customer, 'id' | 'createdAt' | 'updatedAt'>>\r\n): Promise<void> => {\r\n  try {\r\n    const now = new Date();\r\n    const docRef = doc(db, 'customers', id);\r\n\r\n    const updatePayload: any = {\r\n      ...data,\r\n      updatedAt: Timestamp.fromDate(now),\r\n    };\r\n\r\n    if (data.dateOfBirth) {\r\n      updatePayload.dateOfBirth =\r\n        data.dateOfBirth instanceof Timestamp\r\n          ? data.dateOfBirth\r\n          : typeof data.dateOfBirth === 'string'\r\n          ? Timestamp.fromDate(new Date(data.dateOfBirth + 'T00:00:00'))\r\n          : null;\r\n    }\r\n\r\n    console.log('üì§ Updating doc:', id);\r\n    console.log('üßæ Payload:', updatePayload);\r\n\r\n    await updateDoc(docRef, updatePayload);\r\n    console.log('‚úÖ Update successful');\r\n  } catch (error) {\r\n    console.error('‚ùå Error in updateCustomer:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n\r\n\r\nexport const deleteCustomer = async (id: string): Promise<void> => {\r\n  await deleteDoc(doc(db, 'customers', id));\r\n};\r\n"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AACA;AAAA;;;AAYA,MAAM,sBAAsB,CAAA,GAAA,sKAAA,CAAA,aAAU,AAAD,EAAE,wIAAA,CAAA,KAAE,EAAE;AAEpC,MAAM,kBAAkB;IAC7B,MAAM,WAAW,MAAM,CAAA,GAAA,sKAAA,CAAA,UAAO,AAAD,EAAE;IAC/B,OAAO,SAAS,IAAI,CAAC,GAAG,CAAC,CAAC,UAAY,CAAC;YACrC,GAAI,QAAQ,IAAI,EAAE;YAClB,IAAI,QAAQ,EAAE;QAChB,CAAC;AACH;AAEO,MAAM,kBAAkB,OAAO;IACpC,MAAM,SAAS,CAAA,GAAA,sKAAA,CAAA,MAAG,AAAD,EAAE,wIAAA,CAAA,KAAE,EAAE,aAAa;IACpC,MAAM,UAAU,MAAM,CAAA,GAAA,sKAAA,CAAA,SAAM,AAAD,EAAE;IAC7B,IAAI,QAAQ,MAAM,IAAI;QACpB,OAAO;YAAE,GAAI,QAAQ,IAAI,EAAE;YAA2B,IAAI,QAAQ,EAAE;QAAC;IACvE;IACA,OAAO;AACT;AAEO,MAAM,iBAAiB,OAC5B;IAEA,MAAM,MAAM,IAAI;IAChB,MAAM,UAAU;QACd,GAAG,IAAI;QACP,WAAW,sKAAA,CAAA,YAAS,CAAC,QAAQ,CAAC;QAC9B,WAAW,sKAAA,CAAA,YAAS,CAAC,QAAQ,CAAC;QAC9B,aACE,KAAK,WAAW,YAAY,sKAAA,CAAA,YAAS,GACjC,KAAK,WAAW,GAChB,OAAO,KAAK,WAAW,KAAK,WAC5B,sKAAA,CAAA,YAAS,CAAC,QAAQ,CAAC,IAAI,KAAK,KAAK,WAAW,GAAG,gBAC/C;IACR;IAEA,MAAM,SAAS,MAAM,CAAA,GAAA,sKAAA,CAAA,SAAM,AAAD,EAAE,qBAAqB;IAEjD,OAAO;QACL,GAAG,IAAI;QACP,IAAI,OAAO,EAAE;QACb,WAAW;QACX,WAAW;IACb;AACF;AAEO,MAAM,iBAAiB,OAC5B,IACA;IAEA,IAAI;QACF,MAAM,MAAM,IAAI;QAChB,MAAM,SAAS,CAAA,GAAA,sKAAA,CAAA,MAAG,AAAD,EAAE,wIAAA,CAAA,KAAE,EAAE,aAAa;QAEpC,MAAM,gBAAqB;YACzB,GAAG,IAAI;YACP,WAAW,sKAAA,CAAA,YAAS,CAAC,QAAQ,CAAC;QAChC;QAEA,IAAI,KAAK,WAAW,EAAE;YACpB,cAAc,WAAW,GACvB,KAAK,WAAW,YAAY,sKAAA,CAAA,YAAS,GACjC,KAAK,WAAW,GAChB,OAAO,KAAK,WAAW,KAAK,WAC5B,sKAAA,CAAA,YAAS,CAAC,QAAQ,CAAC,IAAI,KAAK,KAAK,WAAW,GAAG,gBAC/C;QACR;QAEA,QAAQ,GAAG,CAAC,oBAAoB;QAChC,QAAQ,GAAG,CAAC,eAAe;QAE3B,MAAM,CAAA,GAAA,sKAAA,CAAA,YAAS,AAAD,EAAE,QAAQ;QACxB,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,MAAM;IACR;AACF;AAIO,MAAM,iBAAiB,OAAO;IACnC,MAAM,CAAA,GAAA,sKAAA,CAAA,YAAS,AAAD,EAAE,CAAA,GAAA,sKAAA,CAAA,MAAG,AAAD,EAAE,wIAAA,CAAA,KAAE,EAAE,aAAa;AACvC","debugId":null}},
    {"offset": {"line": 2551, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/rent/common/IDUploader.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { Input } from '@/src/components/ui/input';\r\nimport { createCustomer, getAllCustomers, updateCustomer } from '@/src/lib/services/customers/customerService';\r\nimport { auth } from '@/src/firebaseConfig';\r\nimport { Timestamp } from 'firebase/firestore';\r\n\r\ninterface IDUploaderProps {\r\n  onExtracted: (userInfo: {\r\n    name: string;\r\n    idNumber: string;\r\n    rawText: string;\r\n  }) => void;\r\n}\r\n\r\nexport default function IDUploader({ onExtracted }: IDUploaderProps) {\r\n  const [fileName, setFileName] = useState('');\r\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null);\r\n  const [ocrText, setOcrText] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [message, setMessage] = useState('');\r\n\r\n  const handleUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    setFileName(file.name);\r\n    setPreviewUrl(URL.createObjectURL(file));\r\n    setOcrText('');\r\n    setLoading(true);\r\n    setError(null);\r\n    setMessage('');\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n\r\n      const res = await fetch('/api/ocr', {\r\n        method: 'POST',\r\n        body: formData,\r\n      });\r\n\r\n      if (!res.ok) throw new Error(`Server responded with status ${res.status}`);\r\n\r\n      const data = await res.json();\r\n      if (data.error) throw new Error(data.error);\r\n\r\n      const {\r\n        name = '',\r\n        idNumber = '',\r\n        rawText = '',\r\n        address = '',\r\n        sex = '',\r\n        nationality = '',\r\n        placeOfOrigin = '',\r\n        placeOfResidence = '',\r\n        dateOfBirth = null, // üëà d·∫°ng chu·ªói ho·∫∑c null\r\n      } = data;\r\n\r\n      if (!name || !idNumber) throw new Error('Could not extract sufficient information from ID');\r\n\r\n      setOcrText(rawText);\r\n      onExtracted({ name, idNumber, rawText });\r\n\r\n      const customers = await getAllCustomers();\r\n      const existing = customers.find((c) => c.idNumber === idNumber);\r\n\r\n      // üëá Chuy·ªÉn dateOfBirth th√†nh Timestamp n·∫øu h·ª£p l·ªá\r\n      let parsedDateOfBirth: Timestamp | null = null;\r\n      if (dateOfBirth) {\r\n        const parsedDate = new Date(dateOfBirth);\r\n        if (!isNaN(parsedDate.getTime())) {\r\n          parsedDateOfBirth = Timestamp.fromDate(parsedDate);\r\n        }\r\n      }\r\n\r\n      const customerData = {\r\n        userId: auth.currentUser?.uid || '',\r\n        name,\r\n        idNumber,\r\n        email: '',\r\n        phone: '',\r\n        address,\r\n        driverLicense: '',\r\n        dateOfBirth: parsedDateOfBirth, // üëà ƒë√£ ki·ªÉm tra an to√†n\r\n        sex,\r\n        nationality,\r\n        placeOfOrigin,\r\n        placeOfResidence,\r\n      };\r\n\r\n      if (existing) {\r\n        await updateCustomer(existing.id, customerData);\r\n        setMessage('‚úÖ Customer information has been updated.');\r\n      } else {\r\n        await createCustomer(customerData);\r\n        setMessage('‚úÖ New customer has been created.');\r\n      }\r\n    } catch (err) {\r\n      const message = err instanceof Error ? err.message : 'Unknown error';\r\n      setError('‚ö†Ô∏è OCR failed: ' + message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <Input type=\"file\" accept=\"image/*\" onChange={handleUpload} disabled={loading} />\r\n      {fileName && (\r\n        <div className=\"text-sm text-gray-600\">\r\n          üìÑ Uploaded: {fileName} {loading && <span className=\"italic\">‚Äì Processing...</span>}\r\n        </div>\r\n      )}\r\n      {message && <div className=\"text-sm text-blue-700 font-medium\">{message}</div>}\r\n      {error && <div className=\"text-sm text-red-600\">{error}</div>}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2712, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/lib/utils.ts"],"sourcesContent":["// src/lib/utils.ts\r\nexport function cn(...args: any[]) {\r\n    return args.filter(Boolean).join(\" \");\r\n  }\r\n  "],"names":[],"mappings":"AAAA,mBAAmB;;;;AACZ,SAAS,GAAG,GAAG,IAAW;IAC7B,OAAO,KAAK,MAAM,CAAC,SAAS,IAAI,CAAC;AACnC","debugId":null}},
    {"offset": {"line": 2728, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/src/lib/utils\";\r\n\r\nexport interface TextareaProps extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <textarea\r\n        ref={ref}\r\n        className={cn(\r\n          \"flex w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-[#00d289] focus:border-transparent\",\r\n          className\r\n        )}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\n\r\nTextarea.displayName = \"Textarea\";\r\n\r\nexport { Textarea };\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAIA,MAAM,yBAAW,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAC9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,8LACA;QAED,GAAG,KAAK;;;;;;AAGf;;AAGF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 2763, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/rent/common/PackageSelector.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { collection, getDocs, query, where } from 'firebase/firestore';\r\nimport { db } from '@/src/firebaseConfig';\r\nimport { SubscriptionPackage } from '@/src/lib/subscriptionPackages/subscriptionPackagesType';\r\n\r\ninterface PackageSelectorProps {\r\n  companyId: string;\r\n  selectedId: string;\r\n  onSelect: (pkg: SubscriptionPackage) => void;\r\n}\r\n\r\nexport default function PackageSelector({\r\n  companyId,\r\n  selectedId,\r\n  onSelect,\r\n}: PackageSelectorProps) {\r\n  const [packages, setPackages] = useState<SubscriptionPackage[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const fetchPackages = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const q = query(collection(db, 'subscriptionPackages'), where('companyId', '==', companyId));\r\n      const snapshot = await getDocs(q);\r\n      const data = snapshot.docs.map(doc => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      })) as SubscriptionPackage[];\r\n      setPackages(data);\r\n    } catch (error) {\r\n      console.error('‚ùå Error loading packages:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (companyId) {\r\n      fetchPackages();\r\n    }\r\n  }, [companyId]);\r\n\r\n  return (\r\n    <select\r\n      className=\"w-full border rounded px-3 py-2\"\r\n      value={selectedId}\r\n      onChange={(e) => {\r\n        const selected = packages.find(p => p.id === e.target.value);\r\n        if (selected) onSelect(selected);\r\n      }}\r\n      disabled={loading}\r\n    >\r\n      <option value=\"\">\r\n        {loading ? 'üîÑ Loading packages...' : '-- Select a package --'}\r\n      </option>\r\n      {packages.map((pkg) => (\r\n        <option key={pkg.id} value={pkg.id} title={pkg.note || ''}>\r\n          {pkg.name}\r\n        </option>\r\n      ))}\r\n    </select>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AACA;AAAA;;;AAJA;;;;AAae,SAAS,gBAAgB,EACtC,SAAS,EACT,UAAU,EACV,QAAQ,EACa;;IACrB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAyB,EAAE;IAClE,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,MAAM,gBAAgB;QACpB,WAAW;QACX,IAAI;YACF,MAAM,IAAI,CAAA,GAAA,sKAAA,CAAA,QAAK,AAAD,EAAE,CAAA,GAAA,sKAAA,CAAA,aAAU,AAAD,EAAE,wIAAA,CAAA,KAAE,EAAE,yBAAyB,CAAA,GAAA,sKAAA,CAAA,QAAK,AAAD,EAAE,aAAa,MAAM;YACjF,MAAM,WAAW,MAAM,CAAA,GAAA,sKAAA,CAAA,UAAO,AAAD,EAAE;YAC/B,MAAM,OAAO,SAAS,IAAI,CAAC,GAAG,CAAC,CAAA,MAAO,CAAC;oBACrC,IAAI,IAAI,EAAE;oBACV,GAAG,IAAI,IAAI,EAAE;gBACf,CAAC;YACD,YAAY;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,6BAA6B;QAC7C,SAAU;YACR,WAAW;QACb;IACF;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;qCAAE;YACR,IAAI,WAAW;gBACb;YACF;QACF;oCAAG;QAAC;KAAU;IAEd,qBACE,6LAAC;QACC,WAAU;QACV,OAAO;QACP,UAAU,CAAC;YACT,MAAM,WAAW,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC,KAAK;YAC3D,IAAI,UAAU,SAAS;QACzB;QACA,UAAU;;0BAEV,6LAAC;gBAAO,OAAM;0BACX,UAAU,2BAA2B;;;;;;YAEvC,SAAS,GAAG,CAAC,CAAC,oBACb,6LAAC;oBAAoB,OAAO,IAAI,EAAE;oBAAE,OAAO,IAAI,IAAI,IAAI;8BACpD,IAAI,IAAI;mBADE,IAAI,EAAE;;;;;;;;;;;AAM3B;GAnDwB;KAAA","debugId":null}},
    {"offset": {"line": 2853, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/rent/xedientrungnam/RentEbikeMobileForm.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { Timestamp, collection, getDocs, addDoc } from 'firebase/firestore';\r\nimport { db } from '@/src/firebaseConfig';\r\nimport { useRentBikeForm, Role } from './useRentBikeForm';\r\nimport QRCodeScanner from '../common/QRCodeScanner';\r\nimport IDUploader from '../common/IDUploader';\r\nimport { Button } from '@/src/components/ui/button';\r\nimport { Input } from '@/src/components/ui/input';\r\nimport { Textarea } from '@/src/components/ui/textarea';\r\nimport PackageSelector from '../common/PackageSelector';\r\n\r\nfunction formatCurrency(value: string | number) {\r\n  const number = typeof value === 'string' ? parseFloat(value) : value;\r\n  if (isNaN(number)) return '';\r\n  return number.toLocaleString('en-US');\r\n}\r\n\r\nexport default function RentEbikeMobileForm({ role }: { role: Role }) {\r\n  const form = useRentBikeForm(role);\r\n  const [availableBatteries, setAvailableBatteries] = useState<string[]>([]);\r\n\r\n  useEffect(() => {\r\n    const fetchAvailableBatteries = async () => {\r\n      const snapshot = await getDocs(collection(db, 'batteries'));\r\n      const codes = snapshot.docs\r\n        .map((doc) => doc.data())\r\n        .filter((b: any) => b.status === 'in_stock')\r\n        .map((b: any) => b.batteryCode);\r\n      setAvailableBatteries(codes);\r\n    };\r\n\r\n    fetchAvailableBatteries();\r\n  }, []);\r\n\r\n  const updateTotalAndRemaining = (newPrice: string, newPinFee: string) => {\r\n    const total = (parseFloat(newPrice) || 0) + (parseFloat(newPinFee) || 0);\r\n    form.setTotal(total.toFixed(0));\r\n\r\n    const depositNum = parseFloat(form.deposit) || 0;\r\n    const remainingVal = total - depositNum;\r\n    form.setRemaining(remainingVal.toFixed(0));\r\n  };\r\n\r\n  const handleBook = async () => {\r\n    try {\r\n      const bookingData = {\r\n        companyId: form.companyId,\r\n        stationId: form.stationId,\r\n        customerName: form.customerName,\r\n        phone: form.phone,\r\n        idNumber: form.idNumber,\r\n        address: form.address,\r\n        vehicleModel: form.vehicleModel,\r\n        vehicleColor: form.vehicleColor,\r\n        vin: form.vin,\r\n        licensePlate: form.licensePlate,\r\n        batteryCodes: form.batteryCodes,\r\n        boxType: form.boxType,\r\n        subscriptionPackageId: form.subscriptionPackageId,\r\n        basePrice: Number(form.basePrice),\r\n        pinFee: Number(form.pinFee),\r\n        accessories: form.accessories,\r\n        total: Number(form.total),\r\n        deposit: Number(form.deposit),\r\n        remaining: Number(form.remaining),\r\n        note: form.note,\r\n        createdAt: Timestamp.now(),\r\n        updatedAt: Timestamp.now(),\r\n      };\r\n\r\n      await addDoc(collection(db, 'bookings'), bookingData);\r\n      alert('‚úÖ Booking created successfully!');\r\n    } catch (error) {\r\n      console.error('‚ùå Booking failed:', error);\r\n      alert('‚ùå Booking failed!');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full max-w-md mx-auto bg-white shadow-lg rounded-2xl px-6 py-8 my-6 space-y-8\">\r\n      <h2 className=\"text-lg font-bold text-center\">RENTAL FORM (Mobile)</h2>\r\n\r\n      {/* 1. CUSTOMER INFO */}\r\n      <div className=\"space-y-4\">\r\n        <h3 className=\"font-semibold text-base\">1. Customer Info</h3>\r\n        <IDUploader\r\n          onExtracted={({ name, idNumber, rawText }) => {\r\n            form.setCustomerName(name);\r\n            form.setIdNumber(idNumber);\r\n\r\n            const lines = rawText.split('\\n').map(line => line.trim());\r\n            const resIndex = lines.findIndex((line) => /n∆°i.*tr√∫|place of residence/i.test(line));\r\n            if (resIndex >= 0) {\r\n              const resLine = lines[resIndex]?.replace(/.*(residence|tr√∫)/i, '').trim();\r\n              const resNextLine = lines[resIndex + 1]?.trim();\r\n              const fullAddress = [resLine, resNextLine].filter(Boolean).join(', ');\r\n              form.setAddress(fullAddress);\r\n            }\r\n          }}\r\n        />\r\n        <Input placeholder=\"Full Name\" value={form.customerName} onChange={(e) => form.setCustomerName(e.target.value)} />\r\n        <Input placeholder=\"Phone Number\" value={form.phone} onChange={(e) => form.setPhone(e.target.value)} />\r\n        <Input placeholder=\"ID Number\" value={form.idNumber} onChange={(e) => form.setIdNumber(e.target.value)} />\r\n        <Input placeholder=\"Address\" value={form.address} onChange={(e) => form.setAddress(e.target.value)} />\r\n      </div>\r\n\r\n      {/* 2. VEHICLE INFO */}\r\n      <div className=\"space-y-4\">\r\n        <h3 className=\"font-semibold text-base\">2. Vehicle Info</h3>\r\n        <QRCodeScanner\r\n          onScanned={async (bike) => {\r\n            form.setVin(bike.vehicleID);\r\n            form.setLicensePlate(bike.plateNumber || '');\r\n            form.setVehicleColor(bike.color || '');\r\n\r\n            try {\r\n              const snapshot = await getDocs(collection(db, 'ebikeModels'));\r\n              const models = snapshot.docs.map((doc) => ({\r\n                id: doc.id,\r\n                ...(doc.data() as { name: string })\r\n              }));\r\n              const match = models.find((m) => m.id === bike.modelId);\r\n              if (match) form.setVehicleModel(match.name);\r\n            } catch (err) {\r\n              console.error('Error fetching model name', err);\r\n            }\r\n          }}\r\n        />\r\n        <Input placeholder=\"Vehicle Model\" value={form.vehicleModel} onChange={(e) => form.setVehicleModel(e.target.value)} />\r\n        <Input placeholder=\"Vehicle Color\" value={form.vehicleColor} onChange={(e) => form.setVehicleColor(e.target.value)} />\r\n        <Input placeholder=\"VIN\" value={form.vin} onChange={(e) => form.setVin(e.target.value)} />\r\n        <Input placeholder=\"License Plate (optional)\" value={form.licensePlate} onChange={(e) => form.setLicensePlate(e.target.value)} />\r\n        {[0, 1, 2].map((i) => (\r\n          <div key={i}>\r\n            <datalist id={`battery-options-${i}`}>{availableBatteries.map((code) => <option key={code} value={code} />)}</datalist>\r\n            <Input\r\n              list={`battery-options-${i}`}\r\n              placeholder={`Battery Code ${i + 1}`}\r\n              value={form.batteryCodes[i] || ''}\r\n              onChange={(e) => {\r\n                const newCodes = [...form.batteryCodes];\r\n                newCodes[i] = e.target.value;\r\n                form.setBatteryCodes(newCodes);\r\n              }}\r\n            />\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* 3. PACKAGE & PRICING */}\r\n      <div className=\"space-y-4\">\r\n        <h3 className=\"font-semibold text-base\">3. Package & Pricing</h3>\r\n        <PackageSelector\r\n          companyId='engkXQIeqS7QNJPWKPrw' // Xe ƒëi·ªán trung nam\r\n          selectedId={form.subscriptionPackageId}\r\n          onSelect={(pkg) => {\r\n            form.setSubscriptionPackageId(pkg.id ?? '');\r\n            form.setBasePrice(String(pkg.basePrice ?? ''));\r\n            updateTotalAndRemaining(String(pkg.basePrice ?? ''), form.pinFee);            \r\n          }}\r\n        />\r\n        <Input\r\n          placeholder=\"Base Price (VND)\"\r\n          value={formatCurrency(form.basePrice)}\r\n          onChange={(e) => {\r\n            const raw = e.target.value.replace(/[^\\d.]/g, '');\r\n            form.setBasePrice(raw);\r\n            updateTotalAndRemaining(raw, form.pinFee);\r\n          }}\r\n        />\r\n        <Input\r\n          placeholder=\"Battery Rental Fee\"\r\n          value={formatCurrency(form.pinFee)}\r\n          onChange={(e) => {\r\n            const raw = e.target.value.replace(/[^\\d.]/g, '');\r\n            form.setPinFee(raw);\r\n            updateTotalAndRemaining(form.basePrice, raw);\r\n          }}\r\n        />\r\n        <Input placeholder=\"Total Amount\" value={formatCurrency(form.total)} readOnly />\r\n        <Input\r\n          placeholder=\"Deposit\"\r\n          value={formatCurrency(form.deposit)}\r\n          onChange={(e) => {\r\n            const raw = e.target.value.replace(/[^\\d.]/g, '');\r\n            form.setDeposit(raw);\r\n            const totalNum = parseFloat(form.total) || 0;\r\n            const depositNum = parseFloat(raw) || 0;\r\n            const remainingVal = totalNum - depositNum;\r\n            form.setRemaining(remainingVal.toFixed(0));\r\n          }}\r\n        />\r\n        <Input placeholder=\"Remaining Balance\" value={formatCurrency(form.remaining)} readOnly />\r\n        <Input placeholder=\"Accessories (GT3...)\" value={form.accessories} onChange={(e) => form.setAccessories(e.target.value)} />\r\n      </div>\r\n\r\n      {/* 4. NOTES */}\r\n      <div className=\"space-y-2\">\r\n        <h3 className=\"font-semibold text-base\">4. Notes</h3>\r\n        <Textarea placeholder=\"Additional notes...\" value={form.note} onChange={(e) => form.setNote(e.target.value)} />\r\n      </div>\r\n\r\n      {/* 5. ACTION */}\r\n      <Button className=\"w-full mt-4\" variant=\"outline\" onClick={() => {\r\n        const input = document.createElement('input');\r\n        input.type = 'file';\r\n        input.accept = 'image/*';\r\n        input.onchange = async (e: any) => {\r\n          const file = e.target.files[0];\r\n          if (!file) return;\r\n          alert(`üì∏ Captured: ${file.name}`);\r\n        };\r\n        input.click();\r\n      }}>\r\n        üì∏ Capture Bill\r\n      </Button>\r\n\r\n      <Button className=\"w-full\" onClick={handleBook} disabled={form.loading}>\r\n        {form.loading ? 'Booking...' : '‚úÖ Confirm Booking'}\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3331, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/rent/xedientrungnam/RentEbikeDesktopForm.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { Timestamp, collection, getDocs, addDoc } from 'firebase/firestore';\r\nimport { db } from '@/src/firebaseConfig';\r\nimport { useRentBikeForm, Role } from './useRentBikeForm';\r\nimport QRCodeScanner from '../common/QRCodeScanner';\r\nimport IDUploader from '../common/IDUploader';\r\nimport { Button } from '@/src/components/ui/button';\r\nimport { Input } from '@/src/components/ui/input';\r\nimport { Textarea } from '@/src/components/ui/textarea';\r\nimport PackageSelector from '../common/PackageSelector';\r\n\r\nfunction formatCurrency(value: string | number) {\r\n  const number = typeof value === 'string' ? parseFloat(value) : value;\r\n  if (isNaN(number)) return '';\r\n  return number.toLocaleString('en-US');\r\n}\r\n\r\nexport default function RentEbikeDesktopForm({ role }: { role: Role }) {\r\n  const form = useRentBikeForm(role);\r\n  const [availableBatteries, setAvailableBatteries] = useState<string[]>([]);\r\n\r\n  useEffect(() => {\r\n    const fetchAvailableBatteries = async () => {\r\n      const snapshot = await getDocs(collection(db, 'batteries'));\r\n      const codes = snapshot.docs\r\n        .map((doc) => doc.data())\r\n        .filter((b: any) => b.status === 'in_stock')\r\n        .map((b: any) => b.batteryCode);\r\n      setAvailableBatteries(codes);\r\n    };\r\n\r\n    fetchAvailableBatteries();\r\n    form.setCompanyId('XEDIENTRUNGNAM');\r\n    form.setStationId('station_01');\r\n  }, []);\r\n\r\n  const updateTotalAndRemaining = (newPrice: string, newPinFee: string) => {\r\n    const total = (parseFloat(newPrice) || 0) + (parseFloat(newPinFee) || 0);\r\n    form.setTotal(total.toFixed(0));\r\n\r\n    const depositNum = parseFloat(form.deposit) || 0;\r\n    const remainingVal = total - depositNum;\r\n    form.setRemaining(remainingVal.toFixed(0));\r\n  };\r\n\r\n  const handleCaptureClick = () => {\r\n    const input = document.createElement('input');\r\n    input.type = 'file';\r\n    input.accept = 'image/*';\r\n    input.onchange = async (e: any) => {\r\n      const file = e.target.files[0];\r\n      if (!file) return;\r\n      alert(`üì∏ Captured: ${file.name}`);\r\n    };\r\n    input.click();\r\n  };\r\n\r\n  const handleBook = async () => {\r\n    try {\r\n      const bookingData = {\r\n        companyId: form.companyId,\r\n        stationId: form.stationId,\r\n        customerName: form.customerName,\r\n        phone: form.phone,\r\n        idNumber: form.idNumber,\r\n        address: form.address,\r\n        vehicleModel: form.vehicleModel,\r\n        vehicleColor: form.vehicleColor,\r\n        vin: form.vin,\r\n        licensePlate: form.licensePlate,\r\n        batteryCodes: form.batteryCodes,\r\n        boxType: form.boxType,\r\n        subscriptionPackageId: form.subscriptionPackageId,\r\n        basePrice: Number(form.basePrice),\r\n        pinFee: Number(form.pinFee),\r\n        accessories: form.accessories,\r\n        total: Number(form.total),\r\n        deposit: Number(form.deposit),\r\n        remaining: Number(form.remaining),\r\n        note: form.note,\r\n        createdAt: Timestamp.now(),\r\n        updatedAt: Timestamp.now(),\r\n      };\r\n\r\n      await addDoc(collection(db, 'bookings'), bookingData);\r\n      alert('‚úÖ Booking created successfully!');\r\n    } catch (error) {\r\n      console.error('‚ùå Booking failed:', error);\r\n      alert('‚ùå Booking failed!');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n      <h2 className=\"text-lg font-bold text-center col-span-full\">RENTAL FORM - XEDIENTRUNGNAM (Desktop)</h2>\r\n\r\n      {/* LEFT COLUMN */}\r\n      <div className=\"space-y-4\">\r\n        <h3 className=\"font-bold text-base\">1. CUSTOMER INFORMATION</h3>\r\n        <IDUploader\r\n          onExtracted={({ name, idNumber, rawText }) => {\r\n            form.setCustomerName(name);\r\n            form.setIdNumber(idNumber);\r\n            const lines = rawText.split('\\n').map(line => line.trim());\r\n            const resIndex = lines.findIndex((line) => /n∆°i.*tr√∫|place of residence/i.test(line));\r\n            let fullAddress = '';\r\n            if (resIndex >= 0) {\r\n              const resLine = lines[resIndex]?.replace(/.*(residence|tr√∫)/i, '').trim();\r\n              const resNextLine = lines[resIndex + 1]?.trim();\r\n              fullAddress = [resLine, resNextLine].filter(Boolean).join(', ');\r\n              form.setAddress(fullAddress);\r\n            }\r\n          }}\r\n        />\r\n        <Input placeholder=\"Full Name\" value={form.customerName} onChange={(e) => form.setCustomerName(e.target.value)} />\r\n        <Input placeholder=\"Phone Number\" value={form.phone} onChange={(e) => form.setPhone(e.target.value)} />\r\n        <Input placeholder=\"ID Number\" value={form.idNumber} onChange={(e) => form.setIdNumber(e.target.value)} />\r\n        <Input placeholder=\"Address\" value={form.address} onChange={(e) => form.setAddress(e.target.value)} />\r\n\r\n        <h3 className=\"font-bold text-base\">2. VEHICLE INFORMATION</h3>\r\n        <QRCodeScanner\r\n          onScanned={async (bike) => {\r\n            form.setVin(bike.vehicleID);\r\n            form.setLicensePlate(bike.plateNumber || '');\r\n            form.setVehicleColor(bike.color || '');\r\n\r\n            try {\r\n              const snapshot = await getDocs(collection(db, 'ebikeModels'));\r\n              const models = snapshot.docs.map((doc) => ({\r\n                id: doc.id,\r\n                ...(doc.data() as { name: string })\r\n              }));\r\n              const match = models.find((m) => m.id === bike.modelId);\r\n              if (match) form.setVehicleModel(match.name);\r\n            } catch (err) {\r\n              console.error('Error fetching model name', err);\r\n            }\r\n          }}\r\n        />\r\n        <Input placeholder=\"Vehicle Model\" value={form.vehicleModel} onChange={(e) => form.setVehicleModel(e.target.value)} />\r\n        <Input placeholder=\"Vehicle Color\" value={form.vehicleColor} onChange={(e) => form.setVehicleColor(e.target.value)} />\r\n        <Input placeholder=\"VIN\" value={form.vin} onChange={(e) => form.setVin(e.target.value)} />\r\n        <Input placeholder=\"License Plate (optional)\" value={form.licensePlate} onChange={(e) => form.setLicensePlate(e.target.value)} />\r\n        {[0, 1, 2].map((i) => (\r\n          <div key={i}>\r\n            <datalist id={`battery-options-${i}`}>{availableBatteries.map((code) => <option key={code} value={code} />)}</datalist>\r\n            <Input\r\n              list={`battery-options-${i}`}\r\n              placeholder={`Battery Code ${i + 1}`}\r\n              value={form.batteryCodes[i] || ''}\r\n              onChange={(e) => {\r\n                const newCodes = [...form.batteryCodes];\r\n                newCodes[i] = e.target.value;\r\n                form.setBatteryCodes(newCodes);\r\n              }}\r\n            />\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* RIGHT COLUMN */}\r\n      <div className=\"space-y-4\">\r\n        <h3 className=\"font-bold text-base\">3. PRICING & DEPOSIT</h3>\r\n\r\n        <PackageSelector\r\n          companyId='engkXQIeqS7QNJPWKPrw' // Xe ƒëi·ªán trung nam\r\n          selectedId={form.subscriptionPackageId}\r\n          onSelect={(pkg) => {\r\n            form.setSubscriptionPackageId(pkg.id ?? '');\r\n            form.setBasePrice(String(pkg.basePrice ?? ''));\r\n            updateTotalAndRemaining(String(pkg.basePrice ?? ''), form.pinFee);\r\n          }}\r\n        />\r\n\r\n        <Input\r\n          placeholder=\"Base Price (VND)\"\r\n          value={formatCurrency(form.basePrice)}\r\n          onChange={(e) => {\r\n            const raw = e.target.value.replace(/[^\\d.]/g, '');\r\n            form.setBasePrice(raw);\r\n            updateTotalAndRemaining(raw, form.pinFee);\r\n          }}\r\n        />\r\n        <Input\r\n          placeholder=\"Battery Rental Fee\"\r\n          value={formatCurrency(form.pinFee)}\r\n          onChange={(e) => {\r\n            const raw = e.target.value.replace(/[^\\d.]/g, '');\r\n            form.setPinFee(raw);\r\n            updateTotalAndRemaining(form.basePrice, raw);\r\n          }}\r\n        />\r\n        <Input placeholder=\"Total Amount\" value={formatCurrency(form.total)} readOnly />\r\n        <Input\r\n          placeholder=\"Deposit\"\r\n          value={formatCurrency(form.deposit)}\r\n          onChange={(e) => {\r\n            const raw = e.target.value.replace(/[^\\d.]/g, '');\r\n            form.setDeposit(raw);\r\n            const totalNum = parseFloat(form.total) || 0;\r\n            const depositNum = parseFloat(raw) || 0;\r\n            const remainingVal = totalNum - depositNum;\r\n            form.setRemaining(remainingVal.toFixed(0));\r\n          }}\r\n        />\r\n        <Input placeholder=\"Remaining Balance\" value={formatCurrency(form.remaining)} readOnly />\r\n        <Input placeholder=\"Accessories (GT3...)\" value={form.accessories} onChange={(e) => form.setAccessories(e.target.value)} />\r\n\r\n        <h3 className=\"font-bold text-base\">4. NOTES</h3>\r\n        <Textarea placeholder=\"Additional notes...\" value={form.note} onChange={(e) => form.setNote(e.target.value)} />\r\n\r\n        <div className=\"flex flex-col gap-2 pt-2\">\r\n          <Button variant=\"outline\" onClick={handleCaptureClick}>üì∏ Capture Bill</Button>\r\n          <Button onClick={handleBook} className=\"w-full\" disabled={form.loading}>\r\n            {form.loading ? 'Booking...' : '‚úÖ Confirm Booking'}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3803, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/utils/roleUtils.ts"],"sourcesContent":["// C√¥ng ty EMOVE\r\nimport { Role } from '@/src/components/rent/emove/useRentBikeForm';\r\n\r\nexport function convertRoleToDisplayRole(rawRole: string): Role {\r\n  const normalized = rawRole\r\n    .toLowerCase()\r\n    .replace(/\\s+/g, '_') // chuy·ªÉn kho·∫£ng tr·∫Øng th√†nh g·∫°ch d∆∞·ªõi\r\n    .trim();\r\n\r\n  const mapping: Record<string, Role> = {\r\n    staff: 'Staff',\r\n    customer: 'Customer',\r\n    station_manager: 'Station Manager',\r\n    company_owner: 'Company Owner',\r\n    private_owner: 'Private Owner',\r\n    agent: 'Agent',\r\n    technician: 'Technician',\r\n    investor: 'Investor',\r\n    admin: 'Admin',\r\n  };\r\n\r\n  return mapping[normalized] || 'Customer'; // fallback an to√†n\r\n}\r\n"],"names":[],"mappings":"AAAA,gBAAgB;;;;AAGT,SAAS,yBAAyB,OAAe;IACtD,MAAM,aAAa,QAChB,WAAW,GACX,OAAO,CAAC,QAAQ,KAAK,sCAAsC;KAC3D,IAAI;IAEP,MAAM,UAAgC;QACpC,OAAO;QACP,UAAU;QACV,iBAAiB;QACjB,eAAe;QACf,eAAe;QACf,OAAO;QACP,YAAY;QACZ,UAAU;QACV,OAAO;IACT;IAEA,OAAO,OAAO,CAAC,WAAW,IAAI,YAAY,mBAAmB;AAC/D","debugId":null}},
    {"offset": {"line": 3832, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/rent/factory/RentBikeFormFactory.tsx"],"sourcesContent":["// D√πng ƒë·ªÉ render form desktop ho·∫∑c mobile t√πy theo thi·∫øt b·ªã\r\n// xedientrungnam/RentBikeFormFactory.tsx\r\n'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport RentEbikeMobileForm from '../xedientrungnam/RentEbikeMobileForm';\r\nimport RentEbikeDesktopForm from '../xedientrungnam/RentEbikeDesktopForm';\r\nimport { Role } from '../xedientrungnam/useRentBikeForm';\r\nimport { convertRoleToDisplayRole } from '@/src/utils/roleUtils';\r\n\r\ninterface Props {\r\n  role: string; // ƒë·∫ßu v√†o t·ª´ Firestore ho·∫∑c Auth\r\n}\r\n\r\nexport default function RentBikeFormFactory({ role }: Props) {\r\n  const [isMobile, setIsMobile] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkScreenSize = () => {\r\n      setIsMobile(window.innerWidth < 768);\r\n    };\r\n\r\n    checkScreenSize();\r\n    window.addEventListener('resize', checkScreenSize);\r\n    return () => window.removeEventListener('resize', checkScreenSize);\r\n  }, []);\r\n\r\n  const displayRole: Role = convertRoleToDisplayRole(role);\r\n  \r\n  return isMobile ? (\r\n    <RentEbikeMobileForm role={displayRole} />\r\n  ) : (\r\n    <RentEbikeDesktopForm role={displayRole} />\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,4DAA4D;AAC5D,yCAAyC;;;;;AAGzC;AACA;AACA;AAEA;;;AANA;;;;;AAYe,SAAS,oBAAoB,EAAE,IAAI,EAAS;;IACzD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEzC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;yCAAE;YACR,MAAM;iEAAkB;oBACtB,YAAY,OAAO,UAAU,GAAG;gBAClC;;YAEA;YACA,OAAO,gBAAgB,CAAC,UAAU;YAClC;iDAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;;QACpD;wCAAG,EAAE;IAEL,MAAM,cAAoB,CAAA,GAAA,4HAAA,CAAA,2BAAwB,AAAD,EAAE;IAEnD,OAAO,yBACL,6LAAC,sKAAA,CAAA,UAAmB;QAAC,MAAM;;;;;6BAE3B,6LAAC,uKAAA,CAAA,UAAoB;QAAC,MAAM;;;;;;AAEhC;GApBwB;KAAA","debugId":null}},
    {"offset": {"line": 3894, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/ui/checkbox.tsx"],"sourcesContent":["'use client';\r\n\r\nimport * as React from 'react';\r\n\r\ntype CheckboxProps = {\r\n  checked: boolean;\r\n  onCheckedChange: (checked: boolean) => void;\r\n  className?: string;\r\n  disabled?: boolean;\r\n};\r\n\r\nexport const Checkbox: React.FC<CheckboxProps> = ({\r\n  checked,\r\n  onCheckedChange,\r\n  className = '',\r\n  disabled = false,\r\n}) => {\r\n  return (\r\n    <input\r\n      type=\"checkbox\"\r\n      className={`w-4 h-4 rounded border-gray-300 focus:ring-2 focus:ring-[#00d289] ${className}`}\r\n      checked={checked}\r\n      onChange={(e) => onCheckedChange(e.target.checked)}\r\n      disabled={disabled}\r\n    />\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;AAWO,MAAM,WAAoC,CAAC,EAChD,OAAO,EACP,eAAe,EACf,YAAY,EAAE,EACd,WAAW,KAAK,EACjB;IACC,qBACE,6LAAC;QACC,MAAK;QACL,WAAW,CAAC,kEAAkE,EAAE,WAAW;QAC3F,SAAS;QACT,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,OAAO;QACjD,UAAU;;;;;;AAGhB;KAfa","debugId":null}},
    {"offset": {"line": 3925, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/ui/select.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { ReactNode, useState, useRef, useEffect } from \"react\";\r\n\r\ninterface SelectProps {\r\n  className?: string;\r\n  children: ReactNode;\r\n  placeholder?: string;\r\n  value?: string;\r\n  onChange?: (value: string) => void;\r\n}\r\n\r\ninterface SelectItemProps {\r\n  value: string;\r\n  children: ReactNode;\r\n  onSelect: (value: string, label: string) => void;\r\n}\r\n\r\nexport const Select = ({\r\n  className = \"\",\r\n  children,\r\n}: {\r\n  className?: string;\r\n  children: ReactNode;\r\n}) => {\r\n  return <div className={`relative ${className}`}>{children}</div>;\r\n};\r\n\r\nexport const SelectTrigger = ({\r\n  className = \"\",\r\n  value,\r\n  placeholder,\r\n  onClick,\r\n}: {\r\n  className?: string;\r\n  value?: string;\r\n  placeholder?: string;\r\n  onClick?: () => void;\r\n}) => {\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      onClick={onClick}\r\n      className={`w-full text-left px-4 py-2 border  rounded-sm ${className}`}\r\n    >\r\n      {value || placeholder || \"Select...\"}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport const SelectContent = ({\r\n  className = \"\",\r\n  children,\r\n  open,\r\n}: {\r\n  className?: string;\r\n  children: ReactNode;\r\n  open: boolean;\r\n}) => {\r\n  if (!open) return null;\r\n  return (\r\n    <div\r\n      className={`absolute z-10 mt-2 w-full bg-white rounded-lg shadow-lg ${className}`}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const SelectItem = ({ value, children, onSelect }: SelectItemProps) => {\r\n  return (\r\n    <div\r\n      className=\"px-4 py-2 hover:bg-gray-100 cursor-pointer\"\r\n      onClick={() => onSelect(value, children?.toString() || \"\")}\r\n      role=\"option\"\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Wrapper Component ƒë·ªÉ d·ªÖ s·ª≠ d·ª•ng\r\nexport const SimpleSelect = ({\r\n  options,\r\n  placeholder = \"Select...\",\r\n  value,\r\n  onChange,\r\n  className,\r\n}: {\r\n  options: { label: string; value: string }[];\r\n  placeholder?: string;\r\n  value?: string;\r\n  onChange: (val: string) => void;\r\n  className?: string;\r\n}) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [selectedLabel, setSelectedLabel] = useState<string | undefined>(\r\n    options.find((opt) => opt.value === value)?.label\r\n  );\r\n\r\n  const wrapperRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        wrapperRef.current &&\r\n        !wrapperRef.current.contains(event.target as Node)\r\n      ) {\r\n        setOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  return (\r\n    <Select className={className}>\r\n      <div ref={wrapperRef}>\r\n        <SelectTrigger\r\n          value={selectedLabel}\r\n          placeholder={placeholder}\r\n          onClick={() => setOpen(!open)}\r\n        />\r\n        <SelectContent open={open}>\r\n          {options.map((opt) => (\r\n            <SelectItem\r\n              key={opt.value}\r\n              value={opt.value}\r\n              onSelect={(val, label) => {\r\n                onChange(val);\r\n                setSelectedLabel(label);\r\n                setOpen(false);\r\n              }}\r\n            >\r\n              {opt.label}\r\n            </SelectItem>\r\n          ))}\r\n        </SelectContent>\r\n      </div>\r\n    </Select>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;;;;AAEA;;;AAFA;;AAkBO,MAAM,SAAS,CAAC,EACrB,YAAY,EAAE,EACd,QAAQ,EAIT;IACC,qBAAO,6LAAC;QAAI,WAAW,CAAC,SAAS,EAAE,WAAW;kBAAG;;;;;;AACnD;KARa;AAUN,MAAM,gBAAgB,CAAC,EAC5B,YAAY,EAAE,EACd,KAAK,EACL,WAAW,EACX,OAAO,EAMR;IACC,qBACE,6LAAC;QACC,MAAK;QACL,SAAS;QACT,WAAW,CAAC,8CAA8C,EAAE,WAAW;kBAEtE,SAAS,eAAe;;;;;;AAG/B;MApBa;AAsBN,MAAM,gBAAgB,CAAC,EAC5B,YAAY,EAAE,EACd,QAAQ,EACR,IAAI,EAKL;IACC,IAAI,CAAC,MAAM,OAAO;IAClB,qBACE,6LAAC;QACC,WAAW,CAAC,wDAAwD,EAAE,WAAW;kBAEhF;;;;;;AAGP;MAjBa;AAmBN,MAAM,aAAa,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAmB;IACvE,qBACE,6LAAC;QACC,WAAU;QACV,SAAS,IAAM,SAAS,OAAO,UAAU,cAAc;QACvD,MAAK;kBAEJ;;;;;;AAGP;MAVa;AAaN,MAAM,eAAe,CAAC,EAC3B,OAAO,EACP,cAAc,WAAW,EACzB,KAAK,EACL,QAAQ,EACR,SAAS,EAOV;;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAC/C,QAAQ,IAAI;iCAAC,CAAC,MAAQ,IAAI,KAAK,KAAK;iCAAQ;IAG9C,MAAM,aAAa,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAkB;IAE1C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,MAAM;6DAAqB,CAAC;oBAC1B,IACE,WAAW,OAAO,IAClB,CAAC,WAAW,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GACzC;wBACA,QAAQ;oBACV;gBACF;;YACA,SAAS,gBAAgB,CAAC,aAAa;YACvC;0CAAO,IAAM,SAAS,mBAAmB,CAAC,aAAa;;QACzD;iCAAG,EAAE;IAEL,qBACE,6LAAC;QAAO,WAAW;kBACjB,cAAA,6LAAC;YAAI,KAAK;;8BACR,6LAAC;oBACC,OAAO;oBACP,aAAa;oBACb,SAAS,IAAM,QAAQ,CAAC;;;;;;8BAE1B,6LAAC;oBAAc,MAAM;8BAClB,QAAQ,GAAG,CAAC,CAAC,oBACZ,6LAAC;4BAEC,OAAO,IAAI,KAAK;4BAChB,UAAU,CAAC,KAAK;gCACd,SAAS;gCACT,iBAAiB;gCACjB,QAAQ;4BACV;sCAEC,IAAI,KAAK;2BARL,IAAI,KAAK;;;;;;;;;;;;;;;;;;;;;AAe5B;GA3Da;MAAA","debugId":null}},
    {"offset": {"line": 4072, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/lib/formConfigurations/formConfigurationTypes.ts"],"sourcesContent":["export type FormFieldType =\r\n  | 'text'\r\n  | 'number'\r\n  | 'select'\r\n  | 'checkbox'\r\n  | 'date'\r\n  | 'textarea'\r\n  | 'upload'; // H·ªó tr·ª£ upload CCCD\r\n\r\nexport interface FormField {\r\n  key: string;\r\n  label: string;\r\n  type: FormFieldType;\r\n  required: boolean;\r\n  visible: boolean;\r\n  options?: string[]; // for select\r\n  conditional?: {\r\n    dependsOn: string;\r\n    valueEquals: string | number | boolean;\r\n  };\r\n}\r\n\r\nexport interface FormSection {\r\n  id: string;\r\n  title: string;\r\n  fields: FormField[];\r\n}\r\n\r\nexport interface FormConfiguration {\r\n  id?: string; // Firestore document ID\r\n  companyId: string;\r\n  createdBy: string;\r\n  sections: FormSection[];\r\n  createdAt?: any; // Timestamp | Date\r\n  updatedAt?: any;\r\n}\r\n\r\n// ‚öôÔ∏è Default c·∫•u h√¨nh ƒë·ªÉ tr√°nh l·ªói khi DynamicRentalForm ch∆∞a c√≥ config\r\nexport const defaultFormConfiguration: FormConfiguration = {\r\n  companyId: '',\r\n  createdBy: '',\r\n  sections: [\r\n    {\r\n      id: 'customer_information',\r\n      title: '1. CUSTOMER INFORMATION',\r\n      fields: [\r\n        { key: 'idImage', label: 'Upload ID', type: 'upload', required: false, visible: true },\r\n        { key: 'fullName', label: 'Full Name', type: 'text', required: true, visible: true },\r\n        { key: 'phone', label: 'Phone Number', type: 'text', required: true, visible: true },\r\n        { key: 'idNumber', label: 'ID Number', type: 'text', required: true, visible: true },\r\n        { key: 'address', label: 'Address', type: 'text', required: false, visible: true },\r\n      ],\r\n    },\r\n    {\r\n      id: 'vehicle_information',\r\n      title: '2. VEHICLE INFORMATION',\r\n      fields: [\r\n        { key: 'vehicleSearch', label: 'Enter part of Vehicle ID', type: 'text', required: false, visible: true },\r\n        { key: 'vehicleModel', label: 'Vehicle Model', type: 'text', required: true, visible: true },\r\n        { key: 'vehicleColor', label: 'Vehicle Color', type: 'text', required: false, visible: true },\r\n        { key: 'vin', label: 'VIN', type: 'text', required: false, visible: true },\r\n        { key: 'licensePlate', label: 'License Plate (optional)', type: 'text', required: false, visible: true },\r\n      ],\r\n    },\r\n    {\r\n      id: 'battery_information',\r\n      title: '3. BATTERY INFORMATION',\r\n      fields: [\r\n        { key: 'batteryCode1', label: 'Battery Code 1', type: 'text', required: false, visible: true },\r\n        { key: 'batteryCode2', label: 'Battery Code 2', type: 'text', required: false, visible: true },\r\n        { key: 'batteryCode3', label: 'Battery Code 3', type: 'text', required: false, visible: true },\r\n        { key: 'batteryCode4', label: 'Battery Code 4', type: 'text', required: false, visible: true },\r\n      ],\r\n    },\r\n    {\r\n      id: 'pricing_deposit',\r\n      title: '4. PRICING & DEPOSIT',\r\n      fields: [\r\n        { key: 'package', label: 'Rental Package', type: 'select', required: true, visible: true },\r\n        { key: 'basePrice', label: 'Base Price (VND)', type: 'number', required: false, visible: true },\r\n        { key: 'batteryFee', label: 'Battery Rental Fee', type: 'number', required: false, visible: true },\r\n        { key: 'totalAmount', label: 'Total Amount', type: 'number', required: false, visible: true },\r\n        { key: 'deposit', label: 'Deposit', type: 'number', required: false, visible: true },\r\n        { key: 'remainingBalance', label: 'Remaining Balance', type: 'number', required: false, visible: true },\r\n      ],\r\n    },\r\n    {\r\n      id: 'accessories_info',\r\n      title: '5. ACCESSORIES INFO',\r\n      fields: [\r\n        { key: 'helmet', label: 'Helmet Included', type: 'checkbox', required: false, visible: true },\r\n        { key: 'charger', label: 'Charger Included', type: 'checkbox', required: false, visible: true },\r\n        { key: 'phoneHolder', label: 'Phone Holder', type: 'checkbox', required: false, visible: true },\r\n        { key: 'rearRack', label: 'Rear Carrier Rack', type: 'checkbox', required: false, visible: true },\r\n        { key: 'raincoat', label: 'Raincoat Included', type: 'checkbox', required: false, visible: true },\r\n      ],\r\n    },\r\n    {\r\n      id: 'notes',\r\n      title: '6. NOTES',\r\n      fields: [\r\n        { key: 'note', label: 'Additional Notes', type: 'textarea', required: false, visible: true },\r\n      ],\r\n    },\r\n  ],\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4308, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/lib/services/Configirations/formConfigurationService.ts"],"sourcesContent":["import {\r\n    FormConfiguration,\r\n    defaultFormConfiguration,\r\n  } from '@/src/lib/formConfigurations/formConfigurationTypes';\r\n  import {\r\n    getDoc,\r\n    setDoc,\r\n    doc,\r\n    serverTimestamp,\r\n    updateDoc,\r\n  } from 'firebase/firestore';\r\n  import { db } from '@/src/firebaseConfig';\r\n  \r\n  /**\r\n   * L·∫•y c·∫•u h√¨nh form theo companyId.\r\n   * N·∫øu kh√¥ng t·ªìn t·∫°i th√¨ tr·∫£ v·ªÅ c·∫•u h√¨nh m·∫∑c ƒë·ªãnh.\r\n   */\r\n  export const getFormConfigurationByCompanyId = async (\r\n    companyId: string\r\n  ): Promise<FormConfiguration> => {\r\n    const docRef = doc(db, 'formConfigurations', companyId);\r\n    const snapshot = await getDoc(docRef);\r\n  \r\n    if (snapshot.exists()) {\r\n      return {\r\n        id: snapshot.id,\r\n        ...snapshot.data(),\r\n      } as FormConfiguration;\r\n    } else {\r\n      return {\r\n        ...defaultFormConfiguration,\r\n        companyId,\r\n      };\r\n    }\r\n  };\r\n  \r\n  /**\r\n   * L∆∞u c·∫•u h√¨nh form (t·∫°o m·ªõi ho·∫∑c c·∫≠p nh·∫≠t).\r\n   * @param config FormConfiguration\r\n   */\r\n  export const saveFormConfiguration = async (\r\n    config: FormConfiguration\r\n  ): Promise<void> => {\r\n    const docRef = doc(db, 'formConfigurations', config.companyId);\r\n    const dataToSave = {\r\n      ...config,\r\n      updatedAt: serverTimestamp(),\r\n    };\r\n  \r\n    if (config.id) {\r\n      // C·∫≠p nh·∫≠t (update)\r\n      await updateDoc(docRef, dataToSave);\r\n    } else {\r\n      // T·∫°o m·ªõi\r\n      await setDoc(docRef, {\r\n        ...dataToSave,\r\n        createdAt: serverTimestamp(),\r\n      });\r\n    }\r\n  };\r\n  "],"names":[],"mappings":";;;;AAAA;AAIE;AAAA;AAOA;AAAA;;;;AAMO,MAAM,kCAAkC,OAC7C;IAEA,MAAM,SAAS,CAAA,GAAA,sKAAA,CAAA,MAAG,AAAD,EAAE,wIAAA,CAAA,KAAE,EAAE,sBAAsB;IAC7C,MAAM,WAAW,MAAM,CAAA,GAAA,sKAAA,CAAA,SAAM,AAAD,EAAE;IAE9B,IAAI,SAAS,MAAM,IAAI;QACrB,OAAO;YACL,IAAI,SAAS,EAAE;YACf,GAAG,SAAS,IAAI,EAAE;QACpB;IACF,OAAO;QACL,OAAO;YACL,GAAG,6JAAA,CAAA,2BAAwB;YAC3B;QACF;IACF;AACF;AAMO,MAAM,wBAAwB,OACnC;IAEA,MAAM,SAAS,CAAA,GAAA,sKAAA,CAAA,MAAG,AAAD,EAAE,wIAAA,CAAA,KAAE,EAAE,sBAAsB,OAAO,SAAS;IAC7D,MAAM,aAAa;QACjB,GAAG,MAAM;QACT,WAAW,CAAA,GAAA,sKAAA,CAAA,kBAAe,AAAD;IAC3B;IAEA,IAAI,OAAO,EAAE,EAAE;QACb,oBAAoB;QACpB,MAAM,CAAA,GAAA,sKAAA,CAAA,YAAS,AAAD,EAAE,QAAQ;IAC1B,OAAO;QACL,UAAU;QACV,MAAM,CAAA,GAAA,sKAAA,CAAA,SAAM,AAAD,EAAE,QAAQ;YACnB,GAAG,UAAU;YACb,WAAW,CAAA,GAAA,sKAAA,CAAA,kBAAe,AAAD;QAC3B;IACF;AACF","debugId":null}},
    {"offset": {"line": 4361, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/rent/DynamicRentalForm.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { Input } from '@/src/components/ui/input';\r\nimport { Textarea } from '@/src/components/ui/textarea';\r\nimport { Checkbox } from '@/src/components/ui/checkbox';\r\nimport { Button } from '@/src/components/ui/button';\r\nimport { SimpleSelect } from '@/src/components/ui/select';\r\nimport { getFormConfigurationByCompanyId } from '@/src/lib/services/Configirations/formConfigurationService';\r\nimport { FormField, FormFieldType, FormConfiguration } from '@/src/lib/formConfigurations/formConfigurationTypes';\r\nimport { Timestamp, addDoc, collection } from 'firebase/firestore';\r\nimport { db } from '@/src/firebaseConfig';\r\n\r\ninterface Props {\r\n  companyId: string;\r\n  userId: string;\r\n}\r\n\r\nexport default function DynamicRentalForm({ companyId, userId }: Props) {\r\n  const [config, setConfig] = useState<FormConfiguration | null>(null);\r\n  const [formData, setFormData] = useState<Record<string, any>>({});\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetch = async () => {\r\n      const config = await getFormConfigurationByCompanyId(companyId);\r\n      setConfig(config);\r\n      setLoading(false);\r\n    };\r\n    fetch();\r\n  }, [companyId]);\r\n\r\n  const handleChange = (key: string, value: any) => {\r\n    setFormData((prev) => ({ ...prev, [key]: value }));\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      await addDoc(collection(db, 'rentalOrders'), {\r\n        ...formData,\r\n        companyId,\r\n        createdBy: userId,\r\n        createdAt: Timestamp.now(),\r\n      });\r\n      alert('üö≤ Booking submitted successfully!');\r\n    } catch (err) {\r\n      console.error('‚ùå Submit error:', err);\r\n      alert('Failed to submit booking');\r\n    }\r\n  };\r\n\r\n  if (loading || !config) return <div>Loading form...</div>;\r\n\r\n  const renderField = (field: FormField) => {\r\n    if (!field.visible) return null;\r\n\r\n    switch (field.type) {\r\n      case 'text':\r\n      case 'number':\r\n      case 'date':\r\n        return (\r\n          <Input\r\n            key={field.key}\r\n            type={field.type === 'text' ? 'text' : field.type === 'number' ? 'number' : 'date'}\r\n            placeholder={field.label}\r\n            value={formData[field.key] || ''}\r\n            onChange={(e) => handleChange(field.key, e.target.value)}\r\n          />\r\n        );\r\n      case 'textarea':\r\n        return (\r\n          <Textarea\r\n            key={field.key}\r\n            placeholder={field.label}\r\n            value={formData[field.key] || ''}\r\n            onChange={(e) => handleChange(field.key, e.target.value)}\r\n          />\r\n        );\r\n      case 'checkbox':\r\n        return (\r\n          <label key={field.key} className=\"flex items-center gap-2\">\r\n            <Checkbox\r\n              checked={!!formData[field.key]}\r\n              onCheckedChange={(val) => handleChange(field.key, Boolean(val))}\r\n            />\r\n            <span>{field.label}</span>\r\n          </label>\r\n        );\r\n      case 'select':\r\n        return (\r\n          <SimpleSelect\r\n            key={field.key}\r\n            options={(field.options || []).map((opt) => ({ label: opt, value: opt }))}\r\n            value={formData[field.key] || ''}\r\n            onChange={(val) => handleChange(field.key, val)}\r\n            placeholder={field.label}\r\n          />\r\n        );\r\n      case 'upload':\r\n        return (\r\n          <input\r\n            key={field.key}\r\n            type=\"file\"\r\n            onChange={(e) => handleChange(field.key, e.target.files?.[0])}\r\n          />\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {config.sections.map((section) => {\r\n        const visibleFields = section.fields.filter((field) => field.visible);\r\n        if (visibleFields.length === 0) return null;\r\n\r\n        return (\r\n          <div key={section.id} className=\"border rounded-lg p-4 bg-white\">\r\n            <h3 className=\"font-semibold text-lg mb-3\">{section.title}</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n              {visibleFields.map(renderField)}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n      <Button onClick={handleSubmit}>‚úÖ Confirm Booking</Button>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4572, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/app/rent/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useUser } from '@/src/context/AuthContext';\r\nimport Header from '@/src/components/landingpage/Header';\r\nimport Footer from '@/src/components/landingpage/Footer';\r\nimport RentBikeFormFactory from '@/src/components/rent/factory/RentBikeFormFactory';\r\nimport DynamicRentalForm from '@/src/components/rent/DynamicRentalForm';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport { useEffect, useState } from 'react';\r\nimport { db } from '@/src/firebaseConfig';\r\nimport { collection, query, where, getDocs, doc, getDoc } from 'firebase/firestore';\r\n\r\nexport default function RentPage() {\r\n  const { user, role, loading } = useUser();\r\n  const searchParams = useSearchParams();\r\n  const companyIdFromURL = searchParams?.get('companyId') ?? null;\r\n\r\n  const [finalCompanyId, setFinalCompanyId] = useState<string | null>(companyIdFromURL);\r\n  const [companyName, setCompanyName] = useState<string>('');\r\n\r\n  useEffect(() => {\r\n    const detectCompanyId = async () => {\r\n      if (companyIdFromURL) {\r\n        setFinalCompanyId(companyIdFromURL);\r\n        return;\r\n      }\r\n\r\n      if (!user?.uid || role !== 'staff') return;\r\n\r\n      const snap = await getDocs(query(collection(db, 'staffs'), where('userId', '==', user.uid)));\r\n      if (!snap.empty) {\r\n        // üîÑ N·∫øu nhi·ªÅu staff role, ∆∞u ti√™n l·∫•y c√°i ƒë·∫ßu ti√™n ho·∫∑c c√≥ th·ªÉ l·ªçc theo logic kh√°c n·∫øu c·∫ßn\r\n        const staffData = snap.docs[0].data();\r\n        setFinalCompanyId(staffData.companyId || null);\r\n      }\r\n    };\r\n\r\n    detectCompanyId();\r\n  }, [user?.uid, companyIdFromURL, role]);\r\n\r\n  useEffect(() => {\r\n    const fetchCompanyName = async () => {\r\n      if (!finalCompanyId) return;\r\n      const snap = await getDoc(doc(db, 'rentalCompanies', finalCompanyId));\r\n      if (snap.exists()) setCompanyName(snap.data().name || '');\r\n    };\r\n    fetchCompanyName();\r\n  }, [finalCompanyId]);\r\n\r\n  if (loading) return <div className=\"text-center py-10\">Loading...</div>;\r\n  if (!user || !role) return <div className=\"text-center py-10\">Access denied</div>;\r\n  if (!finalCompanyId) return <div className=\"text-center py-10\">Missing companyId</div>;\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-gray-100\">\r\n      <Header />\r\n\r\n      <main className=\"flex-1 py-10\">\r\n        <div className=\"text-center text-gray-600 text-sm mb-4\">\r\n          <strong>üîê Current Role:</strong> {role} {companyName && <span className=\"ml-2\">at <strong>{companyName}</strong></span>}\r\n        </div>\r\n        {role === 'staff' ? (\r\n          <DynamicRentalForm companyId={finalCompanyId} userId={user.uid} />\r\n        ) : (\r\n          <RentBikeFormFactory role={role} />\r\n        )}\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;;;AAVA;;;;;;;;;;AAYe,SAAS;;IACtB,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,iIAAA,CAAA,UAAO,AAAD;IACtC,MAAM,eAAe,CAAA,GAAA,qIAAA,CAAA,kBAAe,AAAD;IACnC,MAAM,mBAAmB,cAAc,IAAI,gBAAgB;IAE3D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IACpE,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAU;IAEvD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;8BAAE;YACR,MAAM;sDAAkB;oBACtB,IAAI,kBAAkB;wBACpB,kBAAkB;wBAClB;oBACF;oBAEA,IAAI,CAAC,MAAM,OAAO,SAAS,SAAS;oBAEpC,MAAM,OAAO,MAAM,CAAA,GAAA,sKAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,sKAAA,CAAA,QAAK,AAAD,EAAE,CAAA,GAAA,sKAAA,CAAA,aAAU,AAAD,EAAE,wIAAA,CAAA,KAAE,EAAE,WAAW,CAAA,GAAA,sKAAA,CAAA,QAAK,AAAD,EAAE,UAAU,MAAM,KAAK,GAAG;oBACzF,IAAI,CAAC,KAAK,KAAK,EAAE;wBACf,4FAA4F;wBAC5F,MAAM,YAAY,KAAK,IAAI,CAAC,EAAE,CAAC,IAAI;wBACnC,kBAAkB,UAAU,SAAS,IAAI;oBAC3C;gBACF;;YAEA;QACF;6BAAG;QAAC,MAAM;QAAK;QAAkB;KAAK;IAEtC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;8BAAE;YACR,MAAM;uDAAmB;oBACvB,IAAI,CAAC,gBAAgB;oBACrB,MAAM,OAAO,MAAM,CAAA,GAAA,sKAAA,CAAA,SAAM,AAAD,EAAE,CAAA,GAAA,sKAAA,CAAA,MAAG,AAAD,EAAE,wIAAA,CAAA,KAAE,EAAE,mBAAmB;oBACrD,IAAI,KAAK,MAAM,IAAI,eAAe,KAAK,IAAI,GAAG,IAAI,IAAI;gBACxD;;YACA;QACF;6BAAG;QAAC;KAAe;IAEnB,IAAI,SAAS,qBAAO,6LAAC;QAAI,WAAU;kBAAoB;;;;;;IACvD,IAAI,CAAC,QAAQ,CAAC,MAAM,qBAAO,6LAAC;QAAI,WAAU;kBAAoB;;;;;;IAC9D,IAAI,CAAC,gBAAgB,qBAAO,6LAAC;QAAI,WAAU;kBAAoB;;;;;;IAE/D,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,8IAAA,CAAA,UAAM;;;;;0BAEP,6LAAC;gBAAK,WAAU;;kCACd,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;0CAAO;;;;;;4BAAyB;4BAAE;4BAAK;4BAAE,6BAAe,6LAAC;gCAAK,WAAU;;oCAAO;kDAAG,6LAAC;kDAAQ;;;;;;;;;;;;;;;;;;oBAE7F,SAAS,wBACR,6LAAC,kJAAA,CAAA,UAAiB;wBAAC,WAAW;wBAAgB,QAAQ,KAAK,GAAG;;;;;6CAE9D,6LAAC,+JAAA,CAAA,UAAmB;wBAAC,MAAM;;;;;;;;;;;;0BAI/B,6LAAC,8IAAA,CAAA,UAAM;;;;;;;;;;;AAGb;GA3DwB;;QACU,iIAAA,CAAA,UAAO;QAClB,qIAAA,CAAA,kBAAe;;;KAFd","debugId":null}}]
}