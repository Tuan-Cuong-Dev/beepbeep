{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/hooks/useSubscriptionPackageData.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { db } from '@/src/firebaseConfig';\r\nimport { \r\n  collection, \r\n  addDoc, \r\n  updateDoc, \r\n  deleteDoc, \r\n  getDocs, \r\n  doc, \r\n  query, \r\n  where, \r\n  serverTimestamp \r\n} from 'firebase/firestore';\r\nimport { SubscriptionPackage } from '@/src/lib/subscriptionPackages/subscriptionPackagesType';\r\n\r\nexport function useSubscriptionPackageData(companyId: string) {\r\n  const [packages, setPackages] = useState<SubscriptionPackage[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchPackages = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const q = query(collection(db, 'subscriptionPackages'), where('companyId', '==', companyId));\r\n      const querySnapshot = await getDocs(q);\r\n      const data = querySnapshot.docs.map(docSnap => ({\r\n        id: docSnap.id,\r\n        ...docSnap.data()\r\n      })) as SubscriptionPackage[];\r\n      setPackages(data);\r\n    } catch (err) {\r\n      console.error('❌ Failed to fetch subscription packages:', err);\r\n      setError('Failed to load packages.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const createPackage = async (pkg: Omit<SubscriptionPackage, 'id' | 'createdAt' | 'updatedAt'>) => {\r\n    try {\r\n      const docRef = await addDoc(collection(db, 'subscriptionPackages'), {\r\n        ...pkg,\r\n        createdAt: serverTimestamp(),\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n      setPackages(prev => [...prev, { ...pkg, id: docRef.id, createdAt: new Date(), updatedAt: new Date() }]);\r\n    } catch (err) {\r\n      console.error('❌ Failed to create subscription package:', err);\r\n      setError('Failed to create package.');\r\n    }\r\n  };\r\n\r\n  const updatePackage = async (id: string, pkg: Partial<SubscriptionPackage>) => {\r\n    try {\r\n      const docRef = doc(db, 'subscriptionPackages', id);\r\n      await updateDoc(docRef, {\r\n        ...pkg,\r\n        updatedAt: serverTimestamp(),\r\n      });\r\n      setPackages(prev =>\r\n        prev.map(p => (p.id === id ? { ...p, ...pkg, updatedAt: new Date() } : p))\r\n      );\r\n    } catch (err) {\r\n      console.error('❌ Failed to update subscription package:', err);\r\n      setError('Failed to update package.');\r\n    }\r\n  };\r\n\r\n  const deletePackage = async (id: string) => {\r\n    try {\r\n      const docRef = doc(db, 'subscriptionPackages', id);\r\n      await deleteDoc(docRef);\r\n      setPackages(prev => prev.filter(p => p.id !== id));\r\n    } catch (err) {\r\n      console.error('❌ Failed to delete subscription package:', err);\r\n      setError('Failed to delete package.');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (companyId) {\r\n      fetchPackages();\r\n    }\r\n  }, [companyId]);\r\n\r\n  return {\r\n    packages,\r\n    loading,\r\n    error,\r\n    fetchPackages,\r\n    createPackage,\r\n    updatePackage,\r\n    deletePackage,\r\n  };\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/ui/button.tsx"],"sourcesContent":["import { ReactNode } from 'react';\r\n\r\ntype ButtonVariant =\r\n  | 'default'\r\n  | 'ghost'\r\n  | 'outline'\r\n  | 'secondary'\r\n  | 'danger'\r\n  | 'greenOutline'\r\n  | 'destructive';\r\n\r\ninterface ButtonProps {\r\n  className?: string;\r\n  children: ReactNode;\r\n  onClick?: () => void;\r\n  type?: 'button' | 'submit' | 'reset';\r\n  variant?: ButtonVariant;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport const Button = ({\r\n  className = '',\r\n  children,\r\n  onClick,\r\n  type = 'button',\r\n  variant = 'default',\r\n  disabled = false,\r\n}: ButtonProps) => {\r\n  const baseClass =\r\n    'inline-flex items-center justify-center px-4 py-2 font-semibold rounded-md transition-all text-sm';\r\n\r\n  const variantClass: Record<ButtonVariant, string> = {\r\n    default: 'bg-[#00d289] text-white border border-[#00d289] hover:bg-[#00b67a]',\r\n    ghost: 'bg-transparent text-[#00d289] border border-transparent hover:bg-[#e6fff5]',\r\n    outline: 'bg-white text-[#00d289] border border-[#00d289] hover:bg-[#f0fdf8]',\r\n    secondary: 'bg-gray-100 text-gray-800 border border-gray-300 hover:bg-gray-200',\r\n    danger: 'bg-red-500 text-white border border-red-500 hover:bg-red-600',\r\n    greenOutline: 'bg-transparent text-[#00d289] border border-[#00d289] hover:bg-[#00d289]/10',\r\n    destructive: 'bg-white text-red-600 border border-red-500 hover:bg-red-50',\r\n  };\r\n\r\n  const disabledClass = disabled ? 'opacity-50 pointer-events-none cursor-not-allowed' : '';\r\n\r\n  return (\r\n    <button\r\n      type={type}\r\n      disabled={disabled}\r\n      className={`${baseClass} ${variantClass[variant]} ${disabledClass} ${className}`}\r\n      onClick={onClick}\r\n    >\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAoBO,MAAM,SAAS,CAAC,EACrB,YAAY,EAAE,EACd,QAAQ,EACR,OAAO,EACP,OAAO,QAAQ,EACf,UAAU,SAAS,EACnB,WAAW,KAAK,EACJ;IACZ,MAAM,YACJ;IAEF,MAAM,eAA8C;QAClD,SAAS;QACT,OAAO;QACP,SAAS;QACT,WAAW;QACX,QAAQ;QACR,cAAc;QACd,aAAa;IACf;IAEA,MAAM,gBAAgB,WAAW,sDAAsD;IAEvF,qBACE,6LAAC;QACC,MAAM;QACN,UAAU;QACV,WAAW,GAAG,UAAU,CAAC,EAAE,YAAY,CAAC,QAAQ,CAAC,CAAC,EAAE,cAAc,CAAC,EAAE,WAAW;QAChF,SAAS;kBAER;;;;;;AAGP;KAjCa","debugId":null}},
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/app/subscriptionPackages/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useSubscriptionPackageData } from '@/src/hooks/useSubscriptionPackageData';\r\nimport SubscriptionPackageTable from '@/src/components/subscription-packages/SubscriptionPackageTable';\r\nimport SubscriptionPackageForm from '@/src/components/subscription-packages/SubscriptionPackageForm';\r\nimport { Button } from '@/src/components/ui/button';\r\nimport { SubscriptionPackage } from '@/src/lib/subscriptionPackages/subscriptionPackagesType';\r\n\r\ninterface Props {\r\n  companyId: string; // Truyền vào ID công ty đang quản lý\r\n}\r\n\r\nexport default function SubscriptionPackageManagerPage({ companyId }: Props) {\r\n  const {\r\n    packages,\r\n    loading,\r\n    error,\r\n    createPackage,\r\n    updatePackage,\r\n    deletePackage,\r\n  } = useSubscriptionPackageData(companyId);\r\n\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [editingPackage, setEditingPackage] = useState<SubscriptionPackage | null>(null);\r\n\r\n  const handleAddNew = () => {\r\n    setEditingPackage(null);\r\n    setShowForm(true);\r\n  };\r\n\r\n  const handleEdit = (pkg: SubscriptionPackage) => {\r\n    setEditingPackage(pkg);\r\n    setShowForm(true);\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    if (confirm('Are you sure you want to delete this package?')) {\r\n      await deletePackage(id);\r\n    }\r\n  };\r\n\r\n  const handleSave = async (data: Omit<SubscriptionPackage, 'id' | 'createdAt' | 'updatedAt'>) => {\r\n    if (editingPackage) {\r\n      await updatePackage(editingPackage.id!, data);\r\n    } else {\r\n      await createPackage({ ...data, companyId });\r\n    }\r\n    setShowForm(false);\r\n    setEditingPackage(null);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setShowForm(false);\r\n    setEditingPackage(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h1 className=\"text-2xl font-bold mb-6\">Manage Subscription Packages</h1>\r\n\r\n      {!showForm && (\r\n        <>\r\n          <div className=\"flex justify-end mb-4\">\r\n            <Button onClick={handleAddNew}>Add New Package</Button>\r\n          </div>\r\n\r\n          {loading ? (\r\n            <div>Loading...</div>\r\n          ) : error ? (\r\n            <div className=\"text-red-500\">{error}</div>\r\n          ) : (\r\n            <SubscriptionPackageTable \r\n              packages={packages}\r\n              onEdit={handleEdit}\r\n              onDelete={handleDelete}\r\n            />\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {showForm && (\r\n        <SubscriptionPackageForm\r\n          initialData={editingPackage || undefined}\r\n          onSave={handleSave}\r\n          onCancel={handleCancel}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;;;;;;;;;;;AAGA;;;AANA;;;;;;AAae,SAAS,+BAA+B,EAAE,SAAS,EAAS;;IACzE,MAAM,EACJ,QAAQ,EACR,OAAO,EACP,KAAK,EACL,aAAa,EACb,aAAa,EACb,aAAa,EACd,GAAG,CAAA,GAAA,6IAAA,CAAA,6BAA0B,AAAD,EAAE;IAE/B,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAA8B;IAEjF,MAAM,eAAe;QACnB,kBAAkB;QAClB,YAAY;IACd;IAEA,MAAM,aAAa,CAAC;QAClB,kBAAkB;QAClB,YAAY;IACd;IAEA,MAAM,eAAe,OAAO;QAC1B,IAAI,QAAQ,kDAAkD;YAC5D,MAAM,cAAc;QACtB;IACF;IAEA,MAAM,aAAa,OAAO;QACxB,IAAI,gBAAgB;YAClB,MAAM,cAAc,eAAe,EAAE,EAAG;QAC1C,OAAO;YACL,MAAM,cAAc;gBAAE,GAAG,IAAI;gBAAE;YAAU;QAC3C;QACA,YAAY;QACZ,kBAAkB;IACpB;IAEA,MAAM,eAAe;QACnB,YAAY;QACZ,kBAAkB;IACpB;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA0B;;;;;;YAEvC,CAAC,0BACA;;kCACE,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,qIAAA,CAAA,SAAM;4BAAC,SAAS;sCAAc;;;;;;;;;;;oBAGhC,wBACC,6LAAC;kCAAI;;;;;+BACH,sBACF,6LAAC;wBAAI,WAAU;kCAAgB;;;;;6CAE/B,6LAAC;wBACC,UAAU;wBACV,QAAQ;wBACR,UAAU;;;;;;;;YAMjB,0BACC,6LAAC;gBACC,aAAa,kBAAkB;gBAC/B,QAAQ;gBACR,UAAU;;;;;;;;;;;;AAKpB;GA7EwB;;QAQlB,6IAAA,CAAA,6BAA0B;;;KARR","debugId":null}}]
}