{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/hooks/useBookingData.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport {\r\n  collection,\r\n  getDocs,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  doc,\r\n  serverTimestamp,\r\n  Timestamp,\r\n  query,\r\n  where,\r\n  Query,\r\n  DocumentData,\r\n} from 'firebase/firestore';\r\nimport { db } from '@/src/firebaseConfig';\r\nimport { Booking } from '@/src/lib/booking/BookingTypes';\r\nimport { SubscriptionPackage } from '@/src/lib/subscriptionPackages/subscriptionPackagesType';\r\nimport { Ebike } from '@/src/lib/ebikes/ebikeTypes';\r\n\r\nexport function useBookingData(filters?: { startDate?: string; endDate?: string }) {\r\n  const [bookings, setBookings] = useState<Booking[]>([]);\r\n  const [stationNames, setStationNames] = useState<Record<string, string>>({});\r\n  const [companyNames, setCompanyNames] = useState<Record<string, string>>({});\r\n  const [packageNames, setPackageNames] = useState<Record<string, string>>({});\r\n  const [packages, setPackages] = useState<SubscriptionPackage[]>([]);\r\n  const [ebikes, setEbikes] = useState<Ebike[]>([]);\r\n  const [userNames, setUserNames] = useState<Record<string, string>>({});\r\n  const [editingBooking, setEditingBooking] = useState<Booking | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchAllData(filters);\r\n  }, [filters]);\r\n\r\n  const fetchAllData = async (filters?: { startDate?: string; endDate?: string }) => {\r\n    setLoading(true);\r\n    try {\r\n      await Promise.all([\r\n        fetchBookings(filters),\r\n        fetchStations(),\r\n        fetchCompanies(),\r\n        fetchPackages(),\r\n        fetchUsers(),\r\n        fetchPackageList(),\r\n        fetchEbikeList(),\r\n      ]);\r\n    } catch (error) {\r\n      console.error('❌ Error loading booking-related data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchBookings = async (filters?: { startDate?: string; endDate?: string }) => {\r\n    const bookingRef = collection(db, 'bookings');\r\n    let bookingQuery: Query<DocumentData> = bookingRef;\r\n\r\n    if (filters?.startDate || filters?.endDate) {\r\n      const conditions = [];\r\n\r\n      if (filters.startDate) {\r\n        const start = Timestamp.fromDate(new Date(filters.startDate + 'T00:00:00'));\r\n        conditions.push(where('createdAt', '>=', start));\r\n      }\r\n\r\n      if (filters.endDate) {\r\n        const end = Timestamp.fromDate(new Date(filters.endDate + 'T23:59:59'));\r\n        conditions.push(where('createdAt', '<=', end));\r\n      }\r\n\r\n      bookingQuery = query(bookingRef, ...conditions);\r\n    }\r\n\r\n    const snap = await getDocs(bookingQuery);\r\n\r\n    const toTimestamp = (val: any): Timestamp => {\r\n      if (val instanceof Timestamp) return val;\r\n      if (val?.toDate) return Timestamp.fromDate(val.toDate());\r\n      if (val instanceof Date) return Timestamp.fromDate(val);\r\n      if (typeof val === 'string' || typeof val === 'number') return Timestamp.fromDate(new Date(val));\r\n      return Timestamp.now();\r\n    };\r\n\r\n    const list: Booking[] = snap.docs.map((docSnap) => {\r\n      const data = docSnap.data();\r\n      return {\r\n        id: docSnap.id,\r\n        companyId: String(data.companyId ?? ''),\r\n        stationId: String(data.stationId ?? ''),\r\n        userId: data.userId ? String(data.userId) : undefined,\r\n        idImage: data.idImage ? String(data.idImage) : undefined,\r\n        fullName: String(data.fullName ?? ''),\r\n        channel: data.channel ? String(data.channel) : undefined,\r\n        phone: String(data.phone ?? ''),\r\n        idNumber: String(data.idNumber ?? ''),\r\n        address: String(data.address ?? ''),\r\n        vehicleSearch: data.vehicleSearch ? String(data.vehicleSearch) : undefined,\r\n        vehicleModel: String(data.vehicleModel ?? ''),\r\n        vehicleColor: String(data.vehicleColor ?? ''),\r\n        vin: String(data.vin ?? ''),\r\n        licensePlate: data.licensePlate ? String(data.licensePlate) : undefined,\r\n        batteryCode1: data.batteryCode1 ? String(data.batteryCode1) : undefined,\r\n        batteryCode2: data.batteryCode2 ? String(data.batteryCode2) : undefined,\r\n        batteryCode3: data.batteryCode3 ? String(data.batteryCode3) : undefined,\r\n        batteryCode4: data.batteryCode4 ? String(data.batteryCode4) : undefined,\r\n\r\n        rentalStartDate: toTimestamp(data.rentalStartDate),\r\n        rentalStartHour: String(data.rentalStartHour ?? '08:00'),\r\n        rentalDays: Number(data.rentalDays ?? 1),\r\n        rentalEndDate: toTimestamp(data.rentalEndDate),\r\n\r\n        package: data.package ? String(data.package) : undefined,\r\n        basePrice: Number(data.basePrice ?? 0),\r\n        batteryFee: data.batteryFee ? Number(data.batteryFee) : undefined,\r\n        totalAmount: Number(data.totalAmount ?? 0),\r\n        deposit: Number(data.deposit ?? 0),\r\n        remainingBalance: Number(data.remainingBalance ?? 0),\r\n\r\n        deliveryMethod: data.deliveryMethod === 'Deliver to Address' ? 'Deliver to Address' : 'Pickup at Shop',\r\n        deliveryAddress: data.deliveryAddress ? String(data.deliveryAddress) : undefined,\r\n\r\n        helmet: Boolean(data.helmet ?? false),\r\n        charger: Boolean(data.charger ?? false),\r\n        phoneHolder: Boolean(data.phoneHolder ?? false),\r\n        rearRack: Boolean(data.rearRack ?? false),\r\n        raincoat: Boolean(data.raincoat ?? false),\r\n        note: data.note ? String(data.note) : undefined,\r\n\r\n        bookingStatus: (data.bookingStatus as 'draft' | 'confirmed' | 'returned' | 'completed' | 'cancelled') ?? 'draft',\r\n        statusComment: data.statusComment ?? '', \r\n        createdAt: toTimestamp(data.createdAt),\r\n        updatedAt: toTimestamp(data.updatedAt),\r\n      };\r\n    });\r\n\r\n    setBookings(list);\r\n  };\r\n\r\n  const fetchStations = async () => {\r\n    const snap = await getDocs(collection(db, 'rentalStations'));\r\n    const map: Record<string, string> = {};\r\n    snap.docs.forEach((docSnap) => {\r\n      const data = docSnap.data();\r\n      map[docSnap.id] = data.name || 'Unnamed Station';\r\n    });\r\n    setStationNames(map);\r\n  };\r\n\r\n  const fetchCompanies = async () => {\r\n    const snap = await getDocs(collection(db, 'rentalCompanies'));\r\n    const map: Record<string, string> = {};\r\n    snap.docs.forEach((docSnap) => {\r\n      const data = docSnap.data();\r\n      map[docSnap.id] = data.name || 'Unnamed Company';\r\n    });\r\n    setCompanyNames(map);\r\n  };\r\n\r\n  const fetchPackages = async () => {\r\n    const snap = await getDocs(collection(db, 'subscriptionPackages'));\r\n    const map: Record<string, string> = {};\r\n    snap.docs.forEach((docSnap) => {\r\n      const data = docSnap.data();\r\n      map[docSnap.id] = data.name || 'Unnamed Package';\r\n    });\r\n    setPackageNames(map);\r\n  };\r\n\r\n  const fetchUsers = async () => {\r\n    const snap = await getDocs(collection(db, 'users'));\r\n    const map: Record<string, string> = {};\r\n    snap.docs.forEach((docSnap) => {\r\n      const data = docSnap.data();\r\n      map[docSnap.id] = data.name || 'Unnamed User';\r\n    });\r\n    setUserNames(map);\r\n  };\r\n\r\n  const fetchEbikeList = async () => {\r\n    const snap = await getDocs(collection(db, 'ebikes'));\r\n    const list: Ebike[] = snap.docs.map((docSnap) => ({\r\n      ...(docSnap.data() as Ebike),\r\n      id: docSnap.id,\r\n    }));\r\n    setEbikes(list);\r\n  };\r\n\r\n  const fetchPackageList = async () => {\r\n    const snap = await getDocs(collection(db, 'subscriptionPackages'));\r\n    const list: SubscriptionPackage[] = snap.docs.map((docSnap) => ({\r\n      id: docSnap.id,\r\n      ...(docSnap.data() as SubscriptionPackage),\r\n    }));\r\n    setPackages(list);\r\n  };\r\n\r\n  const saveBooking = async (data: Omit<Booking, 'id' | 'createdAt' | 'updatedAt'>) => {\r\n    try {\r\n      if (editingBooking) {\r\n        const bookingRef = doc(db, 'bookings', editingBooking.id);\r\n        await updateDoc(bookingRef, {\r\n          ...data,\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n        setBookings((prev) =>\r\n          prev.map((b) =>\r\n            b.id === editingBooking.id ? { ...b, ...data, updatedAt: Timestamp.now() } : b\r\n          )\r\n        );\r\n        setEditingBooking(null);\r\n      } else {\r\n        const newDoc = await addDoc(collection(db, 'bookings'), {\r\n          ...data,\r\n          createdAt: serverTimestamp(),\r\n          updatedAt: serverTimestamp(),\r\n        });\r\n        setBookings((prev) => [\r\n          ...prev,\r\n          {\r\n            id: newDoc.id,\r\n            ...data,\r\n            createdAt: Timestamp.now(),\r\n            updatedAt: Timestamp.now(),\r\n          },\r\n        ]);\r\n      }\r\n    } catch (error) {\r\n      console.error('❌ Error saving booking:', error);\r\n    }\r\n  };\r\n\r\n  const deleteBooking = async (id: string) => {\r\n    try {\r\n      await deleteDoc(doc(db, 'bookings', id));\r\n      setBookings((prev) => prev.filter((b) => b.id !== id));\r\n    } catch (error) {\r\n      console.error('❌ Error deleting booking:', error);\r\n    }\r\n  };\r\n\r\n  return {\r\n    bookings,\r\n    stationNames,\r\n    companyNames,\r\n    packageNames,\r\n    userNames,\r\n    packages,\r\n    ebikes,\r\n    editingBooking,\r\n    setEditingBooking,\r\n    saveBooking,\r\n    deleteBooking,\r\n    loading,\r\n  };\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 262, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/landingpage/Preferences.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { X } from 'lucide-react';\r\n\r\ninterface PreferencesProps {\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function Preferences({ onClose }: PreferencesProps) {\r\n  const [activeTab, setActiveTab] = useState('region');\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-2xl p-6 w-full max-w-xl shadow-lg relative\">\r\n        {/* Close Button */}\r\n        <button\r\n          className=\"absolute top-4 right-4 text-gray-500 hover:text-black\"\r\n          onClick={onClose}\r\n        >\r\n          <X size={24} />\r\n        </button>\r\n\r\n        {/* Header */}\r\n        <h2 className=\"text-2xl font-bold mb-4\">Preferences</h2>\r\n\r\n        {/* Tabs */}\r\n        <div className=\"flex space-x-4 border-b mb-4\">\r\n          <button\r\n            className={`pb-2 ${activeTab === 'region' ? 'border-b-2 border-black font-medium' : 'text-gray-500'}`}\r\n            onClick={() => setActiveTab('region')}\r\n          >\r\n            Region & Language\r\n          </button>\r\n          <button\r\n            className={`pb-2 ${activeTab === 'currency' ? 'border-b-2 border-black font-medium' : 'text-gray-500'}`}\r\n            onClick={() => setActiveTab('currency')}\r\n          >\r\n            Currency\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        {activeTab === 'region' ? (\r\n          <div>\r\n            <h3 className=\"text-lg font-medium mb-2\">Select Region | Language</h3>\r\n            <div className=\"text-sm grid grid-cols-4 gap-3\">\r\n              {[\r\n                'Vietnam 🇻🇳',\r\n                'English (UK) 🇬🇧',\r\n                'Japan 🇯🇵',\r\n                'China 🇨🇳',\r\n                'South Korea 🇰🇷',\r\n                'Russia 🇷🇺',\r\n                'France 🇫🇷',\r\n                'Germany 🇩🇪',\r\n                'Italy 🇮🇹',\r\n                'Spain 🇪🇸',\r\n                'Portugal 🇵🇹',\r\n                'Saudi Arabia 🇸🇦',\r\n              ].map((region) => (\r\n                <button\r\n                  key={region}\r\n                  className=\"p-2 rounded-lg border hover:bg-[#00d289] transition \"\r\n                >\r\n                  {region}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <h3 className=\"text-lg font-medium mb-2\">Select Currency</h3>\r\n            <div className=\"text-sm grid grid-cols-4 gap-4\">\r\n              {[\r\n                'VND (Vietnamese Dong)',\r\n                'GBP (British Pound Sterling)',\r\n                'JPY (Japanese Yen)',\r\n                'CNY (Chinese Yuan)',\r\n                'KRW (South Korean Won)',\r\n                'RUB (Russian Ruble)',\r\n                'EUR (Euro)',\r\n                'SAR (Saudi Riyal)',\r\n              ].map((currency) => (\r\n                <button\r\n                  key={currency}\r\n                  className=\"p-2 rounded-lg border hover:bg-[#00d289] transition \"\r\n                >\r\n                  {currency}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Footer */}\r\n        <p className=\"text-sm text-gray-500 mt-4\">\r\n          All preference changes are optional and will be saved for your session.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAMe,SAAS,YAAY,EAAE,OAAO,EAAoB;IAC/D,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBACC,WAAU;oBACV,SAAS;8BAET,cAAA,8OAAC,4LAAA,CAAA,IAAC;wBAAC,MAAM;;;;;;;;;;;8BAIX,8OAAC;oBAAG,WAAU;8BAA0B;;;;;;8BAGxC,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,WAAW,CAAC,KAAK,EAAE,cAAc,WAAW,wCAAwC,iBAAiB;4BACrG,SAAS,IAAM,aAAa;sCAC7B;;;;;;sCAGD,8OAAC;4BACC,WAAW,CAAC,KAAK,EAAE,cAAc,aAAa,wCAAwC,iBAAiB;4BACvG,SAAS,IAAM,aAAa;sCAC7B;;;;;;;;;;;;gBAMF,cAAc,yBACb,8OAAC;;sCACC,8OAAC;4BAAG,WAAU;sCAA2B;;;;;;sCACzC,8OAAC;4BAAI,WAAU;sCACZ;gCACC;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;6BACD,CAAC,GAAG,CAAC,CAAC,uBACL,8OAAC;oCAEC,WAAU;8CAET;mCAHI;;;;;;;;;;;;;;;yCASb,8OAAC;;sCACC,8OAAC;4BAAG,WAAU;sCAA2B;;;;;;sCACzC,8OAAC;4BAAI,WAAU;sCACZ;gCACC;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;6BACD,CAAC,GAAG,CAAC,CAAC,yBACL,8OAAC;oCAEC,WAAU;8CAET;mCAHI;;;;;;;;;;;;;;;;8BAWf,8OAAC;oBAAE,WAAU;8BAA6B;;;;;;;;;;;;;;;;;AAMlD","debugId":null}},
    {"offset": {"line": 437, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/sidebar/SidebarMenu.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport {\r\n  FaTimes,\r\n  FaGlobe,\r\n  FaHome,\r\n  FaInfoCircle,\r\n  FaPhone,\r\n  FaShieldAlt,\r\n} from \"react-icons/fa\";\r\n\r\ninterface SidebarMenuProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function SidebarMenu({ isOpen, onClose }: SidebarMenuProps) {\r\n  // ✅ Do not render if the sidebar is not open\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"\r\n        font-sans fixed top-0 left-0 h-full w-80 bg-white shadow-lg z-[100] p-5\r\n        transform transition-transform duration-300 ease-in-out translate-x-0\r\n      \"\r\n    >\r\n      {/* Close Sidebar Button */}\r\n      <button       \r\n        onClick={onClose} \r\n        className=\"absolute top-4 right-4 text-lg\"\r\n      >\r\n        <FaTimes />\r\n      </button>\r\n\r\n      {/* Header */}\r\n      <div className=\"flex items-center text-gray-800 space-x-2 font-semibold text-lg mb-8\">\r\n        <FaGlobe />\r\n        <span>United States, EN | USD</span>\r\n      </div>\r\n\r\n      {/* Menu Items */}\r\n      <ul className=\"space-y-4 text-gray-800\">\r\n        <li className=\"flex items-center space-x-3 hover:text-blue-500 cursor-pointer\">\r\n          <FaHome />\r\n          <span>Home</span>\r\n        </li>\r\n        <hr />\r\n        <li className=\"flex items-center space-x-3 hover:text-blue-500 cursor-pointer\">\r\n          <FaInfoCircle />\r\n          <span>About Us</span>\r\n        </li>\r\n        <hr />\r\n        <li className=\"flex items-center space-x-3 hover:text-blue-500 cursor-pointer\">\r\n          <FaPhone />\r\n          <span>Contact</span>\r\n        </li>\r\n        <hr />\r\n        <li className=\"flex items-center space-x-3 hover:text-blue-500 cursor-pointer\">\r\n          <FaShieldAlt />\r\n          <span>Policies</span>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAgBe,SAAS,YAAY,EAAE,MAAM,EAAE,OAAO,EAAoB;IACvE,6CAA6C;IAC7C,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,8OAAC;QACC,WAAU;;0BAMV,8OAAC;gBACC,SAAS;gBACT,WAAU;0BAEV,cAAA,8OAAC,8IAAA,CAAA,UAAO;;;;;;;;;;0BAIV,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,8IAAA,CAAA,UAAO;;;;;kCACR,8OAAC;kCAAK;;;;;;;;;;;;0BAIR,8OAAC;gBAAG,WAAU;;kCACZ,8OAAC;wBAAG,WAAU;;0CACZ,8OAAC,8IAAA,CAAA,SAAM;;;;;0CACP,8OAAC;0CAAK;;;;;;;;;;;;kCAER,8OAAC;;;;;kCACD,8OAAC;wBAAG,WAAU;;0CACZ,8OAAC,8IAAA,CAAA,eAAY;;;;;0CACb,8OAAC;0CAAK;;;;;;;;;;;;kCAER,8OAAC;;;;;kCACD,8OAAC;wBAAG,WAAU;;0CACZ,8OAAC,8IAAA,CAAA,UAAO;;;;;0CACR,8OAAC;0CAAK;;;;;;;;;;;;kCAER,8OAAC;;;;;kCACD,8OAAC;wBAAG,WAAU;;0CACZ,8OAAC,8IAAA,CAAA,cAAW;;;;;0CACZ,8OAAC;0CAAK;;;;;;;;;;;;;;;;;;;;;;;;AAKhB","debugId":null}},
    {"offset": {"line": 606, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/auth/authService.tsx"],"sourcesContent":["// Xử lý xác thực đăng nhập với google account\r\n// Xử lý signout\r\n\r\nimport { auth, provider, db, signInWithPopup } from \"@/src/firebaseConfig\";\r\nimport { doc, setDoc, getDoc, serverTimestamp } from \"firebase/firestore\";\r\nimport { signOut } from \"firebase/auth\";\r\n\r\nconst signOutUser = async () => {\r\n  try {\r\n    await signOut(auth);\r\n    console.log(\"✅ Signed out successfully\");\r\n    window.location.href = \"/\"; // hoặc dùng router.push(\"/\") nếu dùng Next.js router\r\n  } catch (error) {\r\n    console.error(\"❌ Error signing out:\", error);\r\n  }\r\n};\r\n\r\nconst signInWithGoogle = async () => {\r\n  try {\r\n    // Hiển thị popup đăng nhập Google\r\n    const result = await signInWithPopup(auth, provider);\r\n    const user = result.user;\r\n\r\n    // Tạo document tham chiếu tới Firestore\r\n    const userRef = doc(db, \"users\", user.uid);\r\n    const userSnap = await getDoc(userRef);\r\n\r\n    // Nếu user chưa tồn tại trong Firestore, thêm mới\r\n    if (!userSnap.exists()) {\r\n      await setDoc(userRef, {\r\n        uid: user.uid,\r\n        name: user.displayName || \"\",\r\n        email: user.email || \"\",\r\n        photoURL: user.photoURL || \"\",\r\n        role: \"Customer\", // 👈 Gán role mặc định\r\n        createdAt: serverTimestamp(), // ⏱ Dùng timestamp chuẩn\r\n      });\r\n    }\r\n\r\n    console.log(\"✅ User signed in:\", user);\r\n    return user; // Trả về user để dùng trong ứng dụng\r\n\r\n  } catch (error: any) {\r\n    if (error.code === \"auth/popup-closed-by-user\") {\r\n      console.warn(\"⚠️ Người dùng đã đóng cửa sổ đăng nhập trước khi hoàn tất.\");\r\n    } else {\r\n      console.error(\"❌ Lỗi khi đăng nhập:\", error);\r\n    }\r\n    return null;\r\n  }\r\n};\r\n\r\nexport { signInWithGoogle, signOutUser };\r\n"],"names":[],"mappings":"AAAA,8CAA8C;AAC9C,gBAAgB;;;;;AAEhB;AAAA;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,cAAc;IAClB,IAAI;QACF,MAAM,CAAA,GAAA,6MAAA,CAAA,UAAO,AAAD,EAAE,qIAAA,CAAA,OAAI;QAClB,QAAQ,GAAG,CAAC;QACZ,OAAO,QAAQ,CAAC,IAAI,GAAG,KAAK,qDAAqD;IACnF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;IACxC;AACF;AAEA,MAAM,mBAAmB;IACvB,IAAI;QACF,kCAAkC;QAClC,MAAM,SAAS,MAAM,CAAA,GAAA,qNAAA,CAAA,kBAAe,AAAD,EAAE,qIAAA,CAAA,OAAI,EAAE,qIAAA,CAAA,WAAQ;QACnD,MAAM,OAAO,OAAO,IAAI;QAExB,wCAAwC;QACxC,MAAM,UAAU,CAAA,GAAA,iKAAA,CAAA,MAAG,AAAD,EAAE,qIAAA,CAAA,KAAE,EAAE,SAAS,KAAK,GAAG;QACzC,MAAM,WAAW,MAAM,CAAA,GAAA,iKAAA,CAAA,SAAM,AAAD,EAAE;QAE9B,kDAAkD;QAClD,IAAI,CAAC,SAAS,MAAM,IAAI;YACtB,MAAM,CAAA,GAAA,iKAAA,CAAA,SAAM,AAAD,EAAE,SAAS;gBACpB,KAAK,KAAK,GAAG;gBACb,MAAM,KAAK,WAAW,IAAI;gBAC1B,OAAO,KAAK,KAAK,IAAI;gBACrB,UAAU,KAAK,QAAQ,IAAI;gBAC3B,MAAM;gBACN,WAAW,CAAA,GAAA,iKAAA,CAAA,kBAAe,AAAD;YAC3B;QACF;QAEA,QAAQ,GAAG,CAAC,qBAAqB;QACjC,OAAO,MAAM,qCAAqC;IAEpD,EAAE,OAAO,OAAY;QACnB,IAAI,MAAM,IAAI,KAAK,6BAA6B;YAC9C,QAAQ,IAAI,CAAC;QACf,OAAO;YACL,QAAQ,KAAK,CAAC,wBAAwB;QACxC;QACA,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 668, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/sidebar/UserSidebar.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport { signOutUser } from '@/src/components/auth/authService';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faFileContract } from '@fortawesome/free-solid-svg-icons';\r\nimport {\r\n  FaTimes, FaPencilAlt, FaUser, FaCalendarAlt, FaEnvelope, FaBuilding,\r\n  FaCog, FaStore, FaMotorcycle, FaUserCog, FaBatteryFull, FaUsers, FaDollarSign\r\n} from 'react-icons/fa';\r\nimport { useUser } from '@/src/context/AuthContext';\r\nimport { IconType } from 'react-icons';\r\nimport { db } from '@/src/firebaseConfig';\r\nimport { collection, onSnapshot, query, where, doc, getDoc } from 'firebase/firestore';\r\n\r\ninterface UserSidebarProps {\r\n  user: any;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\ntype MenuItem =\r\n  | { divider: true }\r\n  | {\r\n      icon: IconType | typeof faFileContract;\r\n      label: string;\r\n      path?: string;\r\n      onClick?: () => void;\r\n    };\r\n\r\nconst UserSidebar: React.FC<UserSidebarProps> = ({ user, isOpen, onClose }) => {\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const { role } = useUser();\r\n\r\n  const [agentStats, setAgentStats] = useState({ total: 0, pending: 0 });\r\n  const [agentDisabled, setAgentDisabled] = useState(false);\r\n\r\n  const normalizedRole = (role || '').toLowerCase();\r\n\r\n  // Realtime Earnings\r\n  useEffect(() => {\r\n    if (normalizedRole !== 'agent' || !user?.uid) return;\r\n\r\n    const q = query(collection(db, 'bookings'), where('agentId', '==', user.uid));\r\n    const unsub = onSnapshot(q, (snap) => {\r\n      let total = 0;\r\n      let pending = 0;\r\n\r\n      snap.forEach(doc => {\r\n        const data = doc.data();\r\n        const amount = data.agentCommission || 0;\r\n        total += amount;\r\n        if (!data.agentCommissionPaid) pending += amount;\r\n      });\r\n\r\n      setAgentStats({ total, pending });\r\n    });\r\n\r\n    return () => unsub();\r\n  }, [normalizedRole, user]);\r\n\r\n  // Check disabled agent\r\n  useEffect(() => {\r\n    if (normalizedRole !== 'agent' || !user?.uid) return;\r\n\r\n    const checkAgent = async () => {\r\n      const snap = await getDoc(doc(db, 'users', user.uid));\r\n      const userData = snap.data();\r\n      if (userData?.status === 'disabled') {\r\n        setAgentDisabled(true);\r\n      }\r\n    };\r\n\r\n    checkAgent();\r\n  }, [normalizedRole, user]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const commonItems: MenuItem[] = [\r\n    { icon: FaPencilAlt, label: 'Write a review', onClick: () => {} },\r\n    { divider: true },\r\n    { icon: FaUser, label: 'Profile', path: '/profile' },\r\n    { icon: FaCalendarAlt, label: 'Bookings', path: '/bookings' },\r\n    { icon: FaEnvelope, label: 'Messages', path: '/messages' },\r\n    { icon: FaBuilding, label: 'My business', path: '/my-business' },\r\n    { divider: true },\r\n  ];\r\n\r\n  const agentItems: MenuItem[] = [\r\n    { icon: FaUsers, label: 'Agent Dashboard', path: '/my-business/agent' },\r\n    { icon: FaDollarSign, label: 'Earnings', path: '/my-business/earnings' },\r\n    { icon: faFileContract, label: 'Request Payment', path: '/my-business/request-payment' },\r\n  ];\r\n\r\n  const footerItem: MenuItem = {\r\n    icon: FaCog,\r\n    label: 'Account Info',\r\n    path: '/account',\r\n  };\r\n\r\n  const getMenuItems = (): MenuItem[] => {\r\n    if (normalizedRole === 'agent') {\r\n      if (agentDisabled) return [...commonItems, footerItem];\r\n      return [...commonItems, ...agentItems, { divider: true }, footerItem];\r\n    }\r\n    return [...commonItems, footerItem];\r\n  };\r\n\r\n  const menuItems = getMenuItems();\r\n\r\n  return (\r\n    <div className={`fixed top-0 right-0 z-[100] w-80 max-w-full h-[100dvh] bg-white shadow-2xl flex flex-col transition-transform duration-300 ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}>\r\n      {/* Header */}\r\n      <div className=\"p-4 border-b flex flex-col items-center relative\">\r\n        <button onClick={onClose} className=\"absolute top-4 right-4 text-xl\">\r\n          <FaTimes />\r\n        </button>\r\n\r\n        <img\r\n          src={user?.photoURL || \"/default-avatar.png\"}\r\n          alt=\"Avatar\"\r\n          className=\"w-16 h-16 rounded-full\"\r\n        />\r\n        <p className=\"mt-2 text-gray-600 text-sm\">Welcome</p>\r\n        <p className=\"font-semibold text-gray-800 mt-1 text-center\">{user?.displayName || \"User\"}</p>\r\n\r\n        {normalizedRole === 'agent' && !agentDisabled && (\r\n          <div className=\"mt-4 space-y-1 text-sm text-gray-600 text-center\">\r\n            <p>Total Earnings: <b>${agentStats.total.toFixed(2)}</b></p>\r\n            <p>Pending Payment: <b>${agentStats.pending.toFixed(2)}</b></p>\r\n          </div>\r\n        )}\r\n\r\n        {normalizedRole === 'agent' && agentDisabled && (\r\n          <p className=\"mt-4 text-red-500 text-sm\">Account Disabled</p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Menu */}\r\n      <nav className=\"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent\">\r\n        {menuItems.map((item, index) =>\r\n          'divider' in item ? (\r\n            <hr key={index} className=\"my-2 border-gray-200\" />\r\n          ) : (\r\n            <button\r\n              key={index}\r\n              onClick={() => {\r\n                if (item.path) router.push(item.path);\r\n                item.onClick?.();\r\n                onClose();\r\n              }}\r\n              className={`flex items-center space-x-3 w-full text-left rounded-lg px-3 py-2 transition ${\r\n                pathname === item.path\r\n                  ? 'bg-[#00d289] text-white'\r\n                  : 'text-gray-700 hover:text-black hover:bg-gray-100'\r\n              }`}\r\n            >\r\n              {'icon' in item && (\r\n                typeof item.icon === 'function' ? (\r\n                  <item.icon />\r\n                ) : (\r\n                  <FontAwesomeIcon icon={item.icon} className=\"w-4 h-4\" />\r\n                )\r\n              )}\r\n              <span>{item.label}</span>\r\n            </button>\r\n          )\r\n        )}\r\n      </nav>\r\n\r\n      <div className=\"p-4 border-t\">\r\n        <button\r\n          onClick={() => {\r\n            signOutUser();\r\n            onClose();\r\n          }}\r\n          className=\"w-full border border-gray-300 rounded-lg py-2 text-black hover:bg-[#00d289] transition\"\r\n        >\r\n          Sign out\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserSidebar;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1003, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/auth/handleEmailLoginAndStoreUser.tsx"],"sourcesContent":["// src/components/handleEmailLoginAndStoreUser.ts\r\nimport { signInWithEmailAndPassword } from \"firebase/auth\";\r\nimport { doc, getDoc, setDoc, serverTimestamp } from \"firebase/firestore\";\r\nimport { auth, db } from \"@/src/firebaseConfig\"; \r\n\r\nexport const handleEmailLoginAndStoreUser = async (email: string, password: string) => {\r\n  const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n  const user = userCredential.user;\r\n\r\n  if (user) {\r\n    const userDocRef = doc(db, \"users\", user.uid);\r\n    const docSnap = await getDoc(userDocRef);\r\n\r\n    if (!docSnap.exists()) {\r\n      await setDoc(userDocRef, {\r\n        uid: user.uid,\r\n        email: user.email,\r\n        createdAt: serverTimestamp(),\r\n      });\r\n    }\r\n  }\r\n\r\n  return user;\r\n};\r\n\r\n"],"names":[],"mappings":"AAAA,iDAAiD;;;;AACjD;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEO,MAAM,+BAA+B,OAAO,OAAe;IAChE,MAAM,iBAAiB,MAAM,CAAA,GAAA,iOAAA,CAAA,6BAA0B,AAAD,EAAE,qIAAA,CAAA,OAAI,EAAE,OAAO;IACrE,MAAM,OAAO,eAAe,IAAI;IAEhC,IAAI,MAAM;QACR,MAAM,aAAa,CAAA,GAAA,iKAAA,CAAA,MAAG,AAAD,EAAE,qIAAA,CAAA,KAAE,EAAE,SAAS,KAAK,GAAG;QAC5C,MAAM,UAAU,MAAM,CAAA,GAAA,iKAAA,CAAA,SAAM,AAAD,EAAE;QAE7B,IAAI,CAAC,QAAQ,MAAM,IAAI;YACrB,MAAM,CAAA,GAAA,iKAAA,CAAA,SAAM,AAAD,EAAE,YAAY;gBACvB,KAAK,KAAK,GAAG;gBACb,OAAO,KAAK,KAAK;gBACjB,WAAW,CAAA,GAAA,iKAAA,CAAA,kBAAe,AAAD;YAC3B;QACF;IACF;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 1038, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/auth/SignupPopup.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { X } from \"lucide-react\";\r\nimport { FaEye, FaEyeSlash } from \"react-icons/fa\";\r\nimport { createUserWithEmailAndPassword } from \"firebase/auth\";\r\nimport { doc, setDoc, serverTimestamp } from \"firebase/firestore\";\r\nimport { auth, db } from \"@/src/firebaseConfig\"; // Nhớ export db từ firebaseConfig.ts\r\n\r\ninterface SignupPopupProps {\r\n  onClose: () => void;\r\n  onSwitchToSignin: () => void;\r\n}\r\n\r\nexport default function SignupPopup({ onClose, onSwitchToSignin }: SignupPopupProps) {\r\n  const [firstName, setFirstName] = useState(\"\");\r\n  const [lastName, setLastName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleSignup = async () => {\r\n    try {\r\n      const userCredential = await createUserWithEmailAndPassword(\r\n        auth,\r\n        email.trim(),\r\n        password.trim()\r\n      );\r\n      const user = userCredential.user;\r\n\r\n      // Lưu thông tin vào Firestore\r\n      await setDoc(doc(db, \"users\", user.uid), {\r\n        uid: user.uid,\r\n        name: `${firstName} ${lastName}`.trim(),\r\n        email: user.email,\r\n        photoURL: user.photoURL || \"\",\r\n        role: \"Customer\",\r\n        createdAt: serverTimestamp(),\r\n      });\r\n\r\n      console.log(\"User created and saved to Firestore!\");\r\n      onClose(); // Đóng popup sau khi tạo thành công\r\n    } catch (err: any) {\r\n      setError(err.message);\r\n      console.error(\"Signup error:\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"font-sans p-3 fixed inset-0 flex justify-center items-center bg-black bg-opacity-50 z-50\">\r\n      <div className=\"bg-white p-6 rounded-xl shadow-xl w-96 relative\">\r\n        {/* Close button */}\r\n        <button\r\n          className=\"absolute top-4 right-4 text-gray-600 hover:text-gray-900\"\r\n          onClick={onClose}\r\n        >\r\n          <X size={24} />\r\n        </button>\r\n\r\n        {/* Logo */}\r\n        <div className=\"flex justify-center mb-4\">\r\n          <img src=\"/assets/images/BipBip_logo1.jpg\" alt=\"Logo\" className=\"w-24 h-10\" />\r\n        </div>\r\n\r\n        {/* Title */}\r\n        <h2 className=\"text-2xl font-bold text-center mb-6\">\r\n          Join to unlock the best of <br />Bíp Bíp\r\n        </h2>\r\n\r\n        {/* Name fields */}\r\n        <div className=\"flex gap-2 mb-4\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"First Name\"\r\n            value={firstName}\r\n            onChange={(e) => setFirstName(e.target.value)}\r\n            className=\"w-1/2 border rounded-lg p-2 focus:ring focus:ring-blue-300 outline-none\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Last Name\"\r\n            value={lastName}\r\n            onChange={(e) => setLastName(e.target.value)}\r\n            className=\"w-1/2 border rounded-lg p-2 focus:ring focus:ring-blue-300 outline-none\"\r\n          />\r\n        </div>\r\n\r\n        {/* Email */}\r\n        <input\r\n          type=\"email\"\r\n          placeholder=\"Email address\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          className=\"w-full border rounded-lg p-2 mb-4 focus:ring focus:ring-blue-300 outline-none\"\r\n        />\r\n\r\n        {/* Password */}\r\n        <div className=\"relative mb-4\">\r\n          <input\r\n            type={showPassword ? \"text\" : \"password\"}\r\n            placeholder=\"Create a password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            className=\"w-full border rounded-lg p-2 pr-10 focus:ring focus:ring-blue-300 outline-none\"\r\n          />\r\n          <button\r\n            type=\"button\"\r\n            className=\"absolute inset-y-0 right-3 flex items-center text-gray-600\"\r\n            onClick={() => setShowPassword(!showPassword)}\r\n          >\r\n            {showPassword ? <FaEyeSlash /> : <FaEye />}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Error message */}\r\n        {error && <p className=\"text-red-500 text-sm mb-2\">{error}</p>}\r\n\r\n        {/* Join Button */}\r\n        <button\r\n          onClick={handleSignup}\r\n          className=\"flex items-center justify-center w-full border py-2 rounded-lg mt-2 mb-3 hover:bg-[#00d289] transition\"\r\n        >\r\n          Join\r\n        </button>\r\n\r\n        {/* Already a member */}\r\n        <div className=\"flex items-center my-4\">\r\n          <hr className=\"flex-1\" />\r\n          <span className=\"mx-2 text-gray-500 text-sm\">Already a member?</span>\r\n          <hr className=\"flex-1\" />\r\n        </div>\r\n\r\n        <p className=\"text-center text-sm \">\r\n          <a\r\n            href=\"#\"\r\n            className=\"font-bold underline text-[#00d289]\"\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              onSwitchToSignin();\r\n            }}\r\n          >\r\n            Sign in\r\n          </a>{\" \"}\r\n          using your Bíp Bíp account.\r\n        </p>\r\n\r\n        {/* Terms */}\r\n        <p className=\"text-xs text-gray-500 mt-4 text-center\">\r\n          By proceeding, you agree to our{\" \"}\r\n          <a href=\"#\" className=\"underline\">Terms of Use</a> and confirm you have read our{\" \"}\r\n          <a href=\"#\" className=\"underline\">Privacy and Cookie Statement</a>.\r\n        </p>\r\n        <p className=\"text-xs text-gray-500 text-center mt-1\">\r\n          This site is protected by reCAPTCHA and the Google{\" \"}\r\n          <a href=\"#\" className=\"underline\">Privacy Policy</a> and{\" \"}\r\n          <a href=\"#\" className=\"underline\">Terms of Service</a> apply.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1372, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/auth/SigninPopup.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { X } from \"lucide-react\";\r\nimport { FaEye, FaEyeSlash } from \"react-icons/fa\";\r\nimport { handleEmailLoginAndStoreUser } from \"@/src/components/auth/handleEmailLoginAndStoreUser\";\r\nimport SignupPopup from \"@/src/components/auth/SignupPopup\";\r\n\r\nexport default function SigninPopup({ onClose }: { onClose: () => void }) {\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [showSignup, setShowSignup] = useState(false);\r\n\r\n  const handleLogin = async () => {\r\n    if (!email || !password) {\r\n      setErrorMessage(\"Vui lòng nhập đầy đủ email và mật khẩu.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setErrorMessage(\"\");\r\n      await handleEmailLoginAndStoreUser(email, password);\r\n      onClose(); // đóng popup sau khi đăng nhập thành công\r\n    } catch (error: any) {\r\n      setErrorMessage(error.message || \"Đăng nhập thất bại.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"font-sans p-3 fixed inset-0 flex justify-center items-center bg-black bg-opacity-50 z-50\">\r\n      <div className=\"bg-white p-6 rounded-xl shadow-xl w-96 relative\">\r\n        <button\r\n          className=\"absolute top-4 right-4 text-gray-600 hover:text-gray-900\"\r\n          onClick={onClose}\r\n        >\r\n          <X size={24} />\r\n        </button>\r\n\r\n        <div className=\"flex justify-center mb-4\">\r\n          <img\r\n            src=\"/assets/images/BipBip_logo1.png\"\r\n            alt=\"BipBip Logo\"\r\n            className=\"w-32 h-10\"\r\n          />\r\n        </div>\r\n\r\n        <h2 className=\"text-2xl text-gray-600 font-bold text-center mb-6\">Welcome back.</h2>\r\n\r\n        <label className=\"block text-gray-600 font-semibold text-sm mb-1\">Email address</label>\r\n        <input\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          className=\"w-full border rounded-lg p-2 mb-4 focus:ring focus:ring-blue-300 outline-none\"\r\n        />\r\n\r\n        <label className=\"block text-gray-600 font-semibold text-sm mb-1\">Password</label>\r\n        <div className=\"relative\">\r\n          <input\r\n            type={showPassword ? \"text\" : \"password\"}\r\n            placeholder=\"Password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            className=\"w-full border rounded-lg p-2 pr-10 focus:ring focus:ring-blue-300 outline-none\"\r\n          />\r\n          <button\r\n            type=\"button\"\r\n            className=\"absolute inset-y-0 right-3 flex items-center text-gray-600\"\r\n            onClick={() => setShowPassword(!showPassword)}\r\n          >\r\n            {showPassword ? <FaEyeSlash /> : <FaEye />}\r\n          </button>\r\n        </div>\r\n\r\n        {errorMessage && (\r\n          <p className=\"text-red-500 text-sm text-center mt-2\">{errorMessage}</p>\r\n        )}\r\n\r\n        <a href=\"#\" className=\"text-[#00d289] text-sm mt-2 inline-block\">\r\n          Forgot password?\r\n        </a>\r\n\r\n        <button\r\n          onClick={handleLogin}\r\n          className=\"flex text-gray-600 items-center justify-center w-full border py-2 rounded-lg mt-2 mb-3 hover:bg-[#00d289] transition\"\r\n        >\r\n          Sign in\r\n        </button>\r\n\r\n        <div className=\"flex items-center my-4\">\r\n          <hr className=\"flex-1\" />\r\n          <span className=\"mx-2 text-gray-500 text-sm\">Not a member?</span>\r\n          <hr className=\"flex-1\" />\r\n        </div>\r\n\r\n        <p className=\"text-center text-gray-600 text-sm\">\r\n          <a\r\n            href=\"#\"\r\n            className=\"font-bold underline text-[#00d289]\"\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              setShowSignup(true);\r\n            }}\r\n          >\r\n            Join\r\n          </a>{\" \"}\r\n          to unlock the best of <br />Bíp Bíp.\r\n        </p>\r\n\r\n        <p className=\"text-xs text-gray-500 mt-4 text-center\">\r\n          By proceeding, you agree to our{\" \"}\r\n          <a href=\"#\" className=\"underline\">Terms of Use</a> and confirm you have read our{\" \"}\r\n          <a href=\"#\" className=\"underline\">Privacy and Cookie Statement</a>.\r\n        </p>\r\n        <p className=\"text-xs text-gray-500 text-center mt-1\">\r\n          This site is protected by reCAPTCHA and the Google{\" \"}\r\n          <a href=\"#\" className=\"underline\">Privacy Policy</a> and{\" \"}\r\n          <a href=\"#\" className=\"underline\">Terms of Service</a> apply.\r\n        </p>\r\n      </div>\r\n\r\n     {/* ✅ Hiển thị SignupPopup nếu được bật */}\r\n      {showSignup && (\r\n          <SignupPopup\r\n            onClose={() => setShowSignup(false)}\r\n            onSwitchToSignin={() => setShowSignup(false)} // ✅ Bổ sung prop bắt buộc\r\n          />\r\n        )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1694, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/auth/LoginPopup.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { FaGoogle, FaEnvelope } from \"react-icons/fa\";\r\nimport { X } from \"lucide-react\";\r\nimport SigninPopup from \"@/src/components/auth/SigninPopup\";\r\nimport { signInWithGoogle } from \"@/src/components/auth/authService\";\r\n\r\n// Tạo interface này để đóng popup khi cần\r\ninterface LoginPopupProps {\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function LoginPopup({ onClose }: LoginPopupProps) {\r\n\r\n  // Khai báo trạng thái của đăng nhập Signin là hiden\r\n  const [showSignin, setShowSignin] = useState(false);\r\n\r\n  const handleGoogleSignIn = async () => {\r\n    try {\r\n      const user = await signInWithGoogle();\r\n      console.log(\"User signed in:\", user);\r\n\r\n      // ✅ Đóng popup sau khi đăng nhập thành công\r\n      onClose();\r\n    } catch (error) {\r\n      console.error(\"Google Sign-In Error:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-3 fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center\">\r\n      <div className=\"bg-white p-6 rounded-2xl shadow-xl w-96 relative\">\r\n        {/* Close button */}\r\n        <button\r\n          className=\"absolute top-4 right-4 text-gray-500 hover:text-gray-700\"\r\n          onClick={onClose}\r\n        >\r\n          <X size={24} />\r\n        </button>\r\n\r\n        {/* Logo */}\r\n        <div className=\"flex justify-center mb-4\">\r\n          <img\r\n            src=\"/assets/images/BipBip_logo1.png\"\r\n            alt=\"BipBip Logo\"\r\n            className=\"w-32 h-10\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-xl text-gray-600 font-semibold mb-4\">\r\n            Sign in to unlock the best of <br />Bíp Bíp.\r\n          </h2>\r\n\r\n          {/* Continue with Google */}\r\n          <button \r\n            className=\"flex text-gray-600 items-center justify-center w-full border py-2 rounded-lg mb-3 hover:bg-[#00d289] transition\"\r\n            onClick={handleGoogleSignIn}\r\n          >\r\n            <FaGoogle className=\"mr-2\" /> Continue with Google\r\n          </button>\r\n\r\n          {/* Continue with Email thì (Mở SigninPopup) */}\r\n          <button\r\n            className=\"flex text-gray-600 items-center justify-center w-full border py-2 rounded-lg hover:bg-[#00d289] transition\"\r\n            onClick={() => setShowSignin(true)}\r\n          >\r\n            <FaEnvelope className=\"mr-2\" /> Continue with Email\r\n          </button>\r\n\r\n          <p className=\"text-xs text-gray-500 mt-4\">\r\n            By proceeding, you agree to our{\" \"}\r\n            <a href=\"#\" className=\"underline\">\r\n              Terms of Use\r\n            </a>{\" \"}\r\n            and confirm you have read our{\" \"}\r\n            <a href=\"#\" className=\"underline\">\r\n              Privacy and Cookie Statement\r\n            </a>.\r\n          </p>\r\n          <p className=\"text-xs text-gray-500 mt-2\">\r\n            This site is protected by reCAPTCHA and the Google{\" \"}\r\n            <a href=\"#\" className=\"underline\">\r\n              Privacy Policy\r\n            </a>{\" \"}\r\n            and\r\n            <a href=\"#\" className=\"underline\"> Terms of Service</a> apply.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Popup Signin xuất hiện khi bấm \"Continue with Email\" */}\r\n      {showSignin && <SigninPopup onClose={() => setShowSignin(false)} />}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;AAOe,SAAS,WAAW,EAAE,OAAO,EAAmB;IAE7D,oDAAoD;IACpD,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,MAAM,qBAAqB;QACzB,IAAI;YACF,MAAM,OAAO,MAAM,CAAA,GAAA,yIAAA,CAAA,mBAAgB,AAAD;YAClC,QAAQ,GAAG,CAAC,mBAAmB;YAE/B,4CAA4C;YAC5C;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB;QACzC;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBACC,WAAU;wBACV,SAAS;kCAET,cAAA,8OAAC,4LAAA,CAAA,IAAC;4BAAC,MAAM;;;;;;;;;;;kCAIX,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BACC,KAAI;4BACJ,KAAI;4BACJ,WAAU;;;;;;;;;;;kCAId,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;;oCAA2C;kDACzB,8OAAC;;;;;oCAAK;;;;;;;0CAItC,8OAAC;gCACC,WAAU;gCACV,SAAS;;kDAET,8OAAC,8IAAA,CAAA,WAAQ;wCAAC,WAAU;;;;;;oCAAS;;;;;;;0CAI/B,8OAAC;gCACC,WAAU;gCACV,SAAS,IAAM,cAAc;;kDAE7B,8OAAC,8IAAA,CAAA,aAAU;wCAAC,WAAU;;;;;;oCAAS;;;;;;;0CAGjC,8OAAC;gCAAE,WAAU;;oCAA6B;oCACR;kDAChC,8OAAC;wCAAE,MAAK;wCAAI,WAAU;kDAAY;;;;;;oCAE7B;oCAAI;oCACqB;kDAC9B,8OAAC;wCAAE,MAAK;wCAAI,WAAU;kDAAY;;;;;;oCAE9B;;;;;;;0CAEN,8OAAC;gCAAE,WAAU;;oCAA6B;oCACW;kDACnD,8OAAC;wCAAE,MAAK;wCAAI,WAAU;kDAAY;;;;;;oCAE7B;oCAAI;kDAET,8OAAC;wCAAE,MAAK;wCAAI,WAAU;kDAAY;;;;;;oCAAqB;;;;;;;;;;;;;;;;;;;YAM5D,4BAAc,8OAAC,yIAAA,CAAA,UAAW;gBAAC,SAAS,IAAM,cAAc;;;;;;;;;;;;AAG/D","debugId":null}},
    {"offset": {"line": 1911, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/landingpage/Header.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { FaBars, FaRegUserCircle, FaGlobe } from \"react-icons/fa\";\r\nimport Image from \"next/image\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Preferences from \"./Preferences\";\r\nimport SidebarMenu from \"../sidebar/SidebarMenu\";\r\nimport UserSidebar from \"../sidebar/UserSidebar\";\r\nimport LoginPopup from \"@/src/components/auth/LoginPopup\";\r\nimport { useUser } from \"@/src/context/AuthContext\";\r\n\r\n// Import UserSidebar từ file riêng\r\nimport Link from \"next/link\";\r\n// Quản lý đóng mở sidebar cho đồng bộ\r\n\r\n\r\nconst Header = () => {\r\n  const [language, setLanguage] = useState(\"EN\");\r\n  const [currency, setCurrency] = useState(\"USD\");\r\n\r\n  // Quản lý mở/đóng popup Preferences\r\n  const [isReferencePopupOpen, setIsReferencePopupOpen] = useState(false);\r\n  // Quản lý mở/đóng popup Login\r\n  const [isLoginPopupOpen, setIsLoginPopupOpen] = useState(false);\r\n  // Quản lý mở/đóng SidebarMenu (hamburger)\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n  // Quản lý mở/đóng Sidebar đổ xuống cho user (khi đã đăng nhập)\r\n  const [isUserSidebarOpen, setIsUserSidebarOpen] = useState(false);\r\n\r\n  const { user } = useUser();  // ✅\r\n  const router = useRouter();\r\n\r\n  // Đổi tiền tệ / ngôn ngữ\r\n  const togglePopup = () => setIsReferencePopupOpen(!isReferencePopupOpen);\r\n  // Đóng / mở Login popup\r\n  const toggleLoginPopup = () => setIsLoginPopupOpen(!isLoginPopupOpen);\r\n  // Đóng / mở SidebarMenu (hamburger) và đóng UserSidebar nếu cần\r\n  const toggleSidebar = () => {\r\n    if (!isSidebarOpen) {\r\n      setIsUserSidebarOpen(false); // Đóng UserSidebar nếu SidebarMenu đang mở\r\n    }\r\n    setIsSidebarOpen(!isSidebarOpen);\r\n  };\r\n  // Đóng / mở UserSidebar và đóng SidebarMenu nếu cần\r\nconst toggleUserSidebar = () => {\r\n  if (!isUserSidebarOpen) {\r\n    setIsSidebarOpen(false); // Đóng SidebarMenu nếu UserSidebar đang mở\r\n  }\r\n  setIsUserSidebarOpen(!isUserSidebarOpen);\r\n};\r\n\r\n  return (\r\n    <header className=\"sticky flex items-center justify-between absolute top-0 left-0 w-full bg-white z-50 h-16\">\r\n      {/* Nút Menu Icon (hamburger) - chỉ hiện trên mobile */}\r\n      <button className=\"text-2xl text-gray-800 md:hidden lg:hidden px-6 py-2\" onClick={toggleSidebar}>\r\n        <FaBars />\r\n      </button>\r\n\r\n      {/* Logo */}\r\n      <div className=\"flex items-center px-8\">\r\n          <Link href=\"/\">\r\n            <Image\r\n              src=\"/assets/images/BipBip_logo1.png\"\r\n              alt=\"eBikeRental Logo\"\r\n              width={160} // ✅ để đúng kích thước thực tế\r\n              height={60} // ✅ tùy theo tỷ lệ logo\r\n              priority // ✅ logo thì nên preload\r\n              className=\"h-auto w-auto max-h-12\" // ✅ tối ưu responsive\r\n            />\r\n          </Link>\r\n      </div>\r\n\r\n\r\n      {/* User Icon (mobile) */}\r\n      <button\r\n        className=\"text-2xl md:hidden text-gray-800 lg:hidden px-6 py-2\"\r\n        onClick={user ? toggleUserSidebar : toggleLoginPopup}\r\n      >\r\n        {user ? (\r\n          <img\r\n            src={user.photoURL || \"/default-avatar.png\"}\r\n            alt=\"avatar\"\r\n            className=\"w-8 h-8 rounded-full\"\r\n          />\r\n        ) : (\r\n          <FaRegUserCircle />\r\n        )}\r\n      </button>\r\n\r\n      {/* Popup đăng nhập (nếu cần) */}\r\n      {isLoginPopupOpen && <LoginPopup onClose={toggleLoginPopup} />}\r\n\r\n      {/* Sidebar Menu (hamburger) */}\r\n      <SidebarMenu isOpen={isSidebarOpen} onClose={toggleSidebar} />\r\n\r\n      {/* Desktop Only */}\r\n      <div className=\"hidden sm:block px-8\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          {/* Nút đổi tiền tệ / ngôn ngữ */}\r\n          <button\r\n            onClick={togglePopup}\r\n            className=\"flex items-center space-x-2 text-sm font-semibold\"\r\n          >\r\n            <FaGlobe className=\"text-lg\" />\r\n            <span className=\"border-l border-gray-400 h-4 mx-2\"></span>\r\n            <span>{currency}</span>\r\n            <span className=\"border-l border-gray-400 h-4 mx-2\"></span>\r\n          </button>\r\n\r\n          {/* Nếu đã đăng nhập => hiển thị avatar, nếu chưa => nút \"Đăng nhập\" */}\r\n          {user ? (\r\n            <img\r\n              src={user.photoURL || \"/default-avatar.png\"}\r\n              alt=\"avatar\"\r\n              className=\"w-8 h-8 rounded-full cursor-pointer\"\r\n              onClick={toggleUserSidebar}\r\n            />\r\n          ) : (\r\n            <button\r\n              onClick={user ? toggleUserSidebar : toggleLoginPopup}\r\n              className=\"px-4 py-1 bg-transparent border border-[#00d289] text-[#00d289] text-md font-semibold rounded-sm\"\r\n            >\r\n              Sign in\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Popup đổi tiền tệ / ngôn ngữ */}\r\n        {isReferencePopupOpen && (\r\n          <Preferences onClose={() => setIsReferencePopupOpen(false)} />\r\n        )}\r\n      </div>\r\n\r\n      {/* Sidebar đổ xuống cho user (chỉ hiện khi đã đăng nhập) */}\r\n      {user && (\r\n        <UserSidebar\r\n          user={user}\r\n          isOpen={isUserSidebarOpen}\r\n          onClose={() => setIsUserSidebarOpen(false)}\r\n        />\r\n      )}\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2152, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/landingpage/Footer.tsx"],"sourcesContent":["export default function Footer() {\r\n  return (\r\n    <footer className=\"bg-[#00d289] text-white text-sm py-4 text-center w-full\">\r\n      <div>© 2025 Workman. All rights reserved.</div>\r\n      <div className=\"mt-1 space-x-3\">\r\n        <a href=\"#\" className=\"underline\">About Us</a>\r\n        <a href=\"#\" className=\"underline\">Contact</a>\r\n        <a href=\"#\" className=\"underline\">Policy</a>\r\n      </div>\r\n    </footer>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAe,SAAS;IACtB,qBACE,8OAAC;QAAO,WAAU;;0BAChB,8OAAC;0BAAI;;;;;;0BACL,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,MAAK;wBAAI,WAAU;kCAAY;;;;;;kCAClC,8OAAC;wBAAE,MAAK;wBAAI,WAAU;kCAAY;;;;;;kCAClC,8OAAC;wBAAE,MAAK;wBAAI,WAAU;kCAAY;;;;;;;;;;;;;;;;;;AAI1C","debugId":null}},
    {"offset": {"line": 2217, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/landingpage/UserTopMenu.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useRouter } from \"next/navigation\";\r\nimport {\r\n  FaCalendarAlt,\r\n  FaStore,\r\n  FaMotorcycle,\r\n  FaUser,\r\n  FaUserCog,\r\n  FaBatteryFull,\r\n} from \"react-icons/fa\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faFileContract } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { useUser } from \"@/src/context/AuthContext\";\r\nimport { IconType } from \"react-icons\";\r\n\r\ntype MenuItem = {\r\n  label: string;\r\n  path: string;\r\n  icon: IconType | typeof faFileContract;\r\n  roles: string[];\r\n};\r\n\r\nconst menuItems: MenuItem[] = [\r\n  {\r\n    label: \"Bookings\",\r\n    path: \"/bookings\",\r\n    icon: FaCalendarAlt,\r\n    roles: [\"admin\", \"company_owner\", \"company_admin\", \"station_manager\", \"staff\"],\r\n  },\r\n  {\r\n    label: \"Rental Companies\",\r\n    path: \"/rental-companies\",\r\n    icon: FaStore,\r\n    roles: [\"admin\"],\r\n  },\r\n  {\r\n    label: \"Ebike Management\",\r\n    path: \"/ebikes\",\r\n    icon: FaMotorcycle,\r\n    roles: [\"admin\", \"company_owner\", \"company_admin\", \"station_manager\", \"staff\"],\r\n  },\r\n  {\r\n    label: \"Users Management\",\r\n    path: \"/users\",\r\n    icon: FaUser,\r\n    roles: [\"admin\"],\r\n  },\r\n  {\r\n    label: \"Customers Management\",\r\n    path: \"/customers\",\r\n    icon: FaUserCog,\r\n    roles: [\"admin\", \"company_owner\", \"company_admin\", \"staff\"],\r\n  },\r\n  {\r\n    label: \"Battery Management\",\r\n    path: \"/battery\",\r\n    icon: FaBatteryFull,\r\n    roles: [\"admin\", \"company_owner\", \"company_admin\", \"station_manager\", \"technician\"],\r\n  },\r\n  {\r\n    label: \"Subscription Packages\",\r\n    path: \"/subscriptionPackages\",\r\n    icon: faFileContract,\r\n    roles: [\"admin\", \"company_owner\", \"company_admin\"],\r\n  },\r\n];\r\n\r\nexport default function UserTopMenu() {\r\n  const router = useRouter();\r\n  const { role } = useUser();\r\n\r\n  if (!role) return null;\r\n\r\n  const normalizedRole = role.toLowerCase();\r\n\r\n  const filteredMenu = menuItems.filter((item) =>\r\n    item.roles.includes(normalizedRole)\r\n  );\r\n\r\n  if (!filteredMenu.length) return null;\r\n\r\n  return (\r\n    <div className=\"hidden md:flex font-inter bg-[#00d289] text-white w-full px-1 py-2 justify-center gap-x-8 items-center\">\r\n      {filteredMenu.map((item) => (\r\n        <button\r\n          key={item.label}\r\n          onClick={() => router.push(item.path)}\r\n          className=\"flex items-center space-x-2 font-medium text-sm hover:underline\"\r\n        >\r\n          {\"icon\" in item && (\r\n            typeof item.icon === \"function\" ? (\r\n              <item.icon />\r\n            ) : (\r\n              <FontAwesomeIcon icon={item.icon} className=\"w-4 h-4\" />\r\n            )\r\n          )}\r\n          <span>{item.label}</span>\r\n        </button>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAQA;AACA;AACA;AAbA;;;;;;;AAuBA,MAAM,YAAwB;IAC5B;QACE,OAAO;QACP,MAAM;QACN,MAAM,8IAAA,CAAA,gBAAa;QACnB,OAAO;YAAC;YAAS;YAAiB;YAAiB;YAAmB;SAAQ;IAChF;IACA;QACE,OAAO;QACP,MAAM;QACN,MAAM,8IAAA,CAAA,UAAO;QACb,OAAO;YAAC;SAAQ;IAClB;IACA;QACE,OAAO;QACP,MAAM;QACN,MAAM,8IAAA,CAAA,eAAY;QAClB,OAAO;YAAC;YAAS;YAAiB;YAAiB;YAAmB;SAAQ;IAChF;IACA;QACE,OAAO;QACP,MAAM;QACN,MAAM,8IAAA,CAAA,SAAM;QACZ,OAAO;YAAC;SAAQ;IAClB;IACA;QACE,OAAO;QACP,MAAM;QACN,MAAM,8IAAA,CAAA,YAAS;QACf,OAAO;YAAC;YAAS;YAAiB;YAAiB;SAAQ;IAC7D;IACA;QACE,OAAO;QACP,MAAM;QACN,MAAM,8IAAA,CAAA,gBAAa;QACnB,OAAO;YAAC;YAAS;YAAiB;YAAiB;YAAmB;SAAa;IACrF;IACA;QACE,OAAO;QACP,MAAM;QACN,MAAM,wKAAA,CAAA,iBAAc;QACpB,OAAO;YAAC;YAAS;YAAiB;SAAgB;IACpD;CACD;AAEc,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,8HAAA,CAAA,UAAO,AAAD;IAEvB,IAAI,CAAC,MAAM,OAAO;IAElB,MAAM,iBAAiB,KAAK,WAAW;IAEvC,MAAM,eAAe,UAAU,MAAM,CAAC,CAAC,OACrC,KAAK,KAAK,CAAC,QAAQ,CAAC;IAGtB,IAAI,CAAC,aAAa,MAAM,EAAE,OAAO;IAEjC,qBACE,8OAAC;QAAI,WAAU;kBACZ,aAAa,GAAG,CAAC,CAAC,qBACjB,8OAAC;gBAEC,SAAS,IAAM,OAAO,IAAI,CAAC,KAAK,IAAI;gBACpC,WAAU;;oBAET,UAAU,QAAQ,CACjB,OAAO,KAAK,IAAI,KAAK,2BACnB,8OAAC,KAAK,IAAI;;;;6CAEV,8OAAC,oKAAA,CAAA,kBAAe;wBAAC,MAAM,KAAK,IAAI;wBAAE,WAAU;;;;;4BAEhD;kCACA,8OAAC;kCAAM,KAAK,KAAK;;;;;;;eAXZ,KAAK,KAAK;;;;;;;;;;AAgBzB","debugId":null}},
    {"offset": {"line": 2358, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/lib/services/customers/customerService.tsx"],"sourcesContent":["import { db } from '@/src/firebaseConfig';\r\nimport {\r\n  collection,\r\n  getDocs,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  doc,\r\n  getDoc,\r\n  query,\r\n  where,\r\n  Timestamp,\r\n} from 'firebase/firestore';\r\nimport { Customer } from '@/src/lib/customers/customerTypes';\r\n\r\nconst customersCollection = collection(db, 'customers');\r\n\r\nexport const getAllCustomers = async (): Promise<Customer[]> => {\r\n  const snapshot = await getDocs(customersCollection);\r\n  return snapshot.docs.map((docSnap) => ({\r\n    ...(docSnap.data() as Omit<Customer, 'id'>),\r\n    id: docSnap.id,\r\n  }));\r\n};\r\n\r\nexport const getCustomerById = async (id: string): Promise<Customer | null> => {\r\n  const docRef = doc(db, 'customers', id);\r\n  const docSnap = await getDoc(docRef);\r\n  if (docSnap.exists()) {\r\n    return { ...(docSnap.data() as Omit<Customer, 'id'>), id: docSnap.id };\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const createCustomer = async (\r\n  data: Omit<Customer, 'id' | 'createdAt' | 'updatedAt'>\r\n): Promise<Customer> => {\r\n  const now = new Date();\r\n  const payload = {\r\n    ...data,\r\n    createdAt: Timestamp.fromDate(now),\r\n    updatedAt: Timestamp.fromDate(now),\r\n    dateOfBirth:\r\n      data.dateOfBirth instanceof Timestamp\r\n        ? data.dateOfBirth\r\n        : typeof data.dateOfBirth === 'string'\r\n        ? Timestamp.fromDate(new Date(data.dateOfBirth + 'T00:00:00'))\r\n        : null,\r\n  };\r\n\r\n  const docRef = await addDoc(customersCollection, payload);\r\n\r\n  return {\r\n    ...data,\r\n    id: docRef.id,\r\n    createdAt: now,\r\n    updatedAt: now,\r\n  };\r\n};\r\n\r\nexport const updateCustomer = async (\r\n  id: string,\r\n  data: Partial<Omit<Customer, 'id' | 'createdAt' | 'updatedAt'>>\r\n): Promise<void> => {\r\n  try {\r\n    const now = new Date();\r\n    const docRef = doc(db, 'customers', id);\r\n\r\n    const updatePayload: any = {\r\n      ...data,\r\n      updatedAt: Timestamp.fromDate(now),\r\n    };\r\n\r\n    if (data.dateOfBirth) {\r\n      updatePayload.dateOfBirth =\r\n        data.dateOfBirth instanceof Timestamp\r\n          ? data.dateOfBirth\r\n          : typeof data.dateOfBirth === 'string'\r\n          ? Timestamp.fromDate(new Date(data.dateOfBirth + 'T00:00:00'))\r\n          : null;\r\n    }\r\n\r\n    console.log('📤 Updating doc:', id);\r\n    console.log('🧾 Payload:', updatePayload);\r\n\r\n    await updateDoc(docRef, updatePayload);\r\n    console.log('✅ Update successful');\r\n  } catch (error) {\r\n    console.error('❌ Error in updateCustomer:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const deleteCustomer = async (id: string): Promise<void> => {\r\n  await deleteDoc(doc(db, 'customers', id));\r\n};\r\n\r\nexport const ensureCustomerByUserId = async (\r\n  userId: string,\r\n  data: Omit<Customer, 'id' | 'createdAt' | 'updatedAt'>\r\n): Promise<void> => {\r\n  if (!userId) return;\r\n\r\n  const snapshot = await getDocs(query(customersCollection, where('userId', '==', userId)));\r\n\r\n  if (!snapshot.empty) {\r\n    const existingDoc = snapshot.docs[0];\r\n    await updateCustomer(existingDoc.id, data);\r\n    console.log('🔄 Customer updated via ensureCustomerByUserId');\r\n  } else {\r\n    await createCustomer(data);\r\n    console.log('✨ Customer created via ensureCustomerByUserId');\r\n  }\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2448, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/hooks/useRentalForm.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Timestamp, collection, addDoc, getDocs, query, where, doc, getDoc, updateDoc } from 'firebase/firestore';\r\nimport { db } from '@/src/firebaseConfig';\r\nimport { Ebike } from '@/src/lib/ebikes/ebikeTypes';\r\nimport { EbikeModel } from '@/src/lib/ebikemodels/ebikeModelTypes';\r\nimport { SubscriptionPackage } from '@/src/lib/subscriptionPackages/subscriptionPackagesType';\r\nimport { Booking, SubmitResult } from '@/src/lib/booking/BookingTypes';\r\nimport { ensureCustomerByUserId } from '@/src/lib/services/customers/customerService';\r\n\r\nexport function useRentalForm(companyId: string, userId: string) {\r\n  const [formData, setFormData] = useState<Record<string, any>>({});\r\n  const [packages, setPackages] = useState<SubscriptionPackage[]>([]);\r\n  const [allBikes, setAllBikes] = useState<(Ebike & { modelName?: string })[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const packageSnap = await getDocs(query(collection(db, 'subscriptionPackages'), where('companyId', '==', companyId)));\r\n        const loadedPackages = packageSnap.docs.map(doc => ({ id: doc.id, ...doc.data() })) as SubscriptionPackage[];\r\n        setPackages(loadedPackages);\r\n\r\n        const bikeSnap = await getDocs(query(collection(db, 'ebikes'), where('companyId', '==', companyId)));\r\n        const bikesRaw = bikeSnap.docs.map(doc => ({ id: doc.id, ...doc.data() })) as Ebike[];\r\n\r\n        const availableBikes = bikesRaw.filter(bike => bike.status === 'Available');\r\n\r\n        const bikesWithModelName = await Promise.all(\r\n          availableBikes.map(async (bike) => {\r\n            let modelName = '';\r\n            if (bike.modelId) {\r\n              try {\r\n                const modelDoc = await getDoc(doc(db, 'ebikeModels', bike.modelId));\r\n                if (modelDoc.exists()) {\r\n                  const modelData = modelDoc.data() as EbikeModel;\r\n                  modelName = modelData.name;\r\n                }\r\n              } catch (error) {\r\n                console.error('❌ Error loading model for bike:', bike.id, error);\r\n              }\r\n            }\r\n            return { ...bike, modelName };\r\n          })\r\n        );\r\n\r\n        setAllBikes(bikesWithModelName);\r\n      } catch (error) {\r\n        console.error('❌ Error loading data:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (companyId) fetchData();\r\n  }, [companyId]);\r\n\r\nconst handleChange = (key: string, value: any) => {\r\n  setFormData(prev => {\r\n    const updated = { ...prev, [key]: value };\r\n\r\n    // ✅ Update giá thuê nếu chọn package\r\n    if (key.startsWith('package')) {\r\n      const selectedPackage = packages.find(pkg => pkg.id === value);\r\n      if (selectedPackage) {\r\n        updated['basePrice'] = selectedPackage.basePrice;\r\n        updated['kmLimit'] = selectedPackage.kmLimit ?? 'Unlimited';\r\n        updated['overageRate'] = selectedPackage.overageRate ?? '-';\r\n        updated['chargingMethod'] = selectedPackage.chargingMethod;\r\n      }\r\n    }\r\n\r\n    // ✅ Tự động gán info khi chọn xe\r\n    if (key === 'vehicleSearch') {\r\n      const selectedBike = allBikes.find(bike => bike.vehicleID === value);\r\n      if (selectedBike) {\r\n        updated['stationId'] = selectedBike.stationId || '';\r\n        updated['vin'] = selectedBike.vehicleID || '';\r\n        updated['vehicleModel'] = selectedBike.modelName || '';\r\n        updated['vehicleColor'] = selectedBike.color || '';\r\n        updated['licensePlate'] = selectedBike.plateNumber || '';\r\n      }\r\n    }\r\n\r\n    // ✅ Tính lại tiền\r\n    const rentalDays = Number(updated['rentalDays']) || 0;\r\n    const basePrice = Number(updated['basePrice']) || 0;\r\n    const batteryFee = Number(updated['batteryFee']) || 0;\r\n    const deposit = Number(updated['deposit']) || 0;\r\n\r\n    if (rentalDays && (basePrice || batteryFee)) {\r\n      const totalAmount = rentalDays * basePrice + batteryFee;\r\n      updated['totalAmount'] = totalAmount;\r\n      updated['remainingBalance'] = totalAmount - deposit;\r\n    }\r\n\r\n    if (key === 'deposit' && updated['totalAmount']) {\r\n      updated['remainingBalance'] = updated['totalAmount'] - deposit;\r\n    }\r\n\r\n    // ✅ Tính rentalEndDate nếu đủ dữ kiện\r\n    if (\r\n      ['rentalStartDate', 'rentalStartHour', 'rentalDays'].includes(key) ||\r\n      (updated['rentalStartDate'] && updated['rentalStartHour'] && updated['rentalDays'])\r\n    ) {\r\n      const startDateStr = updated['rentalStartDate'];\r\n      const startHourStr = updated['rentalStartHour'];\r\n      const days = Number(updated['rentalDays']) || 0;\r\n\r\n      if (startDateStr && startHourStr && days) {\r\n        const start = new Date(`${startDateStr}T${startHourStr}:00`);\r\n        const end = new Date(start);\r\n        end.setDate(start.getDate() + days);\r\n\r\n        const yyyy = end.getFullYear();\r\n        const mm = String(end.getMonth() + 1).padStart(2, '0');\r\n        const dd = String(end.getDate()).padStart(2, '0');\r\n\r\n        updated['rentalEndDate'] = `${yyyy}-${mm}-${dd}`;\r\n      }\r\n    }\r\n\r\n\r\n    return updated;\r\n  });\r\n};\r\n\r\n\r\n  async function handleSubmit(): Promise<SubmitResult> {\r\n    if (!formData.rentalStartDate || !formData.rentalStartHour || !formData.rentalDays) {\r\n      return { status: 'validation_error' };\r\n    }\r\n\r\n    try {\r\n      const startDate = new Date(`${formData.rentalStartDate}T${formData.rentalStartHour}:00`);\r\n      const endDate = new Date(startDate);\r\n      endDate.setDate(startDate.getDate() + Number(formData.rentalDays || 0));\r\n\r\n      await ensureCustomerByUserId(userId, {\r\n        userId,\r\n        name: formData.fullName || '',\r\n        email: formData.email || '',\r\n        phone: formData.phone || '',\r\n        address: formData.address || '',\r\n        idNumber: formData.idNumber || '',\r\n        driverLicense: formData.driverLicense || '',\r\n        dateOfBirth: formData.dateOfBirth || null,\r\n        nationality: formData.nationality || '',\r\n        sex: formData.sex || '',\r\n        placeOfOrigin: formData.placeOfOrigin || '',\r\n        placeOfResidence: formData.placeOfResidence || '',\r\n      });\r\n\r\n      const bookingData = {\r\n        companyId,\r\n        stationId: formData.stationId || '',\r\n        userId: userId || '',\r\n\r\n        idImage: formData.idImage || '',\r\n        fullName: formData.fullName || '',\r\n        channel: formData.channel || '',\r\n        phone: formData.phone || '',\r\n        idNumber: formData.idNumber || '',\r\n        address: formData.address || '',\r\n\r\n        vehicleSearch: formData.vehicleSearch || '',\r\n        vehicleModel: formData.vehicleModel || '',\r\n        vehicleColor: formData.vehicleColor || '',\r\n        vin: formData.vin || '',\r\n        licensePlate: formData.licensePlate || '',\r\n\r\n        batteryCode1: formData.batteryCode1 || '',\r\n        batteryCode2: formData.batteryCode2 || '',\r\n        batteryCode3: formData.batteryCode3 || '',\r\n        batteryCode4: formData.batteryCode4 || '',\r\n\r\n        rentalStartDate: Timestamp.fromDate(startDate),\r\n        rentalStartHour: formData.rentalStartHour || '',\r\n        rentalDays: Number(formData.rentalDays || 0),\r\n        rentalEndDate: Timestamp.fromDate(endDate),\r\n\r\n        package: formData.package || '',\r\n        basePrice: Number(formData.basePrice) || 0,\r\n        batteryFee: Number(formData.batteryFee) || 0,\r\n        totalAmount: Number(formData.totalAmount) || 0,\r\n        deposit: Number(formData.deposit) || 0,\r\n        remainingBalance: Number(formData.remainingBalance) || 0,\r\n\r\n        deliveryMethod: formData.deliveryMethod || 'Pickup at Shop',\r\n        deliveryAddress: formData.deliveryAddress || '',\r\n\r\n        helmet: formData.helmet ?? false,\r\n        charger: formData.charger ?? false,\r\n        phoneHolder: formData.phoneHolder ?? false,\r\n        rearRack: formData.rearRack ?? false,\r\n        raincoat: formData.raincoat ?? false,\r\n\r\n        note: formData.note || '',\r\n\r\n        bookingStatus: 'draft',\r\n        createdAt: Timestamp.now(),\r\n        updatedAt: Timestamp.now(),\r\n      };\r\n\r\n      const docRef = await addDoc(collection(db, 'bookings'), bookingData);\r\n\r\n      if (bookingData.vin) {\r\n        const ebikeQuery = query(collection(db, 'ebikes'), where('vehicleID', '==', bookingData.vin));\r\n        const ebikeSnap = await getDocs(ebikeQuery);\r\n        if (!ebikeSnap.empty) {\r\n          const ebikeDoc = ebikeSnap.docs[0];\r\n          await updateDoc(ebikeDoc.ref, { status: 'In Use' });\r\n        }\r\n      }\r\n\r\n      if (bookingData.batteryCode1) {\r\n        const batteryQuery = query(collection(db, 'batteries'), where('batteryCode', '==', bookingData.batteryCode1));\r\n        const batterySnap = await getDocs(batteryQuery);\r\n        if (!batterySnap.empty) {\r\n          const batteryDoc = batterySnap.docs[0];\r\n          await updateDoc(batteryDoc.ref, { status: 'in_use' });\r\n        }\r\n      }\r\n\r\n      // 👉 Reset form sau khi submit thành công\r\n      resetForm();\r\n      \r\n      return {\r\n        status: 'success',\r\n        booking: {\r\n          id: docRef.id,\r\n          ...bookingData,\r\n        } as Booking,\r\n      };\r\n    } catch (error) {\r\n      console.error('Booking failed:', error);\r\n      return { status: 'error' };\r\n    }\r\n  }\r\n\r\n  const resetForm = () => {\r\n    setFormData({});\r\n  };\r\n\r\n  return {\r\n    formData,\r\n    setFormData,\r\n    handleChange,\r\n    handleSubmit,\r\n    resetForm,\r\n    packages,\r\n    setPackages,\r\n    loading,\r\n    setLoading,\r\n    allBikes,\r\n    setAllBikes,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;AAEA;AACA;AAAA;AACA;AAAA;AAKA;AATA;;;;;AAWO,SAAS,cAAc,SAAiB,EAAE,MAAc;IAC7D,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAuB,CAAC;IAC/D,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAyB,EAAE;IAClE,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAsC,EAAE;IAC/E,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,YAAY;YAChB,WAAW;YACX,IAAI;gBACF,MAAM,cAAc,MAAM,CAAA,GAAA,iKAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,CAAA,GAAA,iKAAA,CAAA,aAAU,AAAD,EAAE,qIAAA,CAAA,KAAE,EAAE,yBAAyB,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,aAAa,MAAM;gBACzG,MAAM,iBAAiB,YAAY,IAAI,CAAC,GAAG,CAAC,CAAA,MAAO,CAAC;wBAAE,IAAI,IAAI,EAAE;wBAAE,GAAG,IAAI,IAAI,EAAE;oBAAC,CAAC;gBACjF,YAAY;gBAEZ,MAAM,WAAW,MAAM,CAAA,GAAA,iKAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,CAAA,GAAA,iKAAA,CAAA,aAAU,AAAD,EAAE,qIAAA,CAAA,KAAE,EAAE,WAAW,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,aAAa,MAAM;gBACxF,MAAM,WAAW,SAAS,IAAI,CAAC,GAAG,CAAC,CAAA,MAAO,CAAC;wBAAE,IAAI,IAAI,EAAE;wBAAE,GAAG,IAAI,IAAI,EAAE;oBAAC,CAAC;gBAExE,MAAM,iBAAiB,SAAS,MAAM,CAAC,CAAA,OAAQ,KAAK,MAAM,KAAK;gBAE/D,MAAM,qBAAqB,MAAM,QAAQ,GAAG,CAC1C,eAAe,GAAG,CAAC,OAAO;oBACxB,IAAI,YAAY;oBAChB,IAAI,KAAK,OAAO,EAAE;wBAChB,IAAI;4BACF,MAAM,WAAW,MAAM,CAAA,GAAA,iKAAA,CAAA,SAAM,AAAD,EAAE,CAAA,GAAA,iKAAA,CAAA,MAAG,AAAD,EAAE,qIAAA,CAAA,KAAE,EAAE,eAAe,KAAK,OAAO;4BACjE,IAAI,SAAS,MAAM,IAAI;gCACrB,MAAM,YAAY,SAAS,IAAI;gCAC/B,YAAY,UAAU,IAAI;4BAC5B;wBACF,EAAE,OAAO,OAAO;4BACd,QAAQ,KAAK,CAAC,mCAAmC,KAAK,EAAE,EAAE;wBAC5D;oBACF;oBACA,OAAO;wBAAE,GAAG,IAAI;wBAAE;oBAAU;gBAC9B;gBAGF,YAAY;YACd,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,yBAAyB;YACzC,SAAU;gBACR,WAAW;YACb;QACF;QAEA,IAAI,WAAW;IACjB,GAAG;QAAC;KAAU;IAEhB,MAAM,eAAe,CAAC,KAAa;QACjC,YAAY,CAAA;YACV,MAAM,UAAU;gBAAE,GAAG,IAAI;gBAAE,CAAC,IAAI,EAAE;YAAM;YAExC,qCAAqC;YACrC,IAAI,IAAI,UAAU,CAAC,YAAY;gBAC7B,MAAM,kBAAkB,SAAS,IAAI,CAAC,CAAA,MAAO,IAAI,EAAE,KAAK;gBACxD,IAAI,iBAAiB;oBACnB,OAAO,CAAC,YAAY,GAAG,gBAAgB,SAAS;oBAChD,OAAO,CAAC,UAAU,GAAG,gBAAgB,OAAO,IAAI;oBAChD,OAAO,CAAC,cAAc,GAAG,gBAAgB,WAAW,IAAI;oBACxD,OAAO,CAAC,iBAAiB,GAAG,gBAAgB,cAAc;gBAC5D;YACF;YAEA,iCAAiC;YACjC,IAAI,QAAQ,iBAAiB;gBAC3B,MAAM,eAAe,SAAS,IAAI,CAAC,CAAA,OAAQ,KAAK,SAAS,KAAK;gBAC9D,IAAI,cAAc;oBAChB,OAAO,CAAC,YAAY,GAAG,aAAa,SAAS,IAAI;oBACjD,OAAO,CAAC,MAAM,GAAG,aAAa,SAAS,IAAI;oBAC3C,OAAO,CAAC,eAAe,GAAG,aAAa,SAAS,IAAI;oBACpD,OAAO,CAAC,eAAe,GAAG,aAAa,KAAK,IAAI;oBAChD,OAAO,CAAC,eAAe,GAAG,aAAa,WAAW,IAAI;gBACxD;YACF;YAEA,kBAAkB;YAClB,MAAM,aAAa,OAAO,OAAO,CAAC,aAAa,KAAK;YACpD,MAAM,YAAY,OAAO,OAAO,CAAC,YAAY,KAAK;YAClD,MAAM,aAAa,OAAO,OAAO,CAAC,aAAa,KAAK;YACpD,MAAM,UAAU,OAAO,OAAO,CAAC,UAAU,KAAK;YAE9C,IAAI,cAAc,CAAC,aAAa,UAAU,GAAG;gBAC3C,MAAM,cAAc,aAAa,YAAY;gBAC7C,OAAO,CAAC,cAAc,GAAG;gBACzB,OAAO,CAAC,mBAAmB,GAAG,cAAc;YAC9C;YAEA,IAAI,QAAQ,aAAa,OAAO,CAAC,cAAc,EAAE;gBAC/C,OAAO,CAAC,mBAAmB,GAAG,OAAO,CAAC,cAAc,GAAG;YACzD;YAEA,sCAAsC;YACtC,IACE;gBAAC;gBAAmB;gBAAmB;aAAa,CAAC,QAAQ,CAAC,QAC7D,OAAO,CAAC,kBAAkB,IAAI,OAAO,CAAC,kBAAkB,IAAI,OAAO,CAAC,aAAa,EAClF;gBACA,MAAM,eAAe,OAAO,CAAC,kBAAkB;gBAC/C,MAAM,eAAe,OAAO,CAAC,kBAAkB;gBAC/C,MAAM,OAAO,OAAO,OAAO,CAAC,aAAa,KAAK;gBAE9C,IAAI,gBAAgB,gBAAgB,MAAM;oBACxC,MAAM,QAAQ,IAAI,KAAK,GAAG,aAAa,CAAC,EAAE,aAAa,GAAG,CAAC;oBAC3D,MAAM,MAAM,IAAI,KAAK;oBACrB,IAAI,OAAO,CAAC,MAAM,OAAO,KAAK;oBAE9B,MAAM,OAAO,IAAI,WAAW;oBAC5B,MAAM,KAAK,OAAO,IAAI,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG;oBAClD,MAAM,KAAK,OAAO,IAAI,OAAO,IAAI,QAAQ,CAAC,GAAG;oBAE7C,OAAO,CAAC,gBAAgB,GAAG,GAAG,KAAK,CAAC,EAAE,GAAG,CAAC,EAAE,IAAI;gBAClD;YACF;YAGA,OAAO;QACT;IACF;IAGE,eAAe;QACb,IAAI,CAAC,SAAS,eAAe,IAAI,CAAC,SAAS,eAAe,IAAI,CAAC,SAAS,UAAU,EAAE;YAClF,OAAO;gBAAE,QAAQ;YAAmB;QACtC;QAEA,IAAI;YACF,MAAM,YAAY,IAAI,KAAK,GAAG,SAAS,eAAe,CAAC,CAAC,EAAE,SAAS,eAAe,CAAC,GAAG,CAAC;YACvF,MAAM,UAAU,IAAI,KAAK;YACzB,QAAQ,OAAO,CAAC,UAAU,OAAO,KAAK,OAAO,SAAS,UAAU,IAAI;YAEpE,MAAM,CAAA,GAAA,uJAAA,CAAA,yBAAsB,AAAD,EAAE,QAAQ;gBACnC;gBACA,MAAM,SAAS,QAAQ,IAAI;gBAC3B,OAAO,SAAS,KAAK,IAAI;gBACzB,OAAO,SAAS,KAAK,IAAI;gBACzB,SAAS,SAAS,OAAO,IAAI;gBAC7B,UAAU,SAAS,QAAQ,IAAI;gBAC/B,eAAe,SAAS,aAAa,IAAI;gBACzC,aAAa,SAAS,WAAW,IAAI;gBACrC,aAAa,SAAS,WAAW,IAAI;gBACrC,KAAK,SAAS,GAAG,IAAI;gBACrB,eAAe,SAAS,aAAa,IAAI;gBACzC,kBAAkB,SAAS,gBAAgB,IAAI;YACjD;YAEA,MAAM,cAAc;gBAClB;gBACA,WAAW,SAAS,SAAS,IAAI;gBACjC,QAAQ,UAAU;gBAElB,SAAS,SAAS,OAAO,IAAI;gBAC7B,UAAU,SAAS,QAAQ,IAAI;gBAC/B,SAAS,SAAS,OAAO,IAAI;gBAC7B,OAAO,SAAS,KAAK,IAAI;gBACzB,UAAU,SAAS,QAAQ,IAAI;gBAC/B,SAAS,SAAS,OAAO,IAAI;gBAE7B,eAAe,SAAS,aAAa,IAAI;gBACzC,cAAc,SAAS,YAAY,IAAI;gBACvC,cAAc,SAAS,YAAY,IAAI;gBACvC,KAAK,SAAS,GAAG,IAAI;gBACrB,cAAc,SAAS,YAAY,IAAI;gBAEvC,cAAc,SAAS,YAAY,IAAI;gBACvC,cAAc,SAAS,YAAY,IAAI;gBACvC,cAAc,SAAS,YAAY,IAAI;gBACvC,cAAc,SAAS,YAAY,IAAI;gBAEvC,iBAAiB,iKAAA,CAAA,YAAS,CAAC,QAAQ,CAAC;gBACpC,iBAAiB,SAAS,eAAe,IAAI;gBAC7C,YAAY,OAAO,SAAS,UAAU,IAAI;gBAC1C,eAAe,iKAAA,CAAA,YAAS,CAAC,QAAQ,CAAC;gBAElC,SAAS,SAAS,OAAO,IAAI;gBAC7B,WAAW,OAAO,SAAS,SAAS,KAAK;gBACzC,YAAY,OAAO,SAAS,UAAU,KAAK;gBAC3C,aAAa,OAAO,SAAS,WAAW,KAAK;gBAC7C,SAAS,OAAO,SAAS,OAAO,KAAK;gBACrC,kBAAkB,OAAO,SAAS,gBAAgB,KAAK;gBAEvD,gBAAgB,SAAS,cAAc,IAAI;gBAC3C,iBAAiB,SAAS,eAAe,IAAI;gBAE7C,QAAQ,SAAS,MAAM,IAAI;gBAC3B,SAAS,SAAS,OAAO,IAAI;gBAC7B,aAAa,SAAS,WAAW,IAAI;gBACrC,UAAU,SAAS,QAAQ,IAAI;gBAC/B,UAAU,SAAS,QAAQ,IAAI;gBAE/B,MAAM,SAAS,IAAI,IAAI;gBAEvB,eAAe;gBACf,WAAW,iKAAA,CAAA,YAAS,CAAC,GAAG;gBACxB,WAAW,iKAAA,CAAA,YAAS,CAAC,GAAG;YAC1B;YAEA,MAAM,SAAS,MAAM,CAAA,GAAA,iKAAA,CAAA,SAAM,AAAD,EAAE,CAAA,GAAA,iKAAA,CAAA,aAAU,AAAD,EAAE,qIAAA,CAAA,KAAE,EAAE,aAAa;YAExD,IAAI,YAAY,GAAG,EAAE;gBACnB,MAAM,aAAa,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,CAAA,GAAA,iKAAA,CAAA,aAAU,AAAD,EAAE,qIAAA,CAAA,KAAE,EAAE,WAAW,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,aAAa,MAAM,YAAY,GAAG;gBAC3F,MAAM,YAAY,MAAM,CAAA,GAAA,iKAAA,CAAA,UAAO,AAAD,EAAE;gBAChC,IAAI,CAAC,UAAU,KAAK,EAAE;oBACpB,MAAM,WAAW,UAAU,IAAI,CAAC,EAAE;oBAClC,MAAM,CAAA,GAAA,iKAAA,CAAA,YAAS,AAAD,EAAE,SAAS,GAAG,EAAE;wBAAE,QAAQ;oBAAS;gBACnD;YACF;YAEA,IAAI,YAAY,YAAY,EAAE;gBAC5B,MAAM,eAAe,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,CAAA,GAAA,iKAAA,CAAA,aAAU,AAAD,EAAE,qIAAA,CAAA,KAAE,EAAE,cAAc,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,eAAe,MAAM,YAAY,YAAY;gBAC3G,MAAM,cAAc,MAAM,CAAA,GAAA,iKAAA,CAAA,UAAO,AAAD,EAAE;gBAClC,IAAI,CAAC,YAAY,KAAK,EAAE;oBACtB,MAAM,aAAa,YAAY,IAAI,CAAC,EAAE;oBACtC,MAAM,CAAA,GAAA,iKAAA,CAAA,YAAS,AAAD,EAAE,WAAW,GAAG,EAAE;wBAAE,QAAQ;oBAAS;gBACrD;YACF;YAEA,0CAA0C;YAC1C;YAEA,OAAO;gBACL,QAAQ;gBACR,SAAS;oBACP,IAAI,OAAO,EAAE;oBACb,GAAG,WAAW;gBAChB;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,mBAAmB;YACjC,OAAO;gBAAE,QAAQ;YAAQ;QAC3B;IACF;IAEA,MAAM,YAAY;QAChB,YAAY,CAAC;IACf;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 2699, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/hooks/useRentalStations.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { collection, getDocs, query, where } from 'firebase/firestore';\r\nimport { db } from '@/src/firebaseConfig';\r\nimport { RentalStation } from '@/src/lib/rentalStations/rentalStationTypes';\r\n\r\nexport function useRentalStations(companyId: string, isAdmin = false) {\r\n  const [stations, setStations] = useState<RentalStation[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchStations = async () => {\r\n      try {\r\n        let q;\r\n        if (isAdmin) {\r\n          // Admin thì lấy tất cả các stations\r\n          q = query(collection(db, 'rentalStations'));\r\n        } else {\r\n          // Công ty thường thì lọc theo companyId\r\n          q = query(collection(db, 'rentalStations'), where('companyId', '==', companyId));\r\n        }\r\n\r\n        const snapshot = await getDocs(q);\r\n        const data: RentalStation[] = snapshot.docs.map((doc) => ({\r\n          id: doc.id,\r\n          ...(doc.data() as Omit<RentalStation, 'id'>),\r\n        }));\r\n\r\n        setStations(data);\r\n      } catch (error) {\r\n        console.error('❌ Failed to fetch rental stations:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (companyId || isAdmin) {\r\n      fetchStations();\r\n    }\r\n  }, [companyId, isAdmin]);\r\n\r\n  return { stations, loading };\r\n}\r\n"],"names":[],"mappings":";;;AAEA;AACA;AAAA;AACA;AAAA;AAJA;;;;AAOO,SAAS,kBAAkB,SAAiB,EAAE,UAAU,KAAK;IAClE,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAmB,EAAE;IAC5D,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,gBAAgB;YACpB,IAAI;gBACF,IAAI;gBACJ,IAAI,SAAS;oBACX,oCAAoC;oBACpC,IAAI,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,CAAA,GAAA,iKAAA,CAAA,aAAU,AAAD,EAAE,qIAAA,CAAA,KAAE,EAAE;gBAC3B,OAAO;oBACL,wCAAwC;oBACxC,IAAI,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,CAAA,GAAA,iKAAA,CAAA,aAAU,AAAD,EAAE,qIAAA,CAAA,KAAE,EAAE,mBAAmB,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,aAAa,MAAM;gBACvE;gBAEA,MAAM,WAAW,MAAM,CAAA,GAAA,iKAAA,CAAA,UAAO,AAAD,EAAE;gBAC/B,MAAM,OAAwB,SAAS,IAAI,CAAC,GAAG,CAAC,CAAC,MAAQ,CAAC;wBACxD,IAAI,IAAI,EAAE;wBACV,GAAI,IAAI,IAAI,EAAE;oBAChB,CAAC;gBAED,YAAY;YACd,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,sCAAsC;YACtD,SAAU;gBACR,WAAW;YACb;QACF;QAEA,IAAI,aAAa,SAAS;YACxB;QACF;IACF,GAAG;QAAC;QAAW;KAAQ;IAEvB,OAAO;QAAE;QAAU;IAAQ;AAC7B","debugId":null}},
    {"offset": {"line": 2755, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/hooks/useBookingForm.ts"],"sourcesContent":["'use client';\r\n\r\nimport { Timestamp, collection, addDoc, getDocs, query, updateDoc, where } from 'firebase/firestore';\r\nimport { db } from '@/src/firebaseConfig';\r\nimport { Booking, SubmitResult } from '@/src/lib/booking/BookingTypes';\r\nimport { useRentalForm } from './useRentalForm';\r\nimport { useRentalStations } from '@/src/hooks/useRentalStations';\r\nimport { useUser } from '@/src/context/AuthContext';\r\n\r\nexport function useBookingForm(companyId: string, userId: string) {\r\n  const rentalForm = useRentalForm(companyId, userId);\r\n  const { role } = useUser();\r\n  const isAdmin = role === 'Admin';\r\n\r\n  const { formData } = rentalForm;\r\n\r\n  // ✅ Lọc danh sách stations theo companyId\r\n  const { stations, loading: stationsLoading } = useRentalStations(companyId, isAdmin);\r\n\r\n  const handleSubmit = async (): Promise<SubmitResult> => {\r\n    if (!formData.rentalStartDate || !formData.rentalStartHour || !formData.rentalDays) {\r\n      return { status: 'validation_error' };\r\n    }\r\n\r\n    try {\r\n      const startDate = new Date(`${formData.rentalStartDate}T${formData.rentalStartHour}:00`);\r\n      const endDate = new Date(startDate);\r\n      endDate.setDate(startDate.getDate() + Number(formData.rentalDays || 0));\r\n\r\n      const bookingData = {\r\n        companyId,\r\n        stationId: formData.stationId || '',\r\n        userId: userId || '',\r\n\r\n        idImage: formData.idImage || '',\r\n        fullName: formData.fullName || '',\r\n        channel: formData.channel || '',\r\n        phone: formData.phone || '',\r\n        idNumber: formData.idNumber || '',\r\n        address: formData.address || '',\r\n\r\n        vehicleSearch: formData.vehicleSearch || '',\r\n        vehicleModel: formData.vehicleModel || '',\r\n        vehicleColor: formData.vehicleColor || '',\r\n        vin: formData.vin || '',\r\n        licensePlate: formData.licensePlate || '',\r\n\r\n        batteryCode1: formData.batteryCode1 || '',\r\n        batteryCode2: formData.batteryCode2 || '',\r\n        batteryCode3: formData.batteryCode3 || '',\r\n        batteryCode4: formData.batteryCode4 || '',\r\n\r\n        rentalStartDate: Timestamp.fromDate(startDate),\r\n        rentalStartHour: formData.rentalStartHour || '',\r\n        rentalDays: Number(formData.rentalDays || 0),\r\n        rentalEndDate: Timestamp.fromDate(new Date(formData.rentalEndDate)),  \r\n\r\n        package: formData.package || '',\r\n        basePrice: Number(formData.basePrice) || 0,\r\n        batteryFee: Number(formData.batteryFee) || 0,\r\n        totalAmount: Number(formData.totalAmount) || 0,\r\n        deposit: Number(formData.deposit) || 0,\r\n        remainingBalance: Number(formData.remainingBalance) || 0,\r\n\r\n        deliveryMethod: formData.deliveryMethod || 'Pickup at Shop',\r\n        deliveryAddress: formData.deliveryAddress || '',\r\n\r\n        helmet: formData.helmet ?? false,\r\n        charger: formData.charger ?? false,\r\n        phoneHolder: formData.phoneHolder ?? false,\r\n        rearRack: formData.rearRack ?? false,\r\n        raincoat: formData.raincoat ?? false,\r\n\r\n        note: formData.note || '',\r\n\r\n        bookingStatus: formData.bookingStatus || 'draft',\r\n        statusComment: formData.statusComment || '',\r\n        createdAt: Timestamp.now(),\r\n        updatedAt: Timestamp.now(),\r\n      };\r\n\r\n      const docRef = await addDoc(collection(db, 'bookings'), bookingData);\r\n\r\n      // ✅ Cập nhật trạng thái xe: In Use\r\n      if (bookingData.vin) {\r\n        const ebikeSnap = await getDocs(\r\n          query(collection(db, 'ebikes'), where('vehicleID', '==', bookingData.vin))\r\n        );\r\n        if (!ebikeSnap.empty) {\r\n          const ebikeDoc = ebikeSnap.docs[0];\r\n          await updateDoc(ebikeDoc.ref, { status: 'In Use' });\r\n        }\r\n      }\r\n\r\n      // ✅ Cập nhật trạng thái pin: in_use\r\n      if (bookingData.batteryCode1) {\r\n        const batterySnap = await getDocs(\r\n          query(collection(db, 'batteries'), where('batteryCode', '==', bookingData.batteryCode1))\r\n        );\r\n        if (!batterySnap.empty) {\r\n          const batteryDoc = batterySnap.docs[0];\r\n          await updateDoc(batteryDoc.ref, { status: 'in_use' });\r\n        }\r\n      }\r\n\r\n      return {\r\n        status: 'success',\r\n        booking: {\r\n          id: docRef.id,\r\n          ...bookingData,\r\n        } as Booking,\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Booking failed:', error);\r\n      return { status: 'error' };\r\n    }\r\n  };\r\n\r\n  return {\r\n    ...rentalForm,\r\n    stations,         // ✅ Danh sách trạm đúng công ty\r\n    stationsLoading,  // ✅ Loading để form biết khi nào hiển thị dropdown\r\n    handleSubmit,\r\n  };\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2878, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/ui/input.tsx"],"sourcesContent":["import { ReactNode, InputHTMLAttributes } from 'react';\r\n\r\ninterface InputProps extends InputHTMLAttributes<HTMLInputElement> {\r\n  className?: string;\r\n  icon?: ReactNode;\r\n}\r\n\r\nexport const Input = ({ className = '', icon, ...props }: InputProps) => {\r\n  return (\r\n    <div className={`flex items-center border border-[#00d289] rounded-sm p-2 ${className}`}>\r\n      {icon && <span className=\"mr-2\">{icon}</span>}\r\n      <input\r\n        className=\"flex-1 outline-none bg-transparent\"\r\n        {...props}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAOO,MAAM,QAAQ,CAAC,EAAE,YAAY,EAAE,EAAE,IAAI,EAAE,GAAG,OAAmB;IAClE,qBACE,8OAAC;QAAI,WAAW,CAAC,yDAAyD,EAAE,WAAW;;YACpF,sBAAQ,8OAAC;gBAAK,WAAU;0BAAQ;;;;;;0BACjC,8OAAC;gBACC,WAAU;gBACT,GAAG,KAAK;;;;;;;;;;;;AAIjB","debugId":null}},
    {"offset": {"line": 2916, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/lib/utils.ts"],"sourcesContent":["// src/lib/utils.ts\r\nexport function cn(...args: any[]) {\r\n    return args.filter(Boolean).join(\" \");\r\n  }\r\n  "],"names":[],"mappings":"AAAA,mBAAmB;;;;AACZ,SAAS,GAAG,GAAG,IAAW;IAC7B,OAAO,KAAK,MAAM,CAAC,SAAS,IAAI,CAAC;AACnC","debugId":null}},
    {"offset": {"line": 2929, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/src/lib/utils\";\r\n\r\nexport interface TextareaProps extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <textarea\r\n        ref={ref}\r\n        className={cn(\r\n          \"flex w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-[#00d289] focus:border-transparent\",\r\n          className\r\n        )}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\n\r\nTextarea.displayName = \"Textarea\";\r\n\r\nexport { Textarea };\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAIA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,8LACA;QAED,GAAG,KAAK;;;;;;AAGf;AAGF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 2957, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/ui/button.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { ReactNode } from 'react';\r\n\r\ntype ButtonVariant =\r\n  | 'default'\r\n  | 'ghost'\r\n  | 'outline'\r\n  | 'secondary'\r\n  | 'danger'\r\n  | 'greenOutline'\r\n  | 'destructive';\r\n\r\ntype ButtonSize = 'sm' | 'md' | 'lg';\r\n\r\ninterface ButtonProps {\r\n  className?: string;\r\n  children: ReactNode;\r\n  onClick?: () => void;\r\n  type?: 'button' | 'submit' | 'reset';\r\n  variant?: ButtonVariant;\r\n  size?: ButtonSize;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport const Button = ({\r\n  className = '',\r\n  children,\r\n  onClick,\r\n  type = 'button',\r\n  variant = 'default',\r\n  size = 'md',\r\n  disabled = false,\r\n}: ButtonProps) => {\r\n\r\n  const baseClass = 'inline-flex items-center justify-center font-semibold rounded-md transition-all';\r\n\r\n  const sizeClass: Record<ButtonSize, string> = {\r\n    sm: 'px-3 py-1 text-xs',\r\n    md: 'px-4 py-2 text-sm',\r\n    lg: 'px-6 py-3 text-base',\r\n  };\r\n\r\n  const variantClass: Record<ButtonVariant, string> = {\r\n    default: 'bg-[#00d289] text-white border border-[#00d289] hover:bg-[#00b67a]',\r\n    ghost: 'bg-transparent text-[#00d289] border border-transparent hover:bg-[#e6fff5]',\r\n    outline: 'bg-white text-[#00d289] border border-[#00d289] hover:bg-[#f0fdf8]',\r\n    secondary: 'bg-gray-100 text-gray-800 border border-gray-300 hover:bg-gray-200',\r\n    danger: 'bg-red-500 text-white border border-red-500 hover:bg-red-600',\r\n    greenOutline: 'bg-transparent text-[#00d289] border border-[#00d289] hover:bg-[#00d289]/10',\r\n    destructive: 'bg-white text-red-600 border border-red-500 hover:bg-red-50',\r\n  };\r\n\r\n  const disabledClass = disabled ? 'opacity-50 cursor-not-allowed pointer-events-none' : '';\r\n\r\n  return (\r\n    <button\r\n      type={type}\r\n      disabled={disabled}\r\n      onClick={onClick}\r\n      className={[\r\n        baseClass,\r\n        sizeClass[size],\r\n        variantClass[variant],\r\n        disabledClass,\r\n        className,\r\n      ].join(' ')}\r\n    >\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;AAyBO,MAAM,SAAS,CAAC,EACrB,YAAY,EAAE,EACd,QAAQ,EACR,OAAO,EACP,OAAO,QAAQ,EACf,UAAU,SAAS,EACnB,OAAO,IAAI,EACX,WAAW,KAAK,EACJ;IAEZ,MAAM,YAAY;IAElB,MAAM,YAAwC;QAC5C,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,MAAM,eAA8C;QAClD,SAAS;QACT,OAAO;QACP,SAAS;QACT,WAAW;QACX,QAAQ;QACR,cAAc;QACd,aAAa;IACf;IAEA,MAAM,gBAAgB,WAAW,sDAAsD;IAEvF,qBACE,8OAAC;QACC,MAAM;QACN,UAAU;QACV,SAAS;QACT,WAAW;YACT;YACA,SAAS,CAAC,KAAK;YACf,YAAY,CAAC,QAAQ;YACrB;YACA;SACD,CAAC,IAAI,CAAC;kBAEN;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 3004, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/utils/formatCurrency.ts"],"sourcesContent":["'use client';\r\n\r\n/**\r\n * Format số tiền thành dạng 1,000,000 ₫\r\n * @param value - Số tiền cần format\r\n * @returns Chuỗi số tiền đã format\r\n */\r\nexport function formatCurrency(value: number | string, locale: string = 'vi-VN', currency: string = 'VND'): string {\r\n  const number = typeof value === 'string' ? parseFloat(value) : value;\r\n\r\n  if (isNaN(number)) return '0 ₫';\r\n\r\n  return new Intl.NumberFormat(locale, {\r\n    style: 'currency',\r\n    currency,\r\n    maximumFractionDigits: 0, // không hiện số lẻ\r\n  }).format(number);\r\n}\r\n"],"names":[],"mappings":";;;AAAA;AAOO,SAAS,eAAe,KAAsB,EAAE,SAAiB,OAAO,EAAE,WAAmB,KAAK;IACvG,MAAM,SAAS,OAAO,UAAU,WAAW,WAAW,SAAS;IAE/D,IAAI,MAAM,SAAS,OAAO;IAE1B,OAAO,IAAI,KAAK,YAAY,CAAC,QAAQ;QACnC,OAAO;QACP;QACA,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ","debugId":null}},
    {"offset": {"line": 3023, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/utils/parseCurrencyString.ts"],"sourcesContent":["'use client';\r\n\r\n/**\r\n * Parse chuỗi tiền (ví dụ '1.250.000 ₫') thành số nguyên 1250000\r\n * @param value - Chuỗi cần parse\r\n * @returns Giá trị số nguyên\r\n */\r\nexport function parseCurrencyString(value: string): number {\r\n  if (!value) return 0;\r\n\r\n  // Xóa toàn bộ dấu chấm, ký tự không phải số\r\n  const numericString = value.replace(/[^\\d]/g, '');\r\n\r\n  const number = parseInt(numericString, 10);\r\n\r\n  return isNaN(number) ? 0 : number;\r\n}\r\n"],"names":[],"mappings":";;;AAAA;AAOO,SAAS,oBAAoB,KAAa;IAC/C,IAAI,CAAC,OAAO,OAAO;IAEnB,4CAA4C;IAC5C,MAAM,gBAAgB,MAAM,OAAO,CAAC,UAAU;IAE9C,MAAM,SAAS,SAAS,eAAe;IAEvC,OAAO,MAAM,UAAU,IAAI;AAC7B","debugId":null}},
    {"offset": {"line": 3040, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/utils/sanitizeFirestoreData.ts"],"sourcesContent":["// utils/sanitizeFirestoreData.ts\r\n\r\nexport function sanitizeFirestoreData(data: Record<string, any>): Record<string, any> {\r\n    return cleanObject(data);\r\n  }\r\n  \r\n  function cleanObject(obj: any): any {\r\n    if (obj === null) return null;\r\n  \r\n    if (Array.isArray(obj)) {\r\n      return obj\r\n        .map((item) => cleanObject(item))\r\n        .filter((item) => item !== undefined);\r\n    }\r\n  \r\n    if (typeof obj === 'object') {\r\n      const cleaned: Record<string, any> = {};\r\n      Object.keys(obj).forEach((key) => {\r\n        const value = obj[key];\r\n  \r\n        if (value === undefined) {\r\n          // ❌ Bỏ qua undefined\r\n          return;\r\n        }\r\n  \r\n        if (typeof value === 'number' && isNaN(value)) {\r\n          // ❌ Bỏ qua NaN\r\n          return;\r\n        }\r\n  \r\n        cleaned[key] = cleanObject(value);\r\n      });\r\n      return cleaned;\r\n    }\r\n  \r\n    return obj;\r\n  }\r\n  "],"names":[],"mappings":"AAAA,iCAAiC;;;;AAE1B,SAAS,sBAAsB,IAAyB;IAC3D,OAAO,YAAY;AACrB;AAEA,SAAS,YAAY,GAAQ;IAC3B,IAAI,QAAQ,MAAM,OAAO;IAEzB,IAAI,MAAM,OAAO,CAAC,MAAM;QACtB,OAAO,IACJ,GAAG,CAAC,CAAC,OAAS,YAAY,OAC1B,MAAM,CAAC,CAAC,OAAS,SAAS;IAC/B;IAEA,IAAI,OAAO,QAAQ,UAAU;QAC3B,MAAM,UAA+B,CAAC;QACtC,OAAO,IAAI,CAAC,KAAK,OAAO,CAAC,CAAC;YACxB,MAAM,QAAQ,GAAG,CAAC,IAAI;YAEtB,IAAI,UAAU,WAAW;gBACvB,qBAAqB;gBACrB;YACF;YAEA,IAAI,OAAO,UAAU,YAAY,MAAM,QAAQ;gBAC7C,eAAe;gBACf;YACF;YAEA,OAAO,CAAC,IAAI,GAAG,YAAY;QAC7B;QACA,OAAO;IACT;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 3076, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/booking/BookingForm.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect } from 'react';\r\nimport { useBookingForm } from '@/src/hooks/useBookingForm';\r\nimport { useUser } from '@/src/context/AuthContext';\r\nimport { Ebike } from '@/src/lib/ebikes/ebikeTypes';\r\nimport { SubscriptionPackage } from '@/src/lib/subscriptionPackages/subscriptionPackagesType';\r\nimport { Input } from '@/src/components/ui/input';\r\nimport { Textarea } from '@/src/components/ui/textarea';\r\nimport { Button } from '@/src/components/ui/button';\r\nimport { format } from 'date-fns';\r\nimport { formatCurrency } from '@/src/utils/formatCurrency';\r\nimport { parseCurrencyString } from '@/src/utils/parseCurrencyString';\r\nimport { sanitizeFirestoreData } from '@/src/utils/sanitizeFirestoreData';\r\n\r\ninterface Props {\r\n  editingBooking: Record<string, any> | null;\r\n  companyNames: Record<string, string>;\r\n  userNames: Record<string, string>;\r\n  packageNames: Record<string, string>;\r\n  packages: SubscriptionPackage[];\r\n  ebikes: Ebike[];\r\n  onSave: (data: Record<string, any>) => void;\r\n  onCancel: () => void;\r\n}\r\n\r\nconst formatDateInput = (date: any) => {\r\n  if (!date) return '';\r\n  let realDate: Date | null = null;\r\n  if (date instanceof Date) realDate = date;\r\n  else if (typeof date?.toDate === 'function') realDate = date.toDate();\r\n  else if (typeof date === 'string' || typeof date === 'number') realDate = new Date(date);\r\n  if (!realDate || isNaN(realDate.getTime())) return '';\r\n  return format(realDate, 'yyyy-MM-dd');\r\n};\r\n\r\nexport default function BookingForm({\r\n  editingBooking,\r\n  companyNames,\r\n  userNames,\r\n  packageNames,\r\n  packages,\r\n  ebikes,\r\n  onSave,\r\n  onCancel,\r\n}: Props) {\r\n  const { companyId, user } = useUser();\r\n  const {\r\n    formData: form,\r\n    handleChange,\r\n    resetForm,\r\n    setFormData,\r\n    stations,\r\n    stationsLoading,\r\n  } = useBookingForm(companyId ?? '', user?.uid ?? '');\r\n\r\n  useEffect(() => {\r\n    if (editingBooking) {\r\n      const { id, createdAt, updatedAt, rentalStartDate, rentalEndDate, ...rest } = editingBooking;\r\n      \r\n      setFormData({\r\n        ...rest,\r\n        rentalStartDate: formatDateInput(rentalStartDate),\r\n        rentalEndDate: formatDateInput(rentalEndDate),\r\n      });\r\n    } else {\r\n      resetForm();\r\n    }\r\n  }, [editingBooking]);\r\n\r\n\r\n  const handleSubmit = () => {\r\n    if (!form.fullName || !form.phone || !form.vehicleModel) {\r\n      alert('Please fill Full Name, Phone, and Vehicle Model.');\r\n      return;\r\n    }\r\n    onSave(sanitizeFirestoreData(form));\r\n  };\r\n\r\n  const handleCurrencyChange = (key: string) => (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    handleChange(key, parseCurrencyString(e.target.value));\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full max-w-[100vw] mx-auto px-6 py-8 bg-white rounded-lg shadow overflow-y-auto max-h-[90vh] space-y-10\">\r\n      <Section title=\"Customer Information\">\r\n        <GridCols>{[\r\n          <Input key=\"name\" placeholder=\"Full Name\" value={form.fullName || ''} onChange={(e) => handleChange('fullName', e.target.value)} />,\r\n          <Input key=\"phone\" placeholder=\"Phone\" value={form.phone || ''} onChange={(e) => handleChange('phone', e.target.value)} />,\r\n          <Input key=\"idnum\" placeholder=\"ID Number\" value={form.idNumber || ''} onChange={(e) => handleChange('idNumber', e.target.value)} />,\r\n          <Input key=\"addr\" placeholder=\"Address\" value={form.address || ''} onChange={(e) => handleChange('address', e.target.value)} />,\r\n        ]}</GridCols>\r\n      </Section>\r\n\r\n      <Section title=\"Vehicle Information\">\r\n        <GridCols>{[\r\n          <Input key=\"model\" placeholder=\"Vehicle Model\" value={form.vehicleModel || ''} onChange={(e) => handleChange('vehicleModel', e.target.value)} />,\r\n          <Input key=\"color\" placeholder=\"Vehicle Color\" value={form.vehicleColor || ''} onChange={(e) => handleChange('vehicleColor', e.target.value)} />,\r\n          <Input key=\"vin\" placeholder=\"VIN\" value={form.vin || ''} onChange={(e) => handleChange('vin', e.target.value)} />,\r\n          <Input key=\"plate\" placeholder=\"License Plate\" value={form.licensePlate || ''} onChange={(e) => handleChange('licensePlate', e.target.value)} />,\r\n        ]}</GridCols>\r\n      </Section>\r\n\r\n      <Section title=\"Rental Period\">\r\n        <GridCols>{[\r\n          <Input\r\n            key=\"date\"\r\n            type=\"date\"\r\n            value={form.rentalStartDate || ''}\r\n            onChange={(e) => handleChange('rentalStartDate', e.target.value)}\r\n          />,\r\n          <Input\r\n            key=\"hour\"\r\n            placeholder=\"Rental Start Hour\"\r\n            value={form.rentalStartHour || ''}\r\n            onChange={(e) => handleChange('rentalStartHour', e.target.value)}\r\n          />,\r\n          <Input\r\n            key=\"days\"\r\n            type=\"number\"\r\n            placeholder=\"Rental Days\"\r\n            value={form.rentalDays || 1}\r\n            onChange={(e) => handleChange('rentalDays', Number(e.target.value))}\r\n          />,\r\n          <Input\r\n            key=\"end\"\r\n            type=\"date\"\r\n            value={form.rentalEndDate || ''}\r\n            readOnly\r\n          />,\r\n        ]}</GridCols>\r\n      </Section>\r\n\r\n\r\n      <Section title=\"Pricing & Deposit\">\r\n        <GridCols>{[\r\n          <div key=\"pkg\" className=\"space-y-1\">\r\n            <label className=\"text-sm text-gray-600 font-medium\">Rental package</label>\r\n            <select\r\n              className=\"border p-2 rounded w-full\"\r\n              value={form.package || ''}\r\n              onChange={(e) => handleChange('package', e.target.value)}\r\n            >\r\n              <option value=\"\">Select Package</option>\r\n              {Object.entries(packageNames).map(([id, name]) => (\r\n                <option key={id} value={id}>{name}</option>\r\n              ))}\r\n            </select>\r\n          </div>,\r\n\r\n          <div key=\"base\" className=\"space-y-1\">\r\n            <label className=\"text-sm text-gray-600 font-medium\">Base rental price (₫/day)</label>\r\n            <Input value={formatCurrency(form.basePrice)} onChange={handleCurrencyChange('basePrice')} />\r\n          </div>,\r\n\r\n          <div key=\"fee\" className=\"space-y-1\">\r\n            <label className=\"text-sm text-gray-600 font-medium\">Battery rental fee (₫)</label>\r\n            <Input value={formatCurrency(form.batteryFee || 0)} onChange={handleCurrencyChange('batteryFee')} />\r\n          </div>,\r\n\r\n          <div key=\"total\" className=\"space-y-1\">\r\n            <label className=\"text-sm text-gray-600 font-medium\">Total amount (auto-calculated)</label>\r\n            <Input value={formatCurrency(form.totalAmount)} readOnly className=\"bg-gray-100 text-gray-600 font-semibold\" />\r\n          </div>,\r\n\r\n          <div key=\"deposit\" className=\"space-y-1\">\r\n            <label className=\"text-sm text-gray-600 font-medium\">Deposit amount (₫)</label>\r\n            <Input value={formatCurrency(form.deposit)} onChange={handleCurrencyChange('deposit')} />\r\n          </div>,\r\n\r\n          <div key=\"remain\" className=\"space-y-1\">\r\n            <label className=\"text-sm text-gray-600 font-medium\">Remaining balance (auto-calculated)</label>\r\n            <Input value={formatCurrency(form.remainingBalance)} readOnly className=\"bg-gray-100 text-gray-600 font-semibold\" />\r\n          </div>,\r\n        ]}</GridCols>\r\n      </Section>\r\n\r\n\r\n      <Section title=\"Accessories\">\r\n        <GridCols>{[\r\n          <Checkbox label=\"Helmet\" value={form.helmet} onChange={(v) => handleChange('helmet', v)} />,\r\n          <Checkbox label=\"Charger\" value={form.charger} onChange={(v) => handleChange('charger', v)} />,\r\n          <Checkbox label=\"Rear Rack\" value={form.rearRack} onChange={(v) => handleChange('rearRack', v)} />,\r\n          <Checkbox label=\"Phone Holder\" value={form.phoneHolder} onChange={(v) => handleChange('phoneHolder', v)} />,\r\n          <Checkbox label=\"Raincoat\" value={form.raincoat} onChange={(v) => handleChange('raincoat', v)} />,\r\n        ]}</GridCols>\r\n      </Section>\r\n\r\n      <Section title=\"Battery Info\">\r\n        <GridCols>{[\r\n          <Input key=\"b1\" placeholder=\"Battery Code 1\" value={form.batteryCode1 || ''} onChange={(e) => handleChange('batteryCode1', e.target.value)} />,\r\n          <Input key=\"b2\" placeholder=\"Battery Code 2\" value={form.batteryCode2 || ''} onChange={(e) => handleChange('batteryCode2', e.target.value)} />,\r\n          <Input key=\"b3\" placeholder=\"Battery Code 3\" value={form.batteryCode3 || ''} onChange={(e) => handleChange('batteryCode3', e.target.value)} />,\r\n          <Input key=\"b4\" placeholder=\"Battery Code 4\" value={form.batteryCode4 || ''} onChange={(e) => handleChange('batteryCode4', e.target.value)} />,\r\n        ]}</GridCols>\r\n      </Section>\r\n\r\n      <Section title=\"Rental Method\">\r\n        <GridCols>{[\r\n          <select key=\"method\" className=\"border p-2 rounded\" value={form.deliveryMethod || ''} onChange={(e) => handleChange('deliveryMethod', e.target.value)}>\r\n            <option value=\"\">Select Method</option>\r\n            <option value=\"Pickup at Shop\">Pickup at Shop</option>\r\n            <option value=\"Deliver to Address\">Deliver to Address</option>\r\n          </select>,\r\n          form.deliveryMethod === 'Deliver to Address' && (\r\n            <Textarea key=\"addr\" placeholder=\"Delivery Address\" value={form.deliveryAddress || ''} onChange={(e) => handleChange('deliveryAddress', e.target.value)} />\r\n          ),\r\n        ]}</GridCols>\r\n      </Section>\r\n\r\n      <Section title=\"Station\">\r\n        <GridCols>\r\n          {stationsLoading\r\n            ? [<p key=\"loading\">Loading stations...</p>]\r\n            : [\r\n                <select\r\n                  key=\"stationSelect\"\r\n                  className=\"border p-2 rounded w-full\"\r\n                  value={form.stationId || ''}\r\n                  onChange={(e) => handleChange('stationId', e.target.value)}\r\n                >\r\n                  <option value=\"\">Select Station</option>\r\n                  {stations.map((station) => (\r\n                    <option key={station.id} value={station.id}>\r\n                      {station.name}\r\n                    </option>\r\n                  ))}\r\n                </select>,\r\n              ]}\r\n        </GridCols>\r\n      </Section>\r\n\r\n\r\n      <Section title=\"Notes\">\r\n        <Textarea placeholder=\"Additional Notes\" value={form.note || ''} onChange={(e) => handleChange('note', e.target.value)} />\r\n      </Section>\r\n\r\n      <Section title=\"Update Status For The Booking (Company Admin & Company Owner)\">\r\n        <GridCols>{[\r\n          <div key=\"status\" className=\"space-y-1\">\r\n            <label className=\"text-sm text-gray-600 font-medium\">Status</label>\r\n            <select\r\n              className=\"border p-2 rounded w-full\"\r\n              value={form.bookingStatus || 'draft'}\r\n              onChange={(e) => handleChange('bookingStatus', e.target.value)}\r\n            >\r\n              <option value=\"draft\">Draft</option>\r\n              <option value=\"confirmed\">Confirmed</option>\r\n              <option value=\"completed\">Completed</option>\r\n              <option value=\"cancelled\">Cancelled</option>\r\n            </select>\r\n          </div>,\r\n\r\n          <div key=\"statusNote\" className=\"space-y-1 col-span-3\">\r\n            <label className=\"text-sm text-gray-600 font-medium\">Status Note (optional)</label>\r\n            <Textarea\r\n              placeholder=\"Enter comment for status change...\"\r\n              value={form.statusComment || ''}\r\n              onChange={(e) => handleChange('statusComment', e.target.value)}\r\n            />\r\n          </div>,\r\n        ]}</GridCols>\r\n      </Section>\r\n\r\n\r\n      <div className=\"flex justify-end gap-4 pt-4\">\r\n        <Button onClick={handleSubmit}>Save</Button>\r\n        <Button variant=\"outline\" onClick={onCancel}>Cancel</Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Section({ title, children }: { title: string; children: React.ReactNode }) {\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <h3 className=\"text-xl font-semibold\">{title}</h3>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function GridCols({ children }: { children: React.ReactNode | React.ReactNode[] }) {\r\n  const arrayChildren = Array.isArray(children) ? children : [children];\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-4 gap-4\">\r\n      {arrayChildren.filter(Boolean).map((child, index) => (\r\n        <div key={index}>{child}</div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\nfunction Checkbox({ label, value, onChange }: { label: string; value: boolean; onChange: (v: boolean) => void }) {\r\n  return (\r\n    <label className=\"flex items-center gap-2\">\r\n      <input type=\"checkbox\" checked={value || false} onChange={(e) => onChange(e.target.checked)} />\r\n      {label}\r\n    </label>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3918, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/utils/safeFormatDate.ts"],"sourcesContent":["// utils/safeFormatDate.ts\r\nimport { format } from \"date-fns\";\r\n\r\nexport function safeFormatDate(value: any, formatStr = \"dd/MM/yyyy\") {\r\n  if (!value) return \"N/A\";\r\n\r\n  let date: Date | null = null;\r\n\r\n  if (typeof value?.toDate === \"function\") {\r\n    date = value.toDate();\r\n  } else if (value instanceof Date) {\r\n    date = value;\r\n  } else if (typeof value === \"string\" || typeof value === \"number\") {\r\n    date = new Date(value);\r\n  }\r\n\r\n  if (!date || isNaN(date.getTime())) return \"N/A\";\r\n\r\n  return format(date, formatStr);\r\n}\r\n"],"names":[],"mappings":"AAAA,0BAA0B;;;;AAC1B;;AAEO,SAAS,eAAe,KAAU,EAAE,YAAY,YAAY;IACjE,IAAI,CAAC,OAAO,OAAO;IAEnB,IAAI,OAAoB;IAExB,IAAI,OAAO,OAAO,WAAW,YAAY;QACvC,OAAO,MAAM,MAAM;IACrB,OAAO,IAAI,iBAAiB,MAAM;QAChC,OAAO;IACT,OAAO,IAAI,OAAO,UAAU,YAAY,OAAO,UAAU,UAAU;QACjE,OAAO,IAAI,KAAK;IAClB;IAEA,IAAI,CAAC,QAAQ,MAAM,KAAK,OAAO,KAAK,OAAO;IAE3C,OAAO,CAAA,GAAA,qJAAA,CAAA,SAAM,AAAD,EAAE,MAAM;AACtB","debugId":null}},
    {"offset": {"line": 3943, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/booking/BookingTable.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { Booking } from '@/src/lib/booking/BookingTypes';\r\nimport { Button } from '@/src/components/ui/button';\r\nimport { formatCurrency } from '@/src/utils/formatCurrency';\r\nimport { safeFormatDate } from '@/src/utils/safeFormatDate';\r\nimport { Truck } from 'lucide-react';\r\n\r\ninterface Props {\r\n  bookings: Booking[];\r\n  stationNames: Record<string, string>;\r\n  companyNames: Record<string, string>;\r\n  packageNames: Record<string, string>;\r\n  userNames: Record<string, string>;\r\n  onEdit: (booking: Booking) => void;\r\n  onDelete: (id: string) => void;\r\n}\r\n\r\nexport default function BookingTable({\r\n  bookings,\r\n  stationNames,\r\n  companyNames,\r\n  packageNames,\r\n  userNames,\r\n  onEdit,\r\n  onDelete,\r\n}: Props) {\r\n  if (!bookings.length) {\r\n    return <div className=\"text-center text-gray-500 p-8\">No bookings found.</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-xl shadow p-4 overflow-x-auto mt-6\">\r\n      <table className=\"min-w-full text-sm border border-gray-200\">\r\n        <thead className=\"bg-gray-100 text-gray-700\">\r\n          <tr>\r\n            <th className=\"px-3 py-2 border min-w-[120px]\">Customer</th>\r\n            <th className=\"px-3 py-2 border min-w-[190px]\">Vehicle Info</th>\r\n            <th className=\"px-3 py-2 border min-w-[160px]\">Pricing</th>\r\n            <th className=\"px-3 py-2 border\">Rental Period</th>\r\n            <th className=\"px-3 py-2 border min-w-[160px]\">Rental Method</th>\r\n            <th className=\"px-3 py-2 border\">Accessories</th>\r\n            <th className=\"px-3 py-2 border min-w-[160px]\">Battery Info</th>\r\n            <th className=\"px-3 py-2 border min-w-[200px]\">Notes</th>\r\n            <th className=\"px-3 py-2 border min-w-[160px]\">Station</th>\r\n            <th className=\"px-3 py-2 border\">Created By</th>\r\n            <th className=\"px-3 py-2 border\">Booked At</th>\r\n            <th className=\"px-3 py-2 border\">Status</th>\r\n            <th className=\"px-3 py-2 border min-w-[200px]\">Status Comment</th>\r\n            <th className=\"px-3 py-2 border\">Actions</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n          {[...bookings]\r\n          .sort((a, b) => b.createdAt?.seconds - a.createdAt?.seconds)\r\n          .map((b) => (\r\n            <tr key={b.id} className=\"hover:bg-gray-50\">\r\n              <td className=\"px-3 py-3 border align-top\">\r\n                <div className=\"font-semibold\">{b.fullName}</div>\r\n                <div className=\"text-xs text-gray-600\">{b.phone}</div>\r\n                <div className=\"text-xs text-gray-600\">{b.idNumber}</div>\r\n              </td>\r\n\r\n              <td className=\"px-3 py-3 border align-top\">\r\n                <div className=\"font-medium\">{b.vehicleModel}</div>\r\n                <div className=\"text-xs text-gray-600\">VIN: {b.vin || 'N/A'}</div>\r\n                <div className=\"text-xs text-gray-600\">Plate: {b.licensePlate || 'N/A'}</div>\r\n              </td>\r\n\r\n              <td className=\"px-3 py-3 border align-top\">\r\n                <div className=\"text-green-600 font-bold text-lg\">{formatCurrency(b.totalAmount)}</div>\r\n                <div className=\"text-xs text-gray-600\">Package: {packageNames[b.package ?? ''] || 'N/A'}</div>\r\n                <div className=\"text-xs text-gray-600\">Deposit: {formatCurrency(b.deposit)}</div>\r\n                <div className=\"text-xs text-gray-600\">Remaining: {formatCurrency(b.remainingBalance)}</div>\r\n              </td>\r\n\r\n              <td className=\"px-3 py-3 border align-top\">\r\n                <div className=\"text-xs text-gray-600\">\r\n                  {safeFormatDate(b.rentalStartDate)} → {safeFormatDate(b.rentalEndDate)}\r\n                </div>\r\n                <div className=\"text-xs text-gray-500\">({b.rentalDays ?? 'N/A'} days)</div>\r\n              </td>\r\n\r\n              <td className=\"px-3 py-3 border align-top\">\r\n                <div className=\"flex items-center gap-1\">\r\n                  <Truck className=\"h-4 w-4 text-blue-600\" />\r\n                  {b.deliveryMethod}\r\n                </div>\r\n                {b.deliveryMethod === 'Deliver to Address' && b.deliveryAddress && (\r\n                  <div className=\"text-xs text-gray-600 ml-6\">{b.deliveryAddress}</div>\r\n                )}\r\n              </td>\r\n\r\n              <td className=\"px-3 py-3 border align-top text-xs text-gray-700\">\r\n                {b.helmet && <div>✔ Helmet</div>}\r\n                {b.charger && <div>✔ Charger</div>}\r\n                {b.phoneHolder && <div>✔ Phone Holder</div>}\r\n                {b.rearRack && <div>✔ Rear Rack</div>}\r\n                {b.raincoat && <div>✔ Raincoat</div>}\r\n                {!b.helmet && !b.charger && !b.phoneHolder && !b.rearRack && !b.raincoat && (\r\n                  <div className=\"italic text-gray-400\">None</div>\r\n                )}\r\n              </td>\r\n\r\n              <td className=\"px-3 py-3 border align-top text-xs text-gray-700\">\r\n                {[b.batteryCode1, b.batteryCode2, b.batteryCode3, b.batteryCode4].filter(Boolean).length > 0 ? (\r\n                  <>\r\n                    {b.batteryCode1 && <div>🔋 {b.batteryCode1}</div>}\r\n                    {b.batteryCode2 && <div>🔋 {b.batteryCode2}</div>}\r\n                    {b.batteryCode3 && <div>🔋 {b.batteryCode3}</div>}\r\n                    {b.batteryCode4 && <div>🔋 {b.batteryCode4}</div>}\r\n                  </>\r\n                ) : (\r\n                  <div className=\"italic text-gray-400\">No Batteries</div>\r\n                )}\r\n              </td>\r\n\r\n              <td className=\"px-3 py-3 border align-top text-xs text-gray-700\">\r\n                {b.note || <div className=\"italic text-gray-400\">No Notes</div>}\r\n              </td>\r\n\r\n              <td className=\"px-3 py-3 border align-top\">\r\n                <div className=\"font-medium\">{stationNames[b.stationId ?? ''] || 'N/A'}</div>\r\n                <div className=\"text-xs text-gray-600\">{companyNames[b.companyId ?? ''] || 'N/A'}</div>\r\n              </td>\r\n\r\n              <td className=\"px-3 py-3 border align-top text-xs text-gray-600\">\r\n                {b.userId ? userNames[b.userId] || 'Unknown User' : <div className=\"italic text-gray-400\">Unknown</div>}\r\n              </td>\r\n\r\n              <td className=\"px-3 py-3 border align-top text-xs text-gray-600\">\r\n                {safeFormatDate(b.createdAt, 'dd/MM/yyyy HH:mm')}\r\n              </td>\r\n\r\n              <td className=\"px-3 py-3 border align-top text-xs font-medium text-center\">\r\n                <span className=\"inline-block px-2 py-1 rounded-full text-white text-xs\"\r\n                  style={{\r\n                    backgroundColor:\r\n                      b.bookingStatus === 'confirmed'\r\n                        ? '#22c55e'\r\n                        : b.bookingStatus === 'cancelled'\r\n                        ? '#ef4444'\r\n                        : b.bookingStatus === 'completed'\r\n                        ? '#3b82f6'\r\n                        : '#f59e0b', // default: draft/pending\r\n                  }}\r\n                >\r\n                  {b.bookingStatus ?? 'draft'}\r\n                </span>\r\n              </td>\r\n              \r\n              <td className=\"px-3 py-3 border align-top text-xs text-gray-700 whitespace-pre-wrap\">\r\n                {b.statusComment || <span className=\"italic text-gray-400\">No Comment</span>}\r\n              </td>\r\n              \r\n              <td className=\"px-3 py-3 border align-top\">\r\n                <div className=\"flex flex-col gap-2\">\r\n                  <Button size=\"sm\" onClick={() => onEdit(b)} className=\"bg-[#00d289] hover:bg-green-600 text-white\">Update</Button>\r\n                  <Button size=\"sm\" variant=\"destructive\" onClick={() => onDelete(b.id)}>Delete</Button>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n        ))}\r\n\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AACA;AANA;;;;;;AAkBe,SAAS,aAAa,EACnC,QAAQ,EACR,YAAY,EACZ,YAAY,EACZ,YAAY,EACZ,SAAS,EACT,MAAM,EACN,QAAQ,EACF;IACN,IAAI,CAAC,SAAS,MAAM,EAAE;QACpB,qBAAO,8OAAC;YAAI,WAAU;sBAAgC;;;;;;IACxD;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAM,WAAU;;8BACf,8OAAC;oBAAM,WAAU;8BACf,cAAA,8OAAC;;0CACC,8OAAC;gCAAG,WAAU;0CAAiC;;;;;;0CAC/C,8OAAC;gCAAG,WAAU;0CAAiC;;;;;;0CAC/C,8OAAC;gCAAG,WAAU;0CAAiC;;;;;;0CAC/C,8OAAC;gCAAG,WAAU;0CAAmB;;;;;;0CACjC,8OAAC;gCAAG,WAAU;0CAAiC;;;;;;0CAC/C,8OAAC;gCAAG,WAAU;0CAAmB;;;;;;0CACjC,8OAAC;gCAAG,WAAU;0CAAiC;;;;;;0CAC/C,8OAAC;gCAAG,WAAU;0CAAiC;;;;;;0CAC/C,8OAAC;gCAAG,WAAU;0CAAiC;;;;;;0CAC/C,8OAAC;gCAAG,WAAU;0CAAmB;;;;;;0CACjC,8OAAC;gCAAG,WAAU;0CAAmB;;;;;;0CACjC,8OAAC;gCAAG,WAAU;0CAAmB;;;;;;0CACjC,8OAAC;gCAAG,WAAU;0CAAiC;;;;;;0CAC/C,8OAAC;gCAAG,WAAU;0CAAmB;;;;;;;;;;;;;;;;;8BAIrC,8OAAC;8BACE;2BAAI;qBAAS,CACb,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,SAAS,EAAE,UAAU,EAAE,SAAS,EAAE,SACnD,GAAG,CAAC,CAAC,kBACJ,8OAAC;4BAAc,WAAU;;8CACvB,8OAAC;oCAAG,WAAU;;sDACZ,8OAAC;4CAAI,WAAU;sDAAiB,EAAE,QAAQ;;;;;;sDAC1C,8OAAC;4CAAI,WAAU;sDAAyB,EAAE,KAAK;;;;;;sDAC/C,8OAAC;4CAAI,WAAU;sDAAyB,EAAE,QAAQ;;;;;;;;;;;;8CAGpD,8OAAC;oCAAG,WAAU;;sDACZ,8OAAC;4CAAI,WAAU;sDAAe,EAAE,YAAY;;;;;;sDAC5C,8OAAC;4CAAI,WAAU;;gDAAwB;gDAAM,EAAE,GAAG,IAAI;;;;;;;sDACtD,8OAAC;4CAAI,WAAU;;gDAAwB;gDAAQ,EAAE,YAAY,IAAI;;;;;;;;;;;;;8CAGnE,8OAAC;oCAAG,WAAU;;sDACZ,8OAAC;4CAAI,WAAU;sDAAoC,CAAA,GAAA,8HAAA,CAAA,iBAAc,AAAD,EAAE,EAAE,WAAW;;;;;;sDAC/E,8OAAC;4CAAI,WAAU;;gDAAwB;gDAAU,YAAY,CAAC,EAAE,OAAO,IAAI,GAAG,IAAI;;;;;;;sDAClF,8OAAC;4CAAI,WAAU;;gDAAwB;gDAAU,CAAA,GAAA,8HAAA,CAAA,iBAAc,AAAD,EAAE,EAAE,OAAO;;;;;;;sDACzE,8OAAC;4CAAI,WAAU;;gDAAwB;gDAAY,CAAA,GAAA,8HAAA,CAAA,iBAAc,AAAD,EAAE,EAAE,gBAAgB;;;;;;;;;;;;;8CAGtF,8OAAC;oCAAG,WAAU;;sDACZ,8OAAC;4CAAI,WAAU;;gDACZ,CAAA,GAAA,8HAAA,CAAA,iBAAc,AAAD,EAAE,EAAE,eAAe;gDAAE;gDAAI,CAAA,GAAA,8HAAA,CAAA,iBAAc,AAAD,EAAE,EAAE,aAAa;;;;;;;sDAEvE,8OAAC;4CAAI,WAAU;;gDAAwB;gDAAE,EAAE,UAAU,IAAI;gDAAM;;;;;;;;;;;;;8CAGjE,8OAAC;oCAAG,WAAU;;sDACZ,8OAAC;4CAAI,WAAU;;8DACb,8OAAC,oMAAA,CAAA,QAAK;oDAAC,WAAU;;;;;;gDAChB,EAAE,cAAc;;;;;;;wCAElB,EAAE,cAAc,KAAK,wBAAwB,EAAE,eAAe,kBAC7D,8OAAC;4CAAI,WAAU;sDAA8B,EAAE,eAAe;;;;;;;;;;;;8CAIlE,8OAAC;oCAAG,WAAU;;wCACX,EAAE,MAAM,kBAAI,8OAAC;sDAAI;;;;;;wCACjB,EAAE,OAAO,kBAAI,8OAAC;sDAAI;;;;;;wCAClB,EAAE,WAAW,kBAAI,8OAAC;sDAAI;;;;;;wCACtB,EAAE,QAAQ,kBAAI,8OAAC;sDAAI;;;;;;wCACnB,EAAE,QAAQ,kBAAI,8OAAC;sDAAI;;;;;;wCACnB,CAAC,EAAE,MAAM,IAAI,CAAC,EAAE,OAAO,IAAI,CAAC,EAAE,WAAW,IAAI,CAAC,EAAE,QAAQ,IAAI,CAAC,EAAE,QAAQ,kBACtE,8OAAC;4CAAI,WAAU;sDAAuB;;;;;;;;;;;;8CAI1C,8OAAC;oCAAG,WAAU;8CACX;wCAAC,EAAE,YAAY;wCAAE,EAAE,YAAY;wCAAE,EAAE,YAAY;wCAAE,EAAE,YAAY;qCAAC,CAAC,MAAM,CAAC,SAAS,MAAM,GAAG,kBACzF;;4CACG,EAAE,YAAY,kBAAI,8OAAC;;oDAAI;oDAAI,EAAE,YAAY;;;;;;;4CACzC,EAAE,YAAY,kBAAI,8OAAC;;oDAAI;oDAAI,EAAE,YAAY;;;;;;;4CACzC,EAAE,YAAY,kBAAI,8OAAC;;oDAAI;oDAAI,EAAE,YAAY;;;;;;;4CACzC,EAAE,YAAY,kBAAI,8OAAC;;oDAAI;oDAAI,EAAE,YAAY;;;;;;;;qEAG5C,8OAAC;wCAAI,WAAU;kDAAuB;;;;;;;;;;;8CAI1C,8OAAC;oCAAG,WAAU;8CACX,EAAE,IAAI,kBAAI,8OAAC;wCAAI,WAAU;kDAAuB;;;;;;;;;;;8CAGnD,8OAAC;oCAAG,WAAU;;sDACZ,8OAAC;4CAAI,WAAU;sDAAe,YAAY,CAAC,EAAE,SAAS,IAAI,GAAG,IAAI;;;;;;sDACjE,8OAAC;4CAAI,WAAU;sDAAyB,YAAY,CAAC,EAAE,SAAS,IAAI,GAAG,IAAI;;;;;;;;;;;;8CAG7E,8OAAC;oCAAG,WAAU;8CACX,EAAE,MAAM,GAAG,SAAS,CAAC,EAAE,MAAM,CAAC,IAAI,+BAAiB,8OAAC;wCAAI,WAAU;kDAAuB;;;;;;;;;;;8CAG5F,8OAAC;oCAAG,WAAU;8CACX,CAAA,GAAA,8HAAA,CAAA,iBAAc,AAAD,EAAE,EAAE,SAAS,EAAE;;;;;;8CAG/B,8OAAC;oCAAG,WAAU;8CACZ,cAAA,8OAAC;wCAAK,WAAU;wCACd,OAAO;4CACL,iBACE,EAAE,aAAa,KAAK,cAChB,YACA,EAAE,aAAa,KAAK,cACpB,YACA,EAAE,aAAa,KAAK,cACpB,YACA;wCACR;kDAEC,EAAE,aAAa,IAAI;;;;;;;;;;;8CAIxB,8OAAC;oCAAG,WAAU;8CACX,EAAE,aAAa,kBAAI,8OAAC;wCAAK,WAAU;kDAAuB;;;;;;;;;;;8CAG7D,8OAAC;oCAAG,WAAU;8CACZ,cAAA,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,kIAAA,CAAA,SAAM;gDAAC,MAAK;gDAAK,SAAS,IAAM,OAAO;gDAAI,WAAU;0DAA6C;;;;;;0DACnG,8OAAC,kIAAA,CAAA,SAAM;gDAAC,MAAK;gDAAK,SAAQ;gDAAc,SAAS,IAAM,SAAS,EAAE,EAAE;0DAAG;;;;;;;;;;;;;;;;;;2BAtGpE,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;AAgHzB","debugId":null}},
    {"offset": {"line": 4571, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/ui/card.tsx"],"sourcesContent":["// Card Component\r\nimport { ReactNode } from 'react';\r\n\r\ninterface CardProps {\r\n  className?: string;\r\n  children: ReactNode;\r\n}\r\n\r\nexport const Card = ({ className = '', children }: CardProps) => {\r\n  return <div className={`bg-white rounded-xl shadow p-4 ${className}`}>{children}</div>;\r\n};\r\n\r\nexport const CardContent = ({ className = '', children }: CardProps) => {\r\n  return <div className={className}>{children}</div>;\r\n};\r\n"],"names":[],"mappings":"AAAA,iBAAiB;;;;;;;AAQV,MAAM,OAAO,CAAC,EAAE,YAAY,EAAE,EAAE,QAAQ,EAAa;IAC1D,qBAAO,8OAAC;QAAI,WAAW,CAAC,+BAA+B,EAAE,WAAW;kBAAG;;;;;;AACzE;AAEO,MAAM,cAAc,CAAC,EAAE,YAAY,EAAE,EAAE,QAAQ,EAAa;IACjE,qBAAO,8OAAC;QAAI,WAAW;kBAAY;;;;;;AACrC","debugId":null}},
    {"offset": {"line": 4604, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/booking/BookingSummaryCards.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { Booking } from '@/src/lib/booking/BookingTypes';\r\nimport { Card, CardContent } from '@/src/components/ui/card';\r\nimport { formatCurrency } from '@/src/utils/formatCurrency'; // nếu chưa có mình gửi\r\n\r\ninterface Props {\r\n  bookings: Booking[];\r\n}\r\n\r\nexport default function BookingSummaryCards({ bookings }: Props) {\r\n  const totalBookings = bookings.length;\r\n  const totalAmount = bookings.reduce((sum, b) => sum + (b.totalAmount || 0), 0);\r\n\r\n  const today = new Date();\r\n  const todayBookings = bookings.filter((b) => {\r\n    if (!b.createdAt) return false;\r\n    const bookingDate = b.createdAt.toDate();\r\n    return (\r\n      bookingDate.getFullYear() === today.getFullYear() &&\r\n      bookingDate.getMonth() === today.getMonth() &&\r\n      bookingDate.getDate() === today.getDate()\r\n    );\r\n  }).length;\r\n\r\n  const cancelledBookings = bookings.filter((b) => b.bookingStatus === 'cancelled').length;\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\r\n      <Card>\r\n        <CardContent className=\"p-6\">\r\n          <h3 className=\"text-sm font-medium text-gray-500 mb-1\">Total Bookings</h3>\r\n          <div className=\"text-2xl font-bold\">{totalBookings}</div>\r\n        </CardContent>\r\n      </Card>\r\n      <Card>\r\n        <CardContent className=\"p-6\">\r\n          <h3 className=\"text-sm font-medium text-gray-500 mb-1\">Total Revenue</h3>\r\n          <div className=\"text-2xl font-bold\">{formatCurrency(totalAmount)}</div>\r\n        </CardContent>\r\n      </Card>\r\n      <Card>\r\n        <CardContent className=\"p-6\">\r\n          <h3 className=\"text-sm font-medium text-gray-500 mb-1\">Today's Bookings</h3>\r\n          <div className=\"text-2xl font-bold\">{todayBookings}</div>\r\n        </CardContent>\r\n      </Card>\r\n      <Card>\r\n        <CardContent className=\"p-6\">\r\n          <h3 className=\"text-sm font-medium text-gray-500 mb-1\">Cancelled Bookings</h3>\r\n          <div className=\"text-2xl font-bold\">{cancelledBookings}</div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAGA;AACA,8NAA6D,uBAAuB;AAJpF;;;;AAUe,SAAS,oBAAoB,EAAE,QAAQ,EAAS;IAC7D,MAAM,gBAAgB,SAAS,MAAM;IACrC,MAAM,cAAc,SAAS,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,EAAE,WAAW,IAAI,CAAC,GAAG;IAE5E,MAAM,QAAQ,IAAI;IAClB,MAAM,gBAAgB,SAAS,MAAM,CAAC,CAAC;QACrC,IAAI,CAAC,EAAE,SAAS,EAAE,OAAO;QACzB,MAAM,cAAc,EAAE,SAAS,CAAC,MAAM;QACtC,OACE,YAAY,WAAW,OAAO,MAAM,WAAW,MAC/C,YAAY,QAAQ,OAAO,MAAM,QAAQ,MACzC,YAAY,OAAO,OAAO,MAAM,OAAO;IAE3C,GAAG,MAAM;IAET,MAAM,oBAAoB,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,aAAa,KAAK,aAAa,MAAM;IAExF,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,gIAAA,CAAA,OAAI;0BACH,cAAA,8OAAC,gIAAA,CAAA,cAAW;oBAAC,WAAU;;sCACrB,8OAAC;4BAAG,WAAU;sCAAyC;;;;;;sCACvD,8OAAC;4BAAI,WAAU;sCAAsB;;;;;;;;;;;;;;;;;0BAGzC,8OAAC,gIAAA,CAAA,OAAI;0BACH,cAAA,8OAAC,gIAAA,CAAA,cAAW;oBAAC,WAAU;;sCACrB,8OAAC;4BAAG,WAAU;sCAAyC;;;;;;sCACvD,8OAAC;4BAAI,WAAU;sCAAsB,CAAA,GAAA,8HAAA,CAAA,iBAAc,AAAD,EAAE;;;;;;;;;;;;;;;;;0BAGxD,8OAAC,gIAAA,CAAA,OAAI;0BACH,cAAA,8OAAC,gIAAA,CAAA,cAAW;oBAAC,WAAU;;sCACrB,8OAAC;4BAAG,WAAU;sCAAyC;;;;;;sCACvD,8OAAC;4BAAI,WAAU;sCAAsB;;;;;;;;;;;;;;;;;0BAGzC,8OAAC,gIAAA,CAAA,OAAI;0BACH,cAAA,8OAAC,gIAAA,CAAA,cAAW;oBAAC,WAAU;;sCACrB,8OAAC;4BAAG,WAAU;sCAAyC;;;;;;sCACvD,8OAAC;4BAAI,WAAU;sCAAsB;;;;;;;;;;;;;;;;;;;;;;;AAK/C","debugId":null}},
    {"offset": {"line": 4764, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/booking/BookingSearchFilter.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { Input } from '@/src/components/ui/input';\r\nimport { Button } from '@/src/components/ui/button';\r\n\r\ninterface Props {\r\n  onSearchChange: (searchText: string) => void;\r\n  onStatusFilterChange: (status: string) => void;\r\n  onDateRangeChange: (startDate: string, endDate: string) => void;\r\n}\r\n\r\n// ✅ Đã thêm trạng thái \"Returned\"\r\nconst statusOptions = ['All', 'Draft', 'Confirmed', 'Returned', 'Completed', 'Cancelled'];\r\n\r\nexport default function BookingSearchFilter({\r\n  onSearchChange,\r\n  onStatusFilterChange,\r\n  onDateRangeChange,\r\n}: Props) {\r\n  const [searchText, setSearchText] = useState('');\r\n  const [selectedStatus, setSelectedStatus] = useState('All');\r\n  const [startDate, setStartDate] = useState('');\r\n  const [endDate, setEndDate] = useState('');\r\n\r\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const text = e.target.value;\r\n    setSearchText(text);\r\n    onSearchChange(text);\r\n  };\r\n\r\n  const handleStatusChange = (status: string) => {\r\n    setSelectedStatus(status);\r\n    onStatusFilterChange(status);\r\n  };\r\n\r\n  const handleStartDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const value = e.target.value;\r\n    setStartDate(value);\r\n    onDateRangeChange(value, endDate);\r\n  };\r\n\r\n  const handleEndDateChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const value = e.target.value;\r\n    setEndDate(value);\r\n    onDateRangeChange(startDate, value);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4 mb-6\">\r\n      {/* Row 1: Search + From Date + To Date */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\r\n        <Input\r\n          placeholder=\"Search by name, phone, or VIN...\"\r\n          value={searchText}\r\n          onChange={handleSearchChange}\r\n          className=\"w-full\"\r\n        />\r\n        <Input type=\"date\" value={startDate} onChange={handleStartDateChange} className=\"w-full\" />\r\n        <Input type=\"date\" value={endDate} onChange={handleEndDateChange} className=\"w-full\" />\r\n      </div>\r\n\r\n      {/* Row 2: Status Filter Buttons */}\r\n      <div className=\"flex flex-wrap gap-2\">\r\n        {statusOptions.map((status) => (\r\n          <Button\r\n            key={status}\r\n            variant={selectedStatus === status ? 'default' : 'outline'}\r\n            onClick={() => handleStatusChange(status)}\r\n          >\r\n            {status}\r\n          </Button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAYA,kCAAkC;AAClC,MAAM,gBAAgB;IAAC;IAAO;IAAS;IAAa;IAAY;IAAa;CAAY;AAE1E,SAAS,oBAAoB,EAC1C,cAAc,EACd,oBAAoB,EACpB,iBAAiB,EACX;IACN,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACrD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,MAAM,qBAAqB,CAAC;QAC1B,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK;QAC3B,cAAc;QACd,eAAe;IACjB;IAEA,MAAM,qBAAqB,CAAC;QAC1B,kBAAkB;QAClB,qBAAqB;IACvB;IAEA,MAAM,wBAAwB,CAAC;QAC7B,MAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;QAC5B,aAAa;QACb,kBAAkB,OAAO;IAC3B;IAEA,MAAM,sBAAsB,CAAC;QAC3B,MAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;QAC5B,WAAW;QACX,kBAAkB,WAAW;IAC/B;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,iIAAA,CAAA,QAAK;wBACJ,aAAY;wBACZ,OAAO;wBACP,UAAU;wBACV,WAAU;;;;;;kCAEZ,8OAAC,iIAAA,CAAA,QAAK;wBAAC,MAAK;wBAAO,OAAO;wBAAW,UAAU;wBAAuB,WAAU;;;;;;kCAChF,8OAAC,iIAAA,CAAA,QAAK;wBAAC,MAAK;wBAAO,OAAO;wBAAS,UAAU;wBAAqB,WAAU;;;;;;;;;;;;0BAI9E,8OAAC;gBAAI,WAAU;0BACZ,cAAc,GAAG,CAAC,CAAC,uBAClB,8OAAC,kIAAA,CAAA,SAAM;wBAEL,SAAS,mBAAmB,SAAS,YAAY;wBACjD,SAAS,IAAM,mBAAmB;kCAEjC;uBAJI;;;;;;;;;;;;;;;;AAUjB","debugId":null}},
    {"offset": {"line": 4880, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/booking/BookingPagination.tsx"],"sourcesContent":["'use client';\r\n// Phân trang cho booking Table\r\ninterface Props {\r\n  currentPage: number;\r\n  totalPages: number;\r\n  onPageChange: (page: number) => void;\r\n}\r\n\r\nexport default function BookingPagination({ currentPage, totalPages, onPageChange }: Props) {\r\n  return (\r\n    <div className=\"flex justify-center items-center gap-4 mt-4\">\r\n      <button\r\n        onClick={() => onPageChange(currentPage - 1)}\r\n        disabled={currentPage === 1}\r\n        className=\"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50\"\r\n      >\r\n        Previous\r\n      </button>\r\n      <span className=\"text-sm text-gray-600\">\r\n        Page {currentPage} of {totalPages}\r\n      </span>\r\n      <button\r\n        onClick={() => onPageChange(currentPage + 1)}\r\n        disabled={currentPage === totalPages}\r\n        className=\"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50\"\r\n      >\r\n        Next\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAQe,SAAS,kBAAkB,EAAE,WAAW,EAAE,UAAU,EAAE,YAAY,EAAS;IACxF,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBACC,SAAS,IAAM,aAAa,cAAc;gBAC1C,UAAU,gBAAgB;gBAC1B,WAAU;0BACX;;;;;;0BAGD,8OAAC;gBAAK,WAAU;;oBAAwB;oBAChC;oBAAY;oBAAK;;;;;;;0BAEzB,8OAAC;gBACC,SAAS,IAAM,aAAa,cAAc;gBAC1C,UAAU,gBAAgB;gBAC1B,WAAU;0BACX;;;;;;;;;;;;AAKP","debugId":null}},
    {"offset": {"line": 4936, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/booking/ExportBookings.ts"],"sourcesContent":["'use client';\r\n// Xuất dữ liệu bookings ra file Excel\r\nimport { Booking } from '@/src/lib/booking/BookingTypes';\r\nimport * as XLSX from 'xlsx';\r\n\r\nfunction formatDate(date?: any) {\r\n  if (!date?.toDate) return '';\r\n  const d = date.toDate();\r\n  return `${d.getDate().toString().padStart(2, '0')}/${(d.getMonth() + 1)\r\n    .toString()\r\n    .padStart(2, '0')}/${d.getFullYear()}`;\r\n}\r\n\r\nfunction formatDateTime(date?: any) {\r\n  if (!date?.toDate) return '';\r\n  return date.toDate().toLocaleString();\r\n}\r\n\r\nfunction formatBoolean(value?: boolean) {\r\n  return value ? 'Yes' : 'No';\r\n}\r\n\r\nexport function exportBookingsToExcel(bookings: Booking[]) {\r\n  const data = bookings.map((b) => ({\r\n    'Company ID': b.companyId,\r\n    'Station ID': b.stationId,\r\n    'User ID': b.userId || '',\r\n\r\n    'Full Name': b.fullName,\r\n    'Phone Number': b.phone,\r\n    'ID Number': b.idNumber,\r\n    'Address': b.address,\r\n    'Channel': b.channel || '',\r\n\r\n    'Vehicle Model': b.vehicleModel,\r\n    'Vehicle Color': b.vehicleColor,\r\n    'VIN': b.vin,\r\n    'License Plate': b.licensePlate || '',\r\n\r\n    'Battery Code 1': b.batteryCode1 || '',\r\n    'Battery Code 2': b.batteryCode2 || '',\r\n    'Battery Code 3': b.batteryCode3 || '',\r\n    'Battery Code 4': b.batteryCode4 || '',\r\n\r\n    'Rental Start Date': formatDate(b.rentalStartDate),\r\n    'Rental Start Hour': b.rentalStartHour,\r\n    'Rental Days': b.rentalDays,\r\n    'Rental End Date': formatDate(b.rentalEndDate),\r\n\r\n    'Package': b.package || '',\r\n    'Base Price': b.basePrice,\r\n    'Battery Fee': b.batteryFee || '',\r\n    'Total Amount': b.totalAmount,\r\n    'Deposit': b.deposit,\r\n    'Remaining Balance': b.remainingBalance,\r\n\r\n    'Delivery Method': b.deliveryMethod,\r\n    'Delivery Address': b.deliveryAddress || '',\r\n\r\n    'Helmet': formatBoolean(b.helmet),\r\n    'Charger': formatBoolean(b.charger),\r\n    'Phone Holder': formatBoolean(b.phoneHolder),\r\n    'Rear Rack': formatBoolean(b.rearRack),\r\n    'Raincoat': formatBoolean(b.raincoat),\r\n\r\n    'Note': b.note || '',\r\n\r\n    'Booking Status (draft/confirmed/completed/cancelled)': b.bookingStatus,\r\n    'Created At': formatDateTime(b.createdAt),\r\n    'Updated At': formatDateTime(b.updatedAt),\r\n  }));\r\n\r\n  const worksheet = XLSX.utils.json_to_sheet(data);\r\n  const workbook = XLSX.utils.book_new();\r\n  XLSX.utils.book_append_sheet(workbook, worksheet, 'Bookings');\r\n\r\n  XLSX.writeFile(workbook, `bookings_${new Date().getTime()}.xlsx`);\r\n}\r\n"],"names":[],"mappings":";;;AAGA;AAHA;;AAKA,SAAS,WAAW,IAAU;IAC5B,IAAI,CAAC,MAAM,QAAQ,OAAO;IAC1B,MAAM,IAAI,KAAK,MAAM;IACrB,OAAO,GAAG,EAAE,OAAO,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,CAAC,EAAE,QAAQ,KAAK,CAAC,EACnE,QAAQ,GACR,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,EAAE,WAAW,IAAI;AAC1C;AAEA,SAAS,eAAe,IAAU;IAChC,IAAI,CAAC,MAAM,QAAQ,OAAO;IAC1B,OAAO,KAAK,MAAM,GAAG,cAAc;AACrC;AAEA,SAAS,cAAc,KAAe;IACpC,OAAO,QAAQ,QAAQ;AACzB;AAEO,SAAS,sBAAsB,QAAmB;IACvD,MAAM,OAAO,SAAS,GAAG,CAAC,CAAC,IAAM,CAAC;YAChC,cAAc,EAAE,SAAS;YACzB,cAAc,EAAE,SAAS;YACzB,WAAW,EAAE,MAAM,IAAI;YAEvB,aAAa,EAAE,QAAQ;YACvB,gBAAgB,EAAE,KAAK;YACvB,aAAa,EAAE,QAAQ;YACvB,WAAW,EAAE,OAAO;YACpB,WAAW,EAAE,OAAO,IAAI;YAExB,iBAAiB,EAAE,YAAY;YAC/B,iBAAiB,EAAE,YAAY;YAC/B,OAAO,EAAE,GAAG;YACZ,iBAAiB,EAAE,YAAY,IAAI;YAEnC,kBAAkB,EAAE,YAAY,IAAI;YACpC,kBAAkB,EAAE,YAAY,IAAI;YACpC,kBAAkB,EAAE,YAAY,IAAI;YACpC,kBAAkB,EAAE,YAAY,IAAI;YAEpC,qBAAqB,WAAW,EAAE,eAAe;YACjD,qBAAqB,EAAE,eAAe;YACtC,eAAe,EAAE,UAAU;YAC3B,mBAAmB,WAAW,EAAE,aAAa;YAE7C,WAAW,EAAE,OAAO,IAAI;YACxB,cAAc,EAAE,SAAS;YACzB,eAAe,EAAE,UAAU,IAAI;YAC/B,gBAAgB,EAAE,WAAW;YAC7B,WAAW,EAAE,OAAO;YACpB,qBAAqB,EAAE,gBAAgB;YAEvC,mBAAmB,EAAE,cAAc;YACnC,oBAAoB,EAAE,eAAe,IAAI;YAEzC,UAAU,cAAc,EAAE,MAAM;YAChC,WAAW,cAAc,EAAE,OAAO;YAClC,gBAAgB,cAAc,EAAE,WAAW;YAC3C,aAAa,cAAc,EAAE,QAAQ;YACrC,YAAY,cAAc,EAAE,QAAQ;YAEpC,QAAQ,EAAE,IAAI,IAAI;YAElB,wDAAwD,EAAE,aAAa;YACvE,cAAc,eAAe,EAAE,SAAS;YACxC,cAAc,eAAe,EAAE,SAAS;QAC1C,CAAC;IAED,MAAM,YAAY,6HAAA,CAAA,QAAU,CAAC,aAAa,CAAC;IAC3C,MAAM,WAAW,6HAAA,CAAA,QAAU,CAAC,QAAQ;IACpC,6HAAA,CAAA,QAAU,CAAC,iBAAiB,CAAC,UAAU,WAAW;IAElD,CAAA,GAAA,6HAAA,CAAA,YAAc,AAAD,EAAE,UAAU,CAAC,SAAS,EAAE,IAAI,OAAO,OAAO,GAAG,KAAK,CAAC;AAClE","debugId":null}},
    {"offset": {"line": 5005, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/booking/importBookings.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { Timestamp } from 'firebase/firestore';\r\nimport { Booking } from '@/src/lib/booking/BookingTypes';\r\nimport * as XLSX from 'xlsx';\r\n\r\n/**\r\n * Chuyển đổi dữ liệu từ Excel thành định dạng Booking (thiếu id, createdAt, updatedAt)\r\n */\r\nfunction parseBookingFromRow(row: any): Omit<Booking, 'id' | 'createdAt' | 'updatedAt'> | null {\r\n  try {\r\n    if (!row['Full Name'] || !row['Phone Number'] || !row['Rental Start Date']) return null;\r\n\r\n    const rentalStartDate = Timestamp.fromDate(new Date(row['Rental Start Date']));\r\n    const rentalEndDate = row['Rental End Date']\r\n      ? Timestamp.fromDate(new Date(row['Rental End Date']))\r\n      : rentalStartDate;\r\n\r\n    return {\r\n      companyId: row['Company ID']?.toString() || '',\r\n      stationId: row['Station ID']?.toString() || '',\r\n      userId: row['User ID'] || undefined,\r\n\r\n      idImage: row['ID Image'] || undefined,\r\n      fullName: row['Full Name'] || '',\r\n      channel: row['Channel'] || undefined,\r\n      phone: row['Phone Number'] || '',\r\n      idNumber: row['ID Number'] || '',\r\n      address: row['Address'] || '',\r\n\r\n      vehicleSearch: row['Vehicle Search'] || undefined,\r\n      vehicleModel: row['Vehicle Model'] || '',\r\n      vehicleColor: row['Vehicle Color'] || '',\r\n      vin: row['VIN'] || '',\r\n      licensePlate: row['License Plate'] || undefined,\r\n\r\n      batteryCode1: row['Battery Code 1'] || undefined,\r\n      batteryCode2: row['Battery Code 2'] || undefined,\r\n      batteryCode3: row['Battery Code 3'] || undefined,\r\n      batteryCode4: row['Battery Code 4'] || undefined,\r\n\r\n      rentalStartDate,\r\n      rentalStartHour: row['Rental Start Hour'] || '08:00',\r\n      rentalDays: Number(row['Rental Days']) || 1,\r\n      rentalEndDate,\r\n\r\n      package: row['Package'] || undefined,\r\n      basePrice: Number(row['Base Price']) || 0,\r\n      batteryFee: row['Battery Fee'] ? Number(row['Battery Fee']) : undefined,\r\n      totalAmount: Number(row['Total Amount']) || 0,\r\n      deposit: Number(row['Deposit']) || 0,\r\n      remainingBalance: Number(row['Remaining Balance']) || 0,\r\n\r\n      deliveryMethod: row['Delivery Method'] === 'Deliver to Address' ? 'Deliver to Address' : 'Pickup at Shop',\r\n      deliveryAddress: row['Delivery Address'] || undefined,\r\n\r\n      helmet: row['Helmet'] === 'Yes',\r\n      charger: row['Charger'] === 'Yes',\r\n      phoneHolder: row['Phone Holder'] === 'Yes',\r\n      rearRack: row['Rear Rack'] === 'Yes',\r\n      raincoat: row['Raincoat'] === 'Yes',\r\n\r\n      note: row['Note'] || undefined,\r\n\r\n      bookingStatus: ['draft', 'confirmed', 'completed', 'cancelled'].includes((row['Booking Status'] || '').toLowerCase())\r\n        ? row['Booking Status'].toLowerCase()\r\n        : 'draft',\r\n    } as Omit<Booking, 'id' | 'createdAt' | 'updatedAt'>;\r\n  } catch (error) {\r\n    console.error('Error parsing row:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Import từ file Excel, trả về danh sách Booking chưa có ID\r\n */\r\nexport async function importBookingsFromExcel(file: File): Promise<Omit<Booking, 'id' | 'createdAt' | 'updatedAt'>[]> {\r\n  const arrayBuffer = await file.arrayBuffer();\r\n  const workbook = XLSX.read(arrayBuffer, { type: 'array' });\r\n  const sheetName = workbook.SheetNames[0];\r\n  const worksheet = workbook.Sheets[sheetName];\r\n  const rows = XLSX.utils.sheet_to_json(worksheet);\r\n\r\n  const bookings: Omit<Booking, 'id' | 'createdAt' | 'updatedAt'>[] = [];\r\n\r\n  for (const row of rows) {\r\n    const parsed = parseBookingFromRow(row);\r\n    if (parsed) bookings.push(parsed);\r\n  }\r\n\r\n  return bookings;\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5091, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/ui/badge.tsx"],"sourcesContent":["// badge.tsx\r\nexport function Badge({ children, className = '' }: { children: React.ReactNode; className?: string }) {\r\n    return (\r\n      <span className={`inline-block rounded-full px-2 py-1 text-xs font-semibold ${className}`}>\r\n        {children}\r\n      </span>\r\n    );\r\n  }\r\n  "],"names":[],"mappings":"AAAA,YAAY;;;;;;AACL,SAAS,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,EAAqD;IACjG,qBACE,8OAAC;QAAK,WAAW,CAAC,0DAA0D,EAAE,WAAW;kBACtF;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 5113, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/ui/dialog.tsx"],"sourcesContent":["'use client';\r\n\r\nimport * as React from \"react\";\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\";\r\nimport { X } from \"lucide-react\";\r\nimport { cn } from \"@/src/lib/utils\";\r\n\r\nconst Dialog = DialogPrimitive.Root;\r\nconst DialogTrigger = DialogPrimitive.Trigger;\r\nconst DialogPortal = DialogPrimitive.Portal;\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm transition-all\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName;\r\n\r\nconst DialogContent = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DialogPortal>\r\n    <DialogOverlay />\r\n    <DialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed z-50 left-1/2 top-1/2 w-full max-w-lg -translate-x-1/2 -translate-y-1/2 rounded-xl bg-white p-6 shadow-lg transition-all\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 text-gray-500 hover:text-gray-700\">\r\n        <X className=\"h-5 w-5\" />\r\n      </DialogPrimitive.Close>\r\n    </DialogPrimitive.Content>\r\n  </DialogPortal>\r\n));\r\nDialogContent.displayName = DialogPrimitive.Content.displayName;\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div className={cn(\"mb-4 space-y-2 text-center\", className)} {...props} />\r\n);\r\nDialogHeader.displayName = \"DialogHeader\";\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold\", className)}\r\n    {...props}\r\n  />\r\n));\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName;\r\n\r\n// ✅ Bổ sung thêm DialogDescription\r\nconst DialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-gray-500\", className)}\r\n    {...props}\r\n  />\r\n));\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName;\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div className={cn(\"flex justify-end gap-2 pt-4\", className)} {...props} />\r\n);\r\nDialogFooter.displayName = \"DialogFooter\";\r\n\r\nexport {\r\n  Dialog,\r\n  DialogTrigger,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogDescription, // ✅ Export ra luôn\r\n  DialogFooter,\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOA,MAAM,SAAS,kKAAA,CAAA,OAAoB;AACnC,MAAM,gBAAgB,kKAAA,CAAA,UAAuB;AAC7C,MAAM,eAAe,kKAAA,CAAA,SAAsB;AAE3C,MAAM,8BAAgB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,UAAuB;QACtB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kEACA;QAED,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,kKAAA,CAAA,UAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGnC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,kKAAA,CAAA,UAAuB;gBACtB,KAAK;gBACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kIACA;gBAED,GAAG,KAAK;;oBAER;kCACD,8OAAC,kKAAA,CAAA,QAAqB;wBAAC,WAAU;kCAC/B,cAAA,8OAAC,4LAAA,CAAA,IAAC;4BAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;AAKrB,cAAc,WAAW,GAAG,kKAAA,CAAA,UAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QAAI,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAAa,GAAG,KAAK;;;;;;AAExE,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,QAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,yBAAyB;QACtC,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,kKAAA,CAAA,QAAqB,CAAC,WAAW;AAE3D,mCAAmC;AACnC,MAAM,kCAAoB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,cAA2B;QAC1B,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,yBAAyB;QACtC,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,kKAAA,CAAA,cAA2B,CAAC,WAAW;AAEvE,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QAAI,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,+BAA+B;QAAa,GAAG,KAAK;;;;;;AAEzE,aAAa,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 5234, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/ui/NotificationDialog.tsx"],"sourcesContent":["//@/src/components/ui/NotificationDialog\r\n'use client';\r\n\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter, DialogDescription } from '@/src/components/ui/dialog';\r\nimport { Button } from '@/src/components/ui/button';\r\nimport { CheckCircle, AlertCircle, Info, Trash2 } from 'lucide-react';\r\nimport { cn } from '@/src/lib/utils';\r\n\r\nexport type NotificationType = 'success' | 'error' | 'info' | 'confirm';\r\n\r\nexport interface NotificationDialogProps {\r\n  open: boolean;\r\n  type: NotificationType;\r\n  title: string;\r\n  description?: string;\r\n  onClose: () => void;\r\n  onConfirm?: () => void;\r\n}\r\n\r\nexport default function NotificationDialog({\r\n  open,\r\n  type,\r\n  title,\r\n  description,\r\n  onClose,\r\n  onConfirm,\r\n}: NotificationDialogProps) {\r\n\r\n  const renderIcon = () => {\r\n    const baseClass = \"w-8 h-8 animate-pop shrink-0\";\r\n    switch (type) {\r\n      case 'success':\r\n        return <CheckCircle className={cn(baseClass, \"text-green-500\")} />;\r\n      case 'error':\r\n        return <AlertCircle className={cn(baseClass, \"text-red-500\")} />;\r\n      case 'info':\r\n        return <Info className={cn(baseClass, \"text-blue-500\")} />;\r\n      case 'confirm':\r\n        return <Trash2 className={cn(baseClass, \"text-orange-500\")} />;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onClose}>\r\n      <DialogContent className=\"w-full max-w-md p-6 rounded-2xl space-y-5 pb-8\">\r\n        <DialogHeader className=\"flex items-center gap-3\">\r\n          {renderIcon()}\r\n          <DialogTitle className=\"text-lg sm:text-xl\">\r\n            {title}\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        {description && (\r\n          <DialogDescription>\r\n            {description}\r\n          </DialogDescription>\r\n        )}\r\n\r\n        <DialogFooter className=\"flex justify-end gap-3 mt-6\">\r\n          {type === 'confirm' ? (\r\n            <>\r\n              <Button\r\n                variant=\"ghost\"\r\n                className=\"w-full sm:w-auto\"\r\n                onClick={onClose}\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                variant=\"destructive\"\r\n                className=\"w-full sm:w-auto\"\r\n                onClick={onConfirm}\r\n              >\r\n                Confirm\r\n              </Button>\r\n            </>\r\n          ) : (\r\n            <Button\r\n              className=\"w-full sm:w-auto\"\r\n              onClick={onClose}\r\n            >\r\n              OK\r\n            </Button>\r\n          )}\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,wCAAwC;;;;;AAGxC;AACA;AACA;AAAA;AAAA;AAAA;AACA;AALA;;;;;;AAkBe,SAAS,mBAAmB,EACzC,IAAI,EACJ,IAAI,EACJ,KAAK,EACL,WAAW,EACX,OAAO,EACP,SAAS,EACe;IAExB,MAAM,aAAa;QACjB,MAAM,YAAY;QAClB,OAAQ;YACN,KAAK;gBACH,qBAAO,8OAAC,2NAAA,CAAA,cAAW;oBAAC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,WAAW;;;;;;YAC/C,KAAK;gBACH,qBAAO,8OAAC,oNAAA,CAAA,cAAW;oBAAC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,WAAW;;;;;;YAC/C,KAAK;gBACH,qBAAO,8OAAC,kMAAA,CAAA,OAAI;oBAAC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,WAAW;;;;;;YACxC,KAAK;gBACH,qBAAO,8OAAC,0MAAA,CAAA,SAAM;oBAAC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,WAAW;;;;;;YAC1C;gBACE,OAAO;QACX;IACF;IAEA,qBACE,8OAAC,kIAAA,CAAA,SAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,8OAAC,kIAAA,CAAA,gBAAa;YAAC,WAAU;;8BACvB,8OAAC,kIAAA,CAAA,eAAY;oBAAC,WAAU;;wBACrB;sCACD,8OAAC,kIAAA,CAAA,cAAW;4BAAC,WAAU;sCACpB;;;;;;;;;;;;gBAIJ,6BACC,8OAAC,kIAAA,CAAA,oBAAiB;8BACf;;;;;;8BAIL,8OAAC,kIAAA,CAAA,eAAY;oBAAC,WAAU;8BACrB,SAAS,0BACR;;0CACE,8OAAC,kIAAA,CAAA,SAAM;gCACL,SAAQ;gCACR,WAAU;gCACV,SAAS;0CACV;;;;;;0CAGD,8OAAC,kIAAA,CAAA,SAAM;gCACL,SAAQ;gCACR,WAAU;gCACV,SAAS;0CACV;;;;;;;qDAKH,8OAAC,kIAAA,CAAA,SAAM;wBACL,WAAU;wBACV,SAAS;kCACV;;;;;;;;;;;;;;;;;;;;;;AAQb","debugId":null}},
    {"offset": {"line": 5380, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/app/bookings/page.tsx"],"sourcesContent":["'use client';\r\n// Page chính thức của Booking\r\n\r\nimport { useState } from 'react';\r\nimport { useBookingData } from '@/src/hooks/useBookingData';\r\nimport { useUser } from '@/src/context/AuthContext';\r\n\r\nimport Header from '@/src/components/landingpage/Header';\r\nimport Footer from '@/src/components/landingpage/Footer';\r\nimport UserTopMenu from '@/src/components/landingpage/UserTopMenu';\r\nimport { Booking } from '@/src/lib/booking/BookingTypes';\r\nimport BookingForm from '@/src/components/booking/BookingForm';\r\nimport BookingTable from '@/src/components/booking/BookingTable';\r\nimport BookingSummaryCards from '@/src/components/booking/BookingSummaryCards';\r\nimport BookingSearchFilter from '@/src/components/booking/BookingSearchFilter';\r\nimport BookingPagination from '@/src/components/booking/BookingPagination';\r\nimport { exportBookingsToExcel } from '@/src/components/booking/ExportBookings';\r\nimport { importBookingsFromExcel } from '@/src/components/booking/importBookings';\r\n\r\nimport { Card, CardContent } from '@/src/components/ui/card';\r\nimport { Button } from '@/src/components/ui/button';\r\nimport { Badge } from '@/src/components/ui/badge';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/src/components/ui/dialog';\r\nimport NotificationDialog from '@/src/components/ui/NotificationDialog';\r\n\r\nexport default function BookingManagementPage() {\r\n  const [searchText, setSearchText] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState('All');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [deleteTargetId, setDeleteTargetId] = useState<string | null>(null);\r\n  const [startDate, setStartDate] = useState('');\r\n  const [endDate, setEndDate] = useState('');\r\n  const [filters, setFilters] = useState<{ startDate?: string; endDate?: string }>({});\r\n\r\n  const {\r\n    bookings,\r\n    stationNames,\r\n    companyNames,\r\n    packageNames,\r\n    userNames,\r\n    editingBooking,\r\n    setEditingBooking,\r\n    saveBooking,\r\n    deleteBooking,\r\n    loading,\r\n  } = useBookingData(filters);\r\n\r\n  const { role, companyId, stationId } = useUser();\r\n  const pageSize = 20;\r\n  const normalizedRole = role?.toLowerCase() ?? '';\r\n\r\n  const [notification, setNotification] = useState<{\r\n    open: boolean;\r\n    type: 'success' | 'error' | 'info' | 'confirm';\r\n    title: string;\r\n    description?: string;\r\n    onConfirm?: () => void;\r\n  }>({\r\n    open: false,\r\n    type: 'info',\r\n    title: '',\r\n  });\r\n\r\n  const filteredBookings = bookings.filter((b) => {\r\n    const matchesRole = (() => {\r\n      if (normalizedRole === 'admin') return true;\r\n      if (normalizedRole === 'company_owner' || normalizedRole === 'private_provider') return b.companyId === companyId;\r\n      if (normalizedRole === 'station_manager') return b.stationId === stationId;\r\n      return false;\r\n    })();\r\n\r\n    const matchesSearch = searchText\r\n      ? b.fullName?.toLowerCase().includes(searchText.toLowerCase()) || b.phone?.includes(searchText) || b.vin?.includes(searchText)\r\n      : true;\r\n\r\n    const matchesStatus = statusFilter === 'All'\r\n      ? true\r\n      : b.bookingStatus?.toLowerCase() === statusFilter.toLowerCase();\r\n\r\n    return matchesRole && matchesSearch && matchesStatus;\r\n  });\r\n\r\n  const startIndex = (currentPage - 1) * pageSize;\r\n  const paginatedBookings = filteredBookings.slice(startIndex, startIndex + pageSize);\r\n  const totalPages = Math.ceil(filteredBookings.length / pageSize);\r\n\r\n  const roleDisplayName: Record<string, string> = {\r\n    admin: 'Admin - All Bookings',\r\n    company_owner: 'Company Owner',\r\n    private_provider: 'Private Provider',\r\n    station_manager: 'Station Manager',\r\n  };\r\n\r\n  const getBadgeColor = (role: string) => {\r\n    switch (role) {\r\n      case 'admin':\r\n        return 'bg-red-100 text-red-800';\r\n      case 'company_owner':\r\n        return 'bg-green-100 text-green-800';\r\n      case 'private_provider':\r\n        return 'bg-blue-100 text-blue-800';\r\n      case 'station_manager':\r\n        return 'bg-purple-100 text-purple-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const handleDeleteBooking = (id: string) => {\r\n    setNotification({\r\n      open: true,\r\n      type: 'confirm',\r\n      title: 'Confirm Deletion',\r\n      description: 'Are you sure you want to delete this booking? This action cannot be undone.',\r\n      onConfirm: () => {\r\n        deleteBooking(id);\r\n        setNotification({\r\n          open: true,\r\n          type: 'success',\r\n          title: 'Deleted successfully',\r\n        });\r\n      },\r\n    });\r\n  };\r\n\r\n  const handleImportBookings = async (file: File) => {\r\n    try {\r\n      const importedBookings = await importBookingsFromExcel(file);\r\n      for (const booking of importedBookings) {\r\n        await saveBooking(booking);\r\n      }\r\n      setNotification({\r\n        open: true,\r\n        type: 'success',\r\n        title: 'Import completed',\r\n        description: `${importedBookings.length} bookings imported successfully.`,\r\n      });\r\n    } catch (error) {\r\n      setNotification({\r\n        open: true,\r\n        type: 'error',\r\n        title: 'Import failed',\r\n        description: 'An error occurred while importing bookings.',\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col min-h-screen\">\r\n      <Header />\r\n      <UserTopMenu />\r\n\r\n      <main className=\"flex-1 p-4 space-y-6 bg-gray-50\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <h1 className=\"text-2xl font-bold\">Booking Management</h1>\r\n          <Badge className={`text-sm px-3 py-1 rounded-full ${getBadgeColor(normalizedRole)}`}>\r\n            {roleDisplayName[normalizedRole] || 'User'}\r\n          </Badge>\r\n        </div>\r\n\r\n        <BookingSearchFilter\r\n          onSearchChange={setSearchText}\r\n          onStatusFilterChange={setStatusFilter}\r\n          onDateRangeChange={(start, end) => {\r\n            setStartDate(start);\r\n            setEndDate(end);\r\n            setFilters({ startDate: start, endDate: end });\r\n          }}\r\n        />\r\n\r\n        <BookingSummaryCards bookings={filteredBookings} />\r\n\r\n        <div className=\"flex gap-3 justify-end mb-4\">\r\n          <Button onClick={() => exportBookingsToExcel(filteredBookings)}>Export to Excel</Button>\r\n\r\n          <input\r\n            type=\"file\"\r\n            accept=\".xlsx,.xls\"\r\n            id=\"importBookings\"\r\n            hidden\r\n            onChange={(e) => {\r\n              const file = e.target.files?.[0];\r\n              if (file) handleImportBookings(file);\r\n            }}\r\n          />\r\n          <Button onClick={() => document.getElementById('importBookings')?.click()}>\r\n            Import from Excel\r\n          </Button>\r\n        </div>\r\n\r\n        <Card>\r\n          <CardContent className=\"p-4\">\r\n            <h2 className=\"text-xl font-semibold mb-4\">Bookings List</h2>\r\n\r\n            {loading ? (\r\n              <p>Loading bookings...</p>\r\n            ) : bookings.length > 0 ? (\r\n              <BookingTable\r\n                bookings={paginatedBookings}\r\n                stationNames={stationNames}\r\n                companyNames={companyNames}\r\n                packageNames={packageNames}\r\n                userNames={userNames}\r\n                onEdit={(b) => setEditingBooking(b)}\r\n                onDelete={(id) => handleDeleteBooking(id)}\r\n              />\r\n            ) : (\r\n              <p className=\"text-gray-500 text-center\">No bookings found.</p>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {totalPages > 1 && (\r\n          <BookingPagination\r\n            currentPage={currentPage}\r\n            totalPages={totalPages}\r\n            onPageChange={setCurrentPage}\r\n          />\r\n        )}\r\n      </main>\r\n\r\n      <Footer />\r\n\r\n      {/* Booking Form Dialog */}\r\n      <Dialog open={!!editingBooking} onOpenChange={(open) => !open && setEditingBooking(null)}>\r\n        <DialogContent className=\"!p-0 w-full max-w-none h-screen overflow-y-auto rounded-none bg-white\">\r\n          <DialogHeader className=\"bg-[#00d289] text-white px-6 py-4\">\r\n            <DialogTitle className=\"text-lg font-semibold\">\r\n              {editingBooking ? 'Edit Booking' : 'New Booking'}\r\n            </DialogTitle>\r\n          </DialogHeader>\r\n\r\n          {editingBooking && (\r\n            <div className=\"p-6\">\r\n              <BookingForm\r\n                editingBooking={editingBooking}\r\n                companyNames={companyNames}\r\n                userNames={userNames}\r\n                packageNames={packageNames}\r\n                packages={[]}\r\n                ebikes={[]}\r\n                onSave={async (data) => {\r\n                  await saveBooking(data as Omit<Booking, 'id' | 'createdAt' | 'updatedAt'>);\r\n                  setEditingBooking(null);\r\n                }}\r\n                onCancel={() => setEditingBooking(null)}\r\n              />\r\n            </div>\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <NotificationDialog\r\n        open={notification.open}\r\n        type={notification.type}\r\n        title={notification.title}\r\n        description={notification.description}\r\n        onClose={() => setNotification({ ...notification, open: false })}\r\n        onConfirm={notification.onConfirm}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}