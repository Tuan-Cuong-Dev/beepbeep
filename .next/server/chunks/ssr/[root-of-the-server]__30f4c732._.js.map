{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/landingpage/Preferences.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { X } from 'lucide-react';\r\n\r\ninterface PreferencesProps {\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function Preferences({ onClose }: PreferencesProps) {\r\n  const [activeTab, setActiveTab] = useState('region');\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-2xl p-6 w-full max-w-xl shadow-lg relative\">\r\n        {/* Close Button */}\r\n        <button\r\n          className=\"absolute top-4 right-4 text-gray-500 hover:text-black\"\r\n          onClick={onClose}\r\n        >\r\n          <X size={24} />\r\n        </button>\r\n\r\n        {/* Header */}\r\n        <h2 className=\"text-2xl font-bold mb-4\">Preferences</h2>\r\n\r\n        {/* Tabs */}\r\n        <div className=\"flex space-x-4 border-b mb-4\">\r\n          <button\r\n            className={`pb-2 ${activeTab === 'region' ? 'border-b-2 border-black font-medium' : 'text-gray-500'}`}\r\n            onClick={() => setActiveTab('region')}\r\n          >\r\n            Region & Language\r\n          </button>\r\n          <button\r\n            className={`pb-2 ${activeTab === 'currency' ? 'border-b-2 border-black font-medium' : 'text-gray-500'}`}\r\n            onClick={() => setActiveTab('currency')}\r\n          >\r\n            Currency\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        {activeTab === 'region' ? (\r\n          <div>\r\n            <h3 className=\"text-lg font-medium mb-2\">Select Region | Language</h3>\r\n            <div className=\"text-sm grid grid-cols-4 gap-3\">\r\n              {[\r\n                'Vietnam üáªüá≥',\r\n                'English (UK) üá¨üáß',\r\n                'Japan üáØüáµ',\r\n                'China üá®üá≥',\r\n                'South Korea üá∞üá∑',\r\n                'Russia üá∑üá∫',\r\n                'France üá´üá∑',\r\n                'Germany üá©üá™',\r\n                'Italy üáÆüáπ',\r\n                'Spain üá™üá∏',\r\n                'Portugal üáµüáπ',\r\n                'Saudi Arabia üá∏üá¶',\r\n              ].map((region) => (\r\n                <button\r\n                  key={region}\r\n                  className=\"p-2 rounded-lg border hover:bg-[#00d289] transition \"\r\n                >\r\n                  {region}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <h3 className=\"text-lg font-medium mb-2\">Select Currency</h3>\r\n            <div className=\"text-sm grid grid-cols-4 gap-4\">\r\n              {[\r\n                'VND (Vietnamese Dong)',\r\n                'GBP (British Pound Sterling)',\r\n                'JPY (Japanese Yen)',\r\n                'CNY (Chinese Yuan)',\r\n                'KRW (South Korean Won)',\r\n                'RUB (Russian Ruble)',\r\n                'EUR (Euro)',\r\n                'SAR (Saudi Riyal)',\r\n              ].map((currency) => (\r\n                <button\r\n                  key={currency}\r\n                  className=\"p-2 rounded-lg border hover:bg-[#00d289] transition \"\r\n                >\r\n                  {currency}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Footer */}\r\n        <p className=\"text-sm text-gray-500 mt-4\">\r\n          All preference changes are optional and will be saved for your session.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAMe,SAAS,YAAY,EAAE,OAAO,EAAoB;IAC/D,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBACC,WAAU;oBACV,SAAS;8BAET,cAAA,8OAAC,4LAAA,CAAA,IAAC;wBAAC,MAAM;;;;;;;;;;;8BAIX,8OAAC;oBAAG,WAAU;8BAA0B;;;;;;8BAGxC,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,WAAW,CAAC,KAAK,EAAE,cAAc,WAAW,wCAAwC,iBAAiB;4BACrG,SAAS,IAAM,aAAa;sCAC7B;;;;;;sCAGD,8OAAC;4BACC,WAAW,CAAC,KAAK,EAAE,cAAc,aAAa,wCAAwC,iBAAiB;4BACvG,SAAS,IAAM,aAAa;sCAC7B;;;;;;;;;;;;gBAMF,cAAc,yBACb,8OAAC;;sCACC,8OAAC;4BAAG,WAAU;sCAA2B;;;;;;sCACzC,8OAAC;4BAAI,WAAU;sCACZ;gCACC;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;6BACD,CAAC,GAAG,CAAC,CAAC,uBACL,8OAAC;oCAEC,WAAU;8CAET;mCAHI;;;;;;;;;;;;;;;yCASb,8OAAC;;sCACC,8OAAC;4BAAG,WAAU;sCAA2B;;;;;;sCACzC,8OAAC;4BAAI,WAAU;sCACZ;gCACC;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;gCACA;6BACD,CAAC,GAAG,CAAC,CAAC,yBACL,8OAAC;oCAEC,WAAU;8CAET;mCAHI;;;;;;;;;;;;;;;;8BAWf,8OAAC;oBAAE,WAAU;8BAA6B;;;;;;;;;;;;;;;;;AAMlD","debugId":null}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/sidebar/SidebarMenu.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport {\r\n  FaTimes,\r\n  FaGlobe,\r\n  FaHome,\r\n  FaInfoCircle,\r\n  FaPhone,\r\n  FaShieldAlt,\r\n} from \"react-icons/fa\";\r\n\r\ninterface SidebarMenuProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function SidebarMenu({ isOpen, onClose }: SidebarMenuProps) {\r\n  // ‚úÖ Do not render if the sidebar is not open\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"\r\n        font-sans fixed top-0 left-0 h-full w-80 bg-white shadow-lg z-[100] p-5\r\n        transform transition-transform duration-300 ease-in-out translate-x-0\r\n      \"\r\n    >\r\n      {/* Close Sidebar Button */}\r\n      <button       \r\n        onClick={onClose} \r\n        className=\"absolute top-4 right-4 text-lg\"\r\n      >\r\n        <FaTimes />\r\n      </button>\r\n\r\n      {/* Header */}\r\n      <div className=\"flex items-center text-gray-800 space-x-2 font-semibold text-lg mb-8\">\r\n        <FaGlobe />\r\n        <span>United States, EN | USD</span>\r\n      </div>\r\n\r\n      {/* Menu Items */}\r\n      <ul className=\"space-y-4 text-gray-800\">\r\n        <li className=\"flex items-center space-x-3 hover:text-blue-500 cursor-pointer\">\r\n          <FaHome />\r\n          <span>Home</span>\r\n        </li>\r\n        <hr />\r\n        <li className=\"flex items-center space-x-3 hover:text-blue-500 cursor-pointer\">\r\n          <FaInfoCircle />\r\n          <span>About Us</span>\r\n        </li>\r\n        <hr />\r\n        <li className=\"flex items-center space-x-3 hover:text-blue-500 cursor-pointer\">\r\n          <FaPhone />\r\n          <span>Contact</span>\r\n        </li>\r\n        <hr />\r\n        <li className=\"flex items-center space-x-3 hover:text-blue-500 cursor-pointer\">\r\n          <FaShieldAlt />\r\n          <span>Policies</span>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAgBe,SAAS,YAAY,EAAE,MAAM,EAAE,OAAO,EAAoB;IACvE,6CAA6C;IAC7C,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,8OAAC;QACC,WAAU;;0BAMV,8OAAC;gBACC,SAAS;gBACT,WAAU;0BAEV,cAAA,8OAAC,8IAAA,CAAA,UAAO;;;;;;;;;;0BAIV,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,8IAAA,CAAA,UAAO;;;;;kCACR,8OAAC;kCAAK;;;;;;;;;;;;0BAIR,8OAAC;gBAAG,WAAU;;kCACZ,8OAAC;wBAAG,WAAU;;0CACZ,8OAAC,8IAAA,CAAA,SAAM;;;;;0CACP,8OAAC;0CAAK;;;;;;;;;;;;kCAER,8OAAC;;;;;kCACD,8OAAC;wBAAG,WAAU;;0CACZ,8OAAC,8IAAA,CAAA,eAAY;;;;;0CACb,8OAAC;0CAAK;;;;;;;;;;;;kCAER,8OAAC;;;;;kCACD,8OAAC;wBAAG,WAAU;;0CACZ,8OAAC,8IAAA,CAAA,UAAO;;;;;0CACR,8OAAC;0CAAK;;;;;;;;;;;;kCAER,8OAAC;;;;;kCACD,8OAAC;wBAAG,WAAU;;0CACZ,8OAAC,8IAAA,CAAA,cAAW;;;;;0CACZ,8OAAC;0CAAK;;;;;;;;;;;;;;;;;;;;;;;;AAKhB","debugId":null}},
    {"offset": {"line": 375, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/auth/authService.tsx"],"sourcesContent":["// X·ª≠ l√Ω x√°c th·ª±c ƒëƒÉng nh·∫≠p v·ªõi google account\r\n// X·ª≠ l√Ω signout\r\n\r\nimport { auth, provider, db, signInWithPopup } from \"@/src/firebaseConfig\";\r\nimport { doc, setDoc, getDoc, serverTimestamp } from \"firebase/firestore\";\r\nimport { signOut } from \"firebase/auth\";\r\n\r\nconst signOutUser = async () => {\r\n  try {\r\n    await signOut(auth);\r\n    console.log(\"‚úÖ Signed out successfully\");\r\n    window.location.href = \"/\"; // ho·∫∑c d√πng router.push(\"/\") n·∫øu d√πng Next.js router\r\n  } catch (error) {\r\n    console.error(\"‚ùå Error signing out:\", error);\r\n  }\r\n};\r\n\r\nconst signInWithGoogle = async () => {\r\n  try {\r\n    // Hi·ªÉn th·ªã popup ƒëƒÉng nh·∫≠p Google\r\n    const result = await signInWithPopup(auth, provider);\r\n    const user = result.user;\r\n\r\n    // T·∫°o document tham chi·∫øu t·ªõi Firestore\r\n    const userRef = doc(db, \"users\", user.uid);\r\n    const userSnap = await getDoc(userRef);\r\n\r\n    // N·∫øu user ch∆∞a t·ªìn t·∫°i trong Firestore, th√™m m·ªõi\r\n    if (!userSnap.exists()) {\r\n      await setDoc(userRef, {\r\n        uid: user.uid,\r\n        name: user.displayName || \"\",\r\n        email: user.email || \"\",\r\n        photoURL: user.photoURL || \"\",\r\n        role: \"Customer\", // üëà G√°n role m·∫∑c ƒë·ªãnh\r\n        createdAt: serverTimestamp(), // ‚è± D√πng timestamp chu·∫©n\r\n      });\r\n    }\r\n\r\n    console.log(\"‚úÖ User signed in:\", user);\r\n    return user; // Tr·∫£ v·ªÅ user ƒë·ªÉ d√πng trong ·ª©ng d·ª•ng\r\n\r\n  } catch (error: any) {\r\n    if (error.code === \"auth/popup-closed-by-user\") {\r\n      console.warn(\"‚ö†Ô∏è Ng∆∞·ªùi d√πng ƒë√£ ƒë√≥ng c·ª≠a s·ªï ƒëƒÉng nh·∫≠p tr∆∞·ªõc khi ho√†n t·∫•t.\");\r\n    } else {\r\n      console.error(\"‚ùå L·ªói khi ƒëƒÉng nh·∫≠p:\", error);\r\n    }\r\n    return null;\r\n  }\r\n};\r\n\r\nexport { signInWithGoogle, signOutUser };\r\n"],"names":[],"mappings":"AAAA,8CAA8C;AAC9C,gBAAgB;;;;;AAEhB;AAAA;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,cAAc;IAClB,IAAI;QACF,MAAM,CAAA,GAAA,6MAAA,CAAA,UAAO,AAAD,EAAE,qIAAA,CAAA,OAAI;QAClB,QAAQ,GAAG,CAAC;QACZ,OAAO,QAAQ,CAAC,IAAI,GAAG,KAAK,qDAAqD;IACnF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;IACxC;AACF;AAEA,MAAM,mBAAmB;IACvB,IAAI;QACF,kCAAkC;QAClC,MAAM,SAAS,MAAM,CAAA,GAAA,qNAAA,CAAA,kBAAe,AAAD,EAAE,qIAAA,CAAA,OAAI,EAAE,qIAAA,CAAA,WAAQ;QACnD,MAAM,OAAO,OAAO,IAAI;QAExB,wCAAwC;QACxC,MAAM,UAAU,CAAA,GAAA,iKAAA,CAAA,MAAG,AAAD,EAAE,qIAAA,CAAA,KAAE,EAAE,SAAS,KAAK,GAAG;QACzC,MAAM,WAAW,MAAM,CAAA,GAAA,iKAAA,CAAA,SAAM,AAAD,EAAE;QAE9B,kDAAkD;QAClD,IAAI,CAAC,SAAS,MAAM,IAAI;YACtB,MAAM,CAAA,GAAA,iKAAA,CAAA,SAAM,AAAD,EAAE,SAAS;gBACpB,KAAK,KAAK,GAAG;gBACb,MAAM,KAAK,WAAW,IAAI;gBAC1B,OAAO,KAAK,KAAK,IAAI;gBACrB,UAAU,KAAK,QAAQ,IAAI;gBAC3B,MAAM;gBACN,WAAW,CAAA,GAAA,iKAAA,CAAA,kBAAe,AAAD;YAC3B;QACF;QAEA,QAAQ,GAAG,CAAC,qBAAqB;QACjC,OAAO,MAAM,qCAAqC;IAEpD,EAAE,OAAO,OAAY;QACnB,IAAI,MAAM,IAAI,KAAK,6BAA6B;YAC9C,QAAQ,IAAI,CAAC;QACf,OAAO;YACL,QAAQ,KAAK,CAAC,wBAAwB;QACxC;QACA,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 437, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/sidebar/UserSidebar.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport { signOutUser } from '@/src/components/auth/authService';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faFileContract } from '@fortawesome/free-solid-svg-icons';\r\nimport {\r\n  FaTimes, FaPencilAlt, FaUser, FaCalendarAlt, FaEnvelope, FaBuilding,\r\n  FaCog, FaStore, FaMotorcycle, FaUserCog, FaBatteryFull, FaUsers, FaDollarSign\r\n} from 'react-icons/fa';\r\nimport { useUser } from '@/src/context/AuthContext';\r\nimport { IconType } from 'react-icons';\r\nimport { db } from '@/src/firebaseConfig';\r\nimport { collection, onSnapshot, query, where, doc, getDoc } from 'firebase/firestore';\r\n\r\ninterface UserSidebarProps {\r\n  user: any;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\ntype MenuItem =\r\n  | { divider: true }\r\n  | {\r\n      icon: IconType | typeof faFileContract;\r\n      label: string;\r\n      path?: string;\r\n      onClick?: () => void;\r\n    };\r\n\r\nconst UserSidebar: React.FC<UserSidebarProps> = ({ user, isOpen, onClose }) => {\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const { role } = useUser();\r\n\r\n  const [agentStats, setAgentStats] = useState({ total: 0, pending: 0 });\r\n  const [agentDisabled, setAgentDisabled] = useState(false);\r\n\r\n  const normalizedRole = (role || '').toLowerCase();\r\n\r\n  // Realtime Earnings\r\n  useEffect(() => {\r\n    if (normalizedRole !== 'agent' || !user?.uid) return;\r\n\r\n    const q = query(collection(db, 'bookings'), where('agentId', '==', user.uid));\r\n    const unsub = onSnapshot(q, (snap) => {\r\n      let total = 0;\r\n      let pending = 0;\r\n\r\n      snap.forEach(doc => {\r\n        const data = doc.data();\r\n        const amount = data.agentCommission || 0;\r\n        total += amount;\r\n        if (!data.agentCommissionPaid) pending += amount;\r\n      });\r\n\r\n      setAgentStats({ total, pending });\r\n    });\r\n\r\n    return () => unsub();\r\n  }, [normalizedRole, user]);\r\n\r\n  // Check disabled agent\r\n  useEffect(() => {\r\n    if (normalizedRole !== 'agent' || !user?.uid) return;\r\n\r\n    const checkAgent = async () => {\r\n      const snap = await getDoc(doc(db, 'users', user.uid));\r\n      const userData = snap.data();\r\n      if (userData?.status === 'disabled') {\r\n        setAgentDisabled(true);\r\n      }\r\n    };\r\n\r\n    checkAgent();\r\n  }, [normalizedRole, user]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const commonItems: MenuItem[] = [\r\n    { icon: FaPencilAlt, label: 'Write a review', onClick: () => {} },\r\n    { divider: true },\r\n    { icon: FaUser, label: 'Profile', path: '/profile' },\r\n    { icon: FaCalendarAlt, label: 'Bookings', path: '/bookings' },\r\n    { icon: FaEnvelope, label: 'Messages', path: '/messages' },\r\n    { icon: FaBuilding, label: 'My business', path: '/my-business' },\r\n    { divider: true },\r\n  ];\r\n\r\n  const agentItems: MenuItem[] = [\r\n    { icon: FaUsers, label: 'Agent Dashboard', path: '/my-business/agent' },\r\n    { icon: FaDollarSign, label: 'Earnings', path: '/my-business/earnings' },\r\n    { icon: faFileContract, label: 'Request Payment', path: '/my-business/request-payment' },\r\n  ];\r\n\r\n  const footerItem: MenuItem = {\r\n    icon: FaCog,\r\n    label: 'Account Info',\r\n    path: '/account',\r\n  };\r\n\r\n  const getMenuItems = (): MenuItem[] => {\r\n    if (normalizedRole === 'agent') {\r\n      if (agentDisabled) return [...commonItems, footerItem];\r\n      return [...commonItems, ...agentItems, { divider: true }, footerItem];\r\n    }\r\n    return [...commonItems, footerItem];\r\n  };\r\n\r\n  const menuItems = getMenuItems();\r\n\r\n  return (\r\n    <div className={`fixed top-0 right-0 z-[100] w-80 max-w-full h-[100dvh] bg-white shadow-2xl flex flex-col transition-transform duration-300 ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}>\r\n      {/* Header */}\r\n      <div className=\"p-4 border-b flex flex-col items-center relative\">\r\n        <button onClick={onClose} className=\"absolute top-4 right-4 text-xl\">\r\n          <FaTimes />\r\n        </button>\r\n\r\n        <img\r\n          src={user?.photoURL || \"/default-avatar.png\"}\r\n          alt=\"Avatar\"\r\n          className=\"w-16 h-16 rounded-full\"\r\n        />\r\n        <p className=\"mt-2 text-gray-600 text-sm\">Welcome</p>\r\n        <p className=\"font-semibold text-gray-800 mt-1 text-center\">{user?.displayName || \"User\"}</p>\r\n\r\n        {normalizedRole === 'agent' && !agentDisabled && (\r\n          <div className=\"mt-4 space-y-1 text-sm text-gray-600 text-center\">\r\n            <p>Total Earnings: <b>${agentStats.total.toFixed(2)}</b></p>\r\n            <p>Pending Payment: <b>${agentStats.pending.toFixed(2)}</b></p>\r\n          </div>\r\n        )}\r\n\r\n        {normalizedRole === 'agent' && agentDisabled && (\r\n          <p className=\"mt-4 text-red-500 text-sm\">Account Disabled</p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Menu */}\r\n      <nav className=\"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent\">\r\n        {menuItems.map((item, index) =>\r\n          'divider' in item ? (\r\n            <hr key={index} className=\"my-2 border-gray-200\" />\r\n          ) : (\r\n            <button\r\n              key={index}\r\n              onClick={() => {\r\n                if (item.path) router.push(item.path);\r\n                item.onClick?.();\r\n                onClose();\r\n              }}\r\n              className={`flex items-center space-x-3 w-full text-left rounded-lg px-3 py-2 transition ${\r\n                pathname === item.path\r\n                  ? 'bg-[#00d289] text-white'\r\n                  : 'text-gray-700 hover:text-black hover:bg-gray-100'\r\n              }`}\r\n            >\r\n              {'icon' in item && (\r\n                typeof item.icon === 'function' ? (\r\n                  <item.icon />\r\n                ) : (\r\n                  <FontAwesomeIcon icon={item.icon} className=\"w-4 h-4\" />\r\n                )\r\n              )}\r\n              <span>{item.label}</span>\r\n            </button>\r\n          )\r\n        )}\r\n      </nav>\r\n\r\n      <div className=\"p-4 border-t\">\r\n        <button\r\n          onClick={() => {\r\n            signOutUser();\r\n            onClose();\r\n          }}\r\n          className=\"w-full border border-gray-300 rounded-lg py-2 text-black hover:bg-[#00d289] transition\"\r\n        >\r\n          Sign out\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserSidebar;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 772, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/auth/handleEmailLoginAndStoreUser.tsx"],"sourcesContent":["// src/components/handleEmailLoginAndStoreUser.ts\r\nimport { signInWithEmailAndPassword } from \"firebase/auth\";\r\nimport { doc, getDoc, setDoc, serverTimestamp } from \"firebase/firestore\";\r\nimport { auth, db } from \"@/src/firebaseConfig\"; \r\n\r\nexport const handleEmailLoginAndStoreUser = async (email: string, password: string) => {\r\n  const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n  const user = userCredential.user;\r\n\r\n  if (user) {\r\n    const userDocRef = doc(db, \"users\", user.uid);\r\n    const docSnap = await getDoc(userDocRef);\r\n\r\n    if (!docSnap.exists()) {\r\n      await setDoc(userDocRef, {\r\n        uid: user.uid,\r\n        email: user.email,\r\n        createdAt: serverTimestamp(),\r\n      });\r\n    }\r\n  }\r\n\r\n  return user;\r\n};\r\n\r\n"],"names":[],"mappings":"AAAA,iDAAiD;;;;AACjD;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEO,MAAM,+BAA+B,OAAO,OAAe;IAChE,MAAM,iBAAiB,MAAM,CAAA,GAAA,iOAAA,CAAA,6BAA0B,AAAD,EAAE,qIAAA,CAAA,OAAI,EAAE,OAAO;IACrE,MAAM,OAAO,eAAe,IAAI;IAEhC,IAAI,MAAM;QACR,MAAM,aAAa,CAAA,GAAA,iKAAA,CAAA,MAAG,AAAD,EAAE,qIAAA,CAAA,KAAE,EAAE,SAAS,KAAK,GAAG;QAC5C,MAAM,UAAU,MAAM,CAAA,GAAA,iKAAA,CAAA,SAAM,AAAD,EAAE;QAE7B,IAAI,CAAC,QAAQ,MAAM,IAAI;YACrB,MAAM,CAAA,GAAA,iKAAA,CAAA,SAAM,AAAD,EAAE,YAAY;gBACvB,KAAK,KAAK,GAAG;gBACb,OAAO,KAAK,KAAK;gBACjB,WAAW,CAAA,GAAA,iKAAA,CAAA,kBAAe,AAAD;YAC3B;QACF;IACF;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 807, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/auth/SignupPopup.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { X } from \"lucide-react\";\r\nimport { FaEye, FaEyeSlash } from \"react-icons/fa\";\r\nimport { createUserWithEmailAndPassword } from \"firebase/auth\";\r\nimport { doc, setDoc, serverTimestamp } from \"firebase/firestore\";\r\nimport { auth, db } from \"@/src/firebaseConfig\"; // Nh·ªõ export db t·ª´ firebaseConfig.ts\r\n\r\ninterface SignupPopupProps {\r\n  onClose: () => void;\r\n  onSwitchToSignin: () => void;\r\n}\r\n\r\nexport default function SignupPopup({ onClose, onSwitchToSignin }: SignupPopupProps) {\r\n  const [firstName, setFirstName] = useState(\"\");\r\n  const [lastName, setLastName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleSignup = async () => {\r\n    try {\r\n      const userCredential = await createUserWithEmailAndPassword(\r\n        auth,\r\n        email.trim(),\r\n        password.trim()\r\n      );\r\n      const user = userCredential.user;\r\n\r\n      // L∆∞u th√¥ng tin v√†o Firestore\r\n      await setDoc(doc(db, \"users\", user.uid), {\r\n        uid: user.uid,\r\n        name: `${firstName} ${lastName}`.trim(),\r\n        email: user.email,\r\n        photoURL: user.photoURL || \"\",\r\n        role: \"Customer\",\r\n        createdAt: serverTimestamp(),\r\n      });\r\n\r\n      console.log(\"User created and saved to Firestore!\");\r\n      onClose(); // ƒê√≥ng popup sau khi t·∫°o th√†nh c√¥ng\r\n    } catch (err: any) {\r\n      setError(err.message);\r\n      console.error(\"Signup error:\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"font-sans p-3 fixed inset-0 flex justify-center items-center bg-black bg-opacity-50 z-50\">\r\n      <div className=\"bg-white p-6 rounded-xl shadow-xl w-96 relative\">\r\n        {/* Close button */}\r\n        <button\r\n          className=\"absolute top-4 right-4 text-gray-600 hover:text-gray-900\"\r\n          onClick={onClose}\r\n        >\r\n          <X size={24} />\r\n        </button>\r\n\r\n        {/* Logo */}\r\n        <div className=\"flex justify-center mb-4\">\r\n          <img src=\"/assets/images/BipBip_logo1.jpg\" alt=\"Logo\" className=\"w-24 h-10\" />\r\n        </div>\r\n\r\n        {/* Title */}\r\n        <h2 className=\"text-2xl font-bold text-center mb-6\">\r\n          Join to unlock the best of <br />B√≠p B√≠p\r\n        </h2>\r\n\r\n        {/* Name fields */}\r\n        <div className=\"flex gap-2 mb-4\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"First Name\"\r\n            value={firstName}\r\n            onChange={(e) => setFirstName(e.target.value)}\r\n            className=\"w-1/2 border rounded-lg p-2 focus:ring focus:ring-blue-300 outline-none\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Last Name\"\r\n            value={lastName}\r\n            onChange={(e) => setLastName(e.target.value)}\r\n            className=\"w-1/2 border rounded-lg p-2 focus:ring focus:ring-blue-300 outline-none\"\r\n          />\r\n        </div>\r\n\r\n        {/* Email */}\r\n        <input\r\n          type=\"email\"\r\n          placeholder=\"Email address\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          className=\"w-full border rounded-lg p-2 mb-4 focus:ring focus:ring-blue-300 outline-none\"\r\n        />\r\n\r\n        {/* Password */}\r\n        <div className=\"relative mb-4\">\r\n          <input\r\n            type={showPassword ? \"text\" : \"password\"}\r\n            placeholder=\"Create a password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            className=\"w-full border rounded-lg p-2 pr-10 focus:ring focus:ring-blue-300 outline-none\"\r\n          />\r\n          <button\r\n            type=\"button\"\r\n            className=\"absolute inset-y-0 right-3 flex items-center text-gray-600\"\r\n            onClick={() => setShowPassword(!showPassword)}\r\n          >\r\n            {showPassword ? <FaEyeSlash /> : <FaEye />}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Error message */}\r\n        {error && <p className=\"text-red-500 text-sm mb-2\">{error}</p>}\r\n\r\n        {/* Join Button */}\r\n        <button\r\n          onClick={handleSignup}\r\n          className=\"flex items-center justify-center w-full border py-2 rounded-lg mt-2 mb-3 hover:bg-[#00d289] transition\"\r\n        >\r\n          Join\r\n        </button>\r\n\r\n        {/* Already a member */}\r\n        <div className=\"flex items-center my-4\">\r\n          <hr className=\"flex-1\" />\r\n          <span className=\"mx-2 text-gray-500 text-sm\">Already a member?</span>\r\n          <hr className=\"flex-1\" />\r\n        </div>\r\n\r\n        <p className=\"text-center text-sm \">\r\n          <a\r\n            href=\"#\"\r\n            className=\"font-bold underline text-[#00d289]\"\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              onSwitchToSignin();\r\n            }}\r\n          >\r\n            Sign in\r\n          </a>{\" \"}\r\n          using your B√≠p B√≠p account.\r\n        </p>\r\n\r\n        {/* Terms */}\r\n        <p className=\"text-xs text-gray-500 mt-4 text-center\">\r\n          By proceeding, you agree to our{\" \"}\r\n          <a href=\"#\" className=\"underline\">Terms of Use</a> and confirm you have read our{\" \"}\r\n          <a href=\"#\" className=\"underline\">Privacy and Cookie Statement</a>.\r\n        </p>\r\n        <p className=\"text-xs text-gray-500 text-center mt-1\">\r\n          This site is protected by reCAPTCHA and the Google{\" \"}\r\n          <a href=\"#\" className=\"underline\">Privacy Policy</a> and{\" \"}\r\n          <a href=\"#\" className=\"underline\">Terms of Service</a> apply.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1141, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/auth/SigninPopup.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { X } from \"lucide-react\";\r\nimport { FaEye, FaEyeSlash } from \"react-icons/fa\";\r\nimport { handleEmailLoginAndStoreUser } from \"@/src/components/auth/handleEmailLoginAndStoreUser\";\r\nimport SignupPopup from \"@/src/components/auth/SignupPopup\";\r\n\r\nexport default function SigninPopup({ onClose }: { onClose: () => void }) {\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [showSignup, setShowSignup] = useState(false);\r\n\r\n  const handleLogin = async () => {\r\n    if (!email || !password) {\r\n      setErrorMessage(\"Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß email v√† m·∫≠t kh·∫©u.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setErrorMessage(\"\");\r\n      await handleEmailLoginAndStoreUser(email, password);\r\n      onClose(); // ƒë√≥ng popup sau khi ƒëƒÉng nh·∫≠p th√†nh c√¥ng\r\n    } catch (error: any) {\r\n      setErrorMessage(error.message || \"ƒêƒÉng nh·∫≠p th·∫•t b·∫°i.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"font-sans p-3 fixed inset-0 flex justify-center items-center bg-black bg-opacity-50 z-50\">\r\n      <div className=\"bg-white p-6 rounded-xl shadow-xl w-96 relative\">\r\n        <button\r\n          className=\"absolute top-4 right-4 text-gray-600 hover:text-gray-900\"\r\n          onClick={onClose}\r\n        >\r\n          <X size={24} />\r\n        </button>\r\n\r\n        <div className=\"flex justify-center mb-4\">\r\n          <img\r\n            src=\"/assets/images/BipBip_logo1.png\"\r\n            alt=\"BipBip Logo\"\r\n            className=\"w-32 h-10\"\r\n          />\r\n        </div>\r\n\r\n        <h2 className=\"text-2xl text-gray-600 font-bold text-center mb-6\">Welcome back.</h2>\r\n\r\n        <label className=\"block text-gray-600 font-semibold text-sm mb-1\">Email address</label>\r\n        <input\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          className=\"w-full border rounded-lg p-2 mb-4 focus:ring focus:ring-blue-300 outline-none\"\r\n        />\r\n\r\n        <label className=\"block text-gray-600 font-semibold text-sm mb-1\">Password</label>\r\n        <div className=\"relative\">\r\n          <input\r\n            type={showPassword ? \"text\" : \"password\"}\r\n            placeholder=\"Password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            className=\"w-full border rounded-lg p-2 pr-10 focus:ring focus:ring-blue-300 outline-none\"\r\n          />\r\n          <button\r\n            type=\"button\"\r\n            className=\"absolute inset-y-0 right-3 flex items-center text-gray-600\"\r\n            onClick={() => setShowPassword(!showPassword)}\r\n          >\r\n            {showPassword ? <FaEyeSlash /> : <FaEye />}\r\n          </button>\r\n        </div>\r\n\r\n        {errorMessage && (\r\n          <p className=\"text-red-500 text-sm text-center mt-2\">{errorMessage}</p>\r\n        )}\r\n\r\n        <a href=\"#\" className=\"text-[#00d289] text-sm mt-2 inline-block\">\r\n          Forgot password?\r\n        </a>\r\n\r\n        <button\r\n          onClick={handleLogin}\r\n          className=\"flex text-gray-600 items-center justify-center w-full border py-2 rounded-lg mt-2 mb-3 hover:bg-[#00d289] transition\"\r\n        >\r\n          Sign in\r\n        </button>\r\n\r\n        <div className=\"flex items-center my-4\">\r\n          <hr className=\"flex-1\" />\r\n          <span className=\"mx-2 text-gray-500 text-sm\">Not a member?</span>\r\n          <hr className=\"flex-1\" />\r\n        </div>\r\n\r\n        <p className=\"text-center text-gray-600 text-sm\">\r\n          <a\r\n            href=\"#\"\r\n            className=\"font-bold underline text-[#00d289]\"\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              setShowSignup(true);\r\n            }}\r\n          >\r\n            Join\r\n          </a>{\" \"}\r\n          to unlock the best of <br />B√≠p B√≠p.\r\n        </p>\r\n\r\n        <p className=\"text-xs text-gray-500 mt-4 text-center\">\r\n          By proceeding, you agree to our{\" \"}\r\n          <a href=\"#\" className=\"underline\">Terms of Use</a> and confirm you have read our{\" \"}\r\n          <a href=\"#\" className=\"underline\">Privacy and Cookie Statement</a>.\r\n        </p>\r\n        <p className=\"text-xs text-gray-500 text-center mt-1\">\r\n          This site is protected by reCAPTCHA and the Google{\" \"}\r\n          <a href=\"#\" className=\"underline\">Privacy Policy</a> and{\" \"}\r\n          <a href=\"#\" className=\"underline\">Terms of Service</a> apply.\r\n        </p>\r\n      </div>\r\n\r\n     {/* ‚úÖ Hi·ªÉn th·ªã SignupPopup n·∫øu ƒë∆∞·ª£c b·∫≠t */}\r\n      {showSignup && (\r\n          <SignupPopup\r\n            onClose={() => setShowSignup(false)}\r\n            onSwitchToSignin={() => setShowSignup(false)} // ‚úÖ B·ªï sung prop b·∫Øt bu·ªôc\r\n          />\r\n        )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1463, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/auth/LoginPopup.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { FaGoogle, FaEnvelope } from \"react-icons/fa\";\r\nimport { X } from \"lucide-react\";\r\nimport SigninPopup from \"@/src/components/auth/SigninPopup\";\r\nimport { signInWithGoogle } from \"@/src/components/auth/authService\";\r\n\r\n// T·∫°o interface n√†y ƒë·ªÉ ƒë√≥ng popup khi c·∫ßn\r\ninterface LoginPopupProps {\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function LoginPopup({ onClose }: LoginPopupProps) {\r\n\r\n  // Khai b√°o tr·∫°ng th√°i c·ªßa ƒëƒÉng nh·∫≠p Signin l√† hiden\r\n  const [showSignin, setShowSignin] = useState(false);\r\n\r\n  const handleGoogleSignIn = async () => {\r\n    try {\r\n      const user = await signInWithGoogle();\r\n      console.log(\"User signed in:\", user);\r\n\r\n      // ‚úÖ ƒê√≥ng popup sau khi ƒëƒÉng nh·∫≠p th√†nh c√¥ng\r\n      onClose();\r\n    } catch (error) {\r\n      console.error(\"Google Sign-In Error:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-3 fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center\">\r\n      <div className=\"bg-white p-6 rounded-2xl shadow-xl w-96 relative\">\r\n        {/* Close button */}\r\n        <button\r\n          className=\"absolute top-4 right-4 text-gray-500 hover:text-gray-700\"\r\n          onClick={onClose}\r\n        >\r\n          <X size={24} />\r\n        </button>\r\n\r\n        {/* Logo */}\r\n        <div className=\"flex justify-center mb-4\">\r\n          <img\r\n            src=\"/assets/images/BipBip_logo1.png\"\r\n            alt=\"BipBip Logo\"\r\n            className=\"w-32 h-10\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-xl text-gray-600 font-semibold mb-4\">\r\n            Sign in to unlock the best of <br />B√≠p B√≠p.\r\n          </h2>\r\n\r\n          {/* Continue with Google */}\r\n          <button \r\n            className=\"flex text-gray-600 items-center justify-center w-full border py-2 rounded-lg mb-3 hover:bg-[#00d289] transition\"\r\n            onClick={handleGoogleSignIn}\r\n          >\r\n            <FaGoogle className=\"mr-2\" /> Continue with Google\r\n          </button>\r\n\r\n          {/* Continue with Email th√¨ (M·ªü SigninPopup) */}\r\n          <button\r\n            className=\"flex text-gray-600 items-center justify-center w-full border py-2 rounded-lg hover:bg-[#00d289] transition\"\r\n            onClick={() => setShowSignin(true)}\r\n          >\r\n            <FaEnvelope className=\"mr-2\" /> Continue with Email\r\n          </button>\r\n\r\n          <p className=\"text-xs text-gray-500 mt-4\">\r\n            By proceeding, you agree to our{\" \"}\r\n            <a href=\"#\" className=\"underline\">\r\n              Terms of Use\r\n            </a>{\" \"}\r\n            and confirm you have read our{\" \"}\r\n            <a href=\"#\" className=\"underline\">\r\n              Privacy and Cookie Statement\r\n            </a>.\r\n          </p>\r\n          <p className=\"text-xs text-gray-500 mt-2\">\r\n            This site is protected by reCAPTCHA and the Google{\" \"}\r\n            <a href=\"#\" className=\"underline\">\r\n              Privacy Policy\r\n            </a>{\" \"}\r\n            and\r\n            <a href=\"#\" className=\"underline\"> Terms of Service</a> apply.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Popup Signin xu·∫•t hi·ªán khi b·∫•m \"Continue with Email\" */}\r\n      {showSignin && <SigninPopup onClose={() => setShowSignin(false)} />}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;AAOe,SAAS,WAAW,EAAE,OAAO,EAAmB;IAE7D,oDAAoD;IACpD,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,MAAM,qBAAqB;QACzB,IAAI;YACF,MAAM,OAAO,MAAM,CAAA,GAAA,yIAAA,CAAA,mBAAgB,AAAD;YAClC,QAAQ,GAAG,CAAC,mBAAmB;YAE/B,4CAA4C;YAC5C;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB;QACzC;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBACC,WAAU;wBACV,SAAS;kCAET,cAAA,8OAAC,4LAAA,CAAA,IAAC;4BAAC,MAAM;;;;;;;;;;;kCAIX,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BACC,KAAI;4BACJ,KAAI;4BACJ,WAAU;;;;;;;;;;;kCAId,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;;oCAA2C;kDACzB,8OAAC;;;;;oCAAK;;;;;;;0CAItC,8OAAC;gCACC,WAAU;gCACV,SAAS;;kDAET,8OAAC,8IAAA,CAAA,WAAQ;wCAAC,WAAU;;;;;;oCAAS;;;;;;;0CAI/B,8OAAC;gCACC,WAAU;gCACV,SAAS,IAAM,cAAc;;kDAE7B,8OAAC,8IAAA,CAAA,aAAU;wCAAC,WAAU;;;;;;oCAAS;;;;;;;0CAGjC,8OAAC;gCAAE,WAAU;;oCAA6B;oCACR;kDAChC,8OAAC;wCAAE,MAAK;wCAAI,WAAU;kDAAY;;;;;;oCAE7B;oCAAI;oCACqB;kDAC9B,8OAAC;wCAAE,MAAK;wCAAI,WAAU;kDAAY;;;;;;oCAE9B;;;;;;;0CAEN,8OAAC;gCAAE,WAAU;;oCAA6B;oCACW;kDACnD,8OAAC;wCAAE,MAAK;wCAAI,WAAU;kDAAY;;;;;;oCAE7B;oCAAI;kDAET,8OAAC;wCAAE,MAAK;wCAAI,WAAU;kDAAY;;;;;;oCAAqB;;;;;;;;;;;;;;;;;;;YAM5D,4BAAc,8OAAC,yIAAA,CAAA,UAAW;gBAAC,SAAS,IAAM,cAAc;;;;;;;;;;;;AAG/D","debugId":null}},
    {"offset": {"line": 1680, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/landingpage/Header.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { FaBars, FaRegUserCircle, FaGlobe } from \"react-icons/fa\";\r\nimport Image from \"next/image\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Preferences from \"./Preferences\";\r\nimport SidebarMenu from \"../sidebar/SidebarMenu\";\r\nimport UserSidebar from \"../sidebar/UserSidebar\";\r\nimport LoginPopup from \"@/src/components/auth/LoginPopup\";\r\nimport { useUser } from \"@/src/context/AuthContext\";\r\n\r\n// Import UserSidebar t·ª´ file ri√™ng\r\nimport Link from \"next/link\";\r\n// Qu·∫£n l√Ω ƒë√≥ng m·ªü sidebar cho ƒë·ªìng b·ªô\r\n\r\n\r\nconst Header = () => {\r\n  const [language, setLanguage] = useState(\"EN\");\r\n  const [currency, setCurrency] = useState(\"USD\");\r\n\r\n  // Qu·∫£n l√Ω m·ªü/ƒë√≥ng popup Preferences\r\n  const [isReferencePopupOpen, setIsReferencePopupOpen] = useState(false);\r\n  // Qu·∫£n l√Ω m·ªü/ƒë√≥ng popup Login\r\n  const [isLoginPopupOpen, setIsLoginPopupOpen] = useState(false);\r\n  // Qu·∫£n l√Ω m·ªü/ƒë√≥ng SidebarMenu (hamburger)\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n  // Qu·∫£n l√Ω m·ªü/ƒë√≥ng Sidebar ƒë·ªï xu·ªëng cho user (khi ƒë√£ ƒëƒÉng nh·∫≠p)\r\n  const [isUserSidebarOpen, setIsUserSidebarOpen] = useState(false);\r\n\r\n  const { user } = useUser();  // ‚úÖ\r\n  const router = useRouter();\r\n\r\n  // ƒê·ªïi ti·ªÅn t·ªá / ng√¥n ng·ªØ\r\n  const togglePopup = () => setIsReferencePopupOpen(!isReferencePopupOpen);\r\n  // ƒê√≥ng / m·ªü Login popup\r\n  const toggleLoginPopup = () => setIsLoginPopupOpen(!isLoginPopupOpen);\r\n  // ƒê√≥ng / m·ªü SidebarMenu (hamburger) v√† ƒë√≥ng UserSidebar n·∫øu c·∫ßn\r\n  const toggleSidebar = () => {\r\n    if (!isSidebarOpen) {\r\n      setIsUserSidebarOpen(false); // ƒê√≥ng UserSidebar n·∫øu SidebarMenu ƒëang m·ªü\r\n    }\r\n    setIsSidebarOpen(!isSidebarOpen);\r\n  };\r\n  // ƒê√≥ng / m·ªü UserSidebar v√† ƒë√≥ng SidebarMenu n·∫øu c·∫ßn\r\nconst toggleUserSidebar = () => {\r\n  if (!isUserSidebarOpen) {\r\n    setIsSidebarOpen(false); // ƒê√≥ng SidebarMenu n·∫øu UserSidebar ƒëang m·ªü\r\n  }\r\n  setIsUserSidebarOpen(!isUserSidebarOpen);\r\n};\r\n\r\n  return (\r\n    <header className=\"sticky flex items-center justify-between absolute top-0 left-0 w-full bg-white z-50 h-16\">\r\n      {/* N√∫t Menu Icon (hamburger) - ch·ªâ hi·ªán tr√™n mobile */}\r\n      <button className=\"text-2xl text-gray-800 md:hidden lg:hidden px-6 py-2\" onClick={toggleSidebar}>\r\n        <FaBars />\r\n      </button>\r\n\r\n      {/* Logo */}\r\n      <div className=\"flex items-center px-8\">\r\n          <Link href=\"/\">\r\n            <Image\r\n              src=\"/assets/images/BipBip_logo1.png\"\r\n              alt=\"eBikeRental Logo\"\r\n              width={160} // ‚úÖ ƒë·ªÉ ƒë√∫ng k√≠ch th∆∞·ªõc th·ª±c t·∫ø\r\n              height={60} // ‚úÖ t√πy theo t·ª∑ l·ªá logo\r\n              priority // ‚úÖ logo th√¨ n√™n preload\r\n              className=\"h-auto w-auto max-h-12\" // ‚úÖ t·ªëi ∆∞u responsive\r\n            />\r\n          </Link>\r\n      </div>\r\n\r\n\r\n      {/* User Icon (mobile) */}\r\n      <button\r\n        className=\"text-2xl md:hidden text-gray-800 lg:hidden px-6 py-2\"\r\n        onClick={user ? toggleUserSidebar : toggleLoginPopup}\r\n      >\r\n        {user ? (\r\n          <img\r\n            src={user.photoURL || \"/default-avatar.png\"}\r\n            alt=\"avatar\"\r\n            className=\"w-8 h-8 rounded-full\"\r\n          />\r\n        ) : (\r\n          <FaRegUserCircle />\r\n        )}\r\n      </button>\r\n\r\n      {/* Popup ƒëƒÉng nh·∫≠p (n·∫øu c·∫ßn) */}\r\n      {isLoginPopupOpen && <LoginPopup onClose={toggleLoginPopup} />}\r\n\r\n      {/* Sidebar Menu (hamburger) */}\r\n      <SidebarMenu isOpen={isSidebarOpen} onClose={toggleSidebar} />\r\n\r\n      {/* Desktop Only */}\r\n      <div className=\"hidden sm:block px-8\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          {/* N√∫t ƒë·ªïi ti·ªÅn t·ªá / ng√¥n ng·ªØ */}\r\n          <button\r\n            onClick={togglePopup}\r\n            className=\"flex items-center space-x-2 text-sm font-semibold\"\r\n          >\r\n            <FaGlobe className=\"text-lg\" />\r\n            <span className=\"border-l border-gray-400 h-4 mx-2\"></span>\r\n            <span>{currency}</span>\r\n            <span className=\"border-l border-gray-400 h-4 mx-2\"></span>\r\n          </button>\r\n\r\n          {/* N·∫øu ƒë√£ ƒëƒÉng nh·∫≠p => hi·ªÉn th·ªã avatar, n·∫øu ch∆∞a => n√∫t \"ƒêƒÉng nh·∫≠p\" */}\r\n          {user ? (\r\n            <img\r\n              src={user.photoURL || \"/default-avatar.png\"}\r\n              alt=\"avatar\"\r\n              className=\"w-8 h-8 rounded-full cursor-pointer\"\r\n              onClick={toggleUserSidebar}\r\n            />\r\n          ) : (\r\n            <button\r\n              onClick={user ? toggleUserSidebar : toggleLoginPopup}\r\n              className=\"px-4 py-1 bg-transparent border border-[#00d289] text-[#00d289] text-md font-semibold rounded-sm\"\r\n            >\r\n              Sign in\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Popup ƒë·ªïi ti·ªÅn t·ªá / ng√¥n ng·ªØ */}\r\n        {isReferencePopupOpen && (\r\n          <Preferences onClose={() => setIsReferencePopupOpen(false)} />\r\n        )}\r\n      </div>\r\n\r\n      {/* Sidebar ƒë·ªï xu·ªëng cho user (ch·ªâ hi·ªán khi ƒë√£ ƒëƒÉng nh·∫≠p) */}\r\n      {user && (\r\n        <UserSidebar\r\n          user={user}\r\n          isOpen={isUserSidebarOpen}\r\n          onClose={() => setIsUserSidebarOpen(false)}\r\n        />\r\n      )}\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1921, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/landingpage/Footer.tsx"],"sourcesContent":["export default function Footer() {\r\n  return (\r\n    <footer className=\"bg-[#00d289] text-white text-sm py-4 text-center w-full\">\r\n      <div>¬© 2025 Workman. All rights reserved.</div>\r\n      <div className=\"mt-1 space-x-3\">\r\n        <a href=\"#\" className=\"underline\">About Us</a>\r\n        <a href=\"#\" className=\"underline\">Contact</a>\r\n        <a href=\"#\" className=\"underline\">Policy</a>\r\n      </div>\r\n    </footer>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAe,SAAS;IACtB,qBACE,8OAAC;QAAO,WAAU;;0BAChB,8OAAC;0BAAI;;;;;;0BACL,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,MAAK;wBAAI,WAAU;kCAAY;;;;;;kCAClC,8OAAC;wBAAE,MAAK;wBAAI,WAAU;kCAAY;;;;;;kCAClC,8OAAC;wBAAE,MAAK;wBAAI,WAAU;kCAAY;;;;;;;;;;;;;;;;;;AAI1C","debugId":null}},
    {"offset": {"line": 1986, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/utils/formatCurrency.ts"],"sourcesContent":["'use client';\r\n\r\n/**\r\n * Format s·ªë ti·ªÅn th√†nh d·∫°ng 1,000,000 ‚Ç´\r\n * @param value - S·ªë ti·ªÅn c·∫ßn format\r\n * @returns Chu·ªói s·ªë ti·ªÅn ƒë√£ format\r\n */\r\nexport function formatCurrency(value: number | string, locale: string = 'vi-VN', currency: string = 'VND'): string {\r\n  const number = typeof value === 'string' ? parseFloat(value) : value;\r\n\r\n  if (isNaN(number)) return '0 ‚Ç´';\r\n\r\n  return new Intl.NumberFormat(locale, {\r\n    style: 'currency',\r\n    currency,\r\n    maximumFractionDigits: 0, // kh√¥ng hi·ªán s·ªë l·∫ª\r\n  }).format(number);\r\n}\r\n"],"names":[],"mappings":";;;AAAA;AAOO,SAAS,eAAe,KAAsB,EAAE,SAAiB,OAAO,EAAE,WAAmB,KAAK;IACvG,MAAM,SAAS,OAAO,UAAU,WAAW,WAAW,SAAS;IAE/D,IAAI,MAAM,SAAS,OAAO;IAE1B,OAAO,IAAI,KAAK,YAAY,CAAC,QAAQ;QACnC,OAAO;QACP;QACA,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ","debugId":null}},
    {"offset": {"line": 2005, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/my-business/dashboards/RentalCompanyDashboard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { collection, getDocs, query, where } from 'firebase/firestore';\r\nimport { db } from '@/src/firebaseConfig';\r\nimport { useUser } from '@/src/context/AuthContext';\r\nimport Header from '@/src/components/landingpage/Header';\r\nimport Footer from '@/src/components/landingpage/Footer';\r\nimport {\r\n  DollarSign,\r\n  Bike,\r\n  MapPin,\r\n  Users,\r\n  LineChart,\r\n  FileText,\r\n  Wrench,\r\n  FileTextIcon,\r\n  ClipboardList,\r\n  BatteryCharging,\r\n  Package,\r\n} from 'lucide-react';\r\nimport { Booking } from '@/src/lib/booking/BookingTypes';\r\nimport { formatCurrency } from '@/src/utils/formatCurrency';\r\n\r\nexport default function RentalCompanyDashboard() {\r\n  const { user } = useUser();\r\n  const [stats, setStats] = useState({\r\n    stations: 0,\r\n    ebikes: 0,\r\n    bookings: 0,\r\n    revenue: 0,\r\n    staffs: 0,\r\n    issues: 0,\r\n    batteries: 0,\r\n    accessories: 0, // ‚úÖ ph·ª• ki·ªán\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetchStats = async () => {\r\n      if (!user?.uid) return;\r\n\r\n      const companySnap = await getDocs(\r\n        query(collection(db, 'rentalCompanies'), where('ownerId', '==', user.uid))\r\n      );\r\n      if (companySnap.empty) return;\r\n\r\n      const companyId = companySnap.docs[0].id;\r\n\r\n      const [stationSnap, ebikeSnap, staffSnap, issuesSnap, bookingsSnap, batterySnap, accessorySnap] =\r\n        await Promise.all([\r\n          getDocs(query(collection(db, 'rentalStations'), where('companyId', '==', companyId))),\r\n          getDocs(query(collection(db, 'ebikes'), where('companyId', '==', companyId))),\r\n          getDocs(query(collection(db, 'staffs'), where('companyId', '==', companyId))),\r\n          getDocs(query(collection(db, 'vehicleIssues'), where('companyId', '==', companyId))),\r\n          getDocs(query(collection(db, 'bookings'), where('companyId', '==', companyId))),\r\n          getDocs(query(collection(db, 'batteries'), where('companyId', '==', companyId))),\r\n          getDocs(query(collection(db, 'accessories'), where('companyId', '==', companyId))),\r\n        ]);\r\n\r\n      const bookings: Booking[] = bookingsSnap.docs.map(doc => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      })) as Booking[];\r\n\r\n      const now = new Date();\r\n      const revenueThisMonth = bookings.reduce((sum, b) => {\r\n        if (!b.createdAt) return sum;\r\n        const date = b.createdAt.toDate();\r\n        return date.getFullYear() === now.getFullYear() && date.getMonth() === now.getMonth()\r\n          ? sum + (b.totalAmount || 0)\r\n          : sum;\r\n      }, 0);\r\n\r\n      const bookingThisMonth = bookings.filter(b => {\r\n        if (!b.createdAt) return false;\r\n        const date = b.createdAt.toDate();\r\n        return date.getFullYear() === now.getFullYear() && date.getMonth() === now.getMonth();\r\n      }).length;\r\n\r\n      setStats({\r\n        stations: stationSnap.size,\r\n        ebikes: ebikeSnap.size,\r\n        bookings: bookingThisMonth,\r\n        revenue: revenueThisMonth,\r\n        staffs: staffSnap.size,\r\n        issues: issuesSnap.size,\r\n        batteries: batterySnap.size,\r\n        accessories: accessorySnap.size,\r\n      });\r\n    };\r\n\r\n    fetchStats();\r\n  }, [user]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-gray-50\">\r\n      <Header />\r\n\r\n      <main className=\"flex-1 px-6 py-10 space-y-10\">\r\n        <h1 className=\"text-3xl font-bold text-center text-gray-800\">üè¢ Rental Company Dashboard</h1>\r\n\r\n        <DashboardGrid1>\r\n          <DashboardCard title=\"Stations\" value={stats.stations.toString()} href=\"/my-business/stations\" icon={<MapPin className=\"w-6 h-6\" />} />\r\n          <DashboardCard title=\"Vehicles\" value={stats.ebikes.toString()} href=\"/vehicles\" icon={<Bike className=\"w-6 h-6\" />} />\r\n          <DashboardCard title=\"Bookings (This Month)\" value={stats.bookings.toString()} href=\"/bookings\" icon={<FileTextIcon className=\"w-6 h-6\" />} />\r\n          <DashboardCard title=\"Revenue (This Month)\" value={formatCurrency(stats.revenue)} href=\"/my-business/revenue\" icon={<DollarSign className=\"w-6 h-6\" />} />\r\n          <DashboardCard icon={<ClipboardList className=\"w-6 h-6\" />} title=\"Programs\" value=\"Manage\" href=\"/my-business/programs\" />\r\n          <DashboardCard title=\"Staff\" value={stats.staffs.toString()} href=\"/my-business/staff\" icon={<Users className=\"w-6 h-6\" />} />\r\n          <DashboardCard title=\"Vehicle Issues\" value={stats.issues.toString()} href=\"/vehicle-issues\" icon={<Wrench className=\"w-6 h-6\" />} />\r\n          <DashboardCard title=\"Batteries\" value={stats.batteries.toString()} href=\"/battery\" icon={<BatteryCharging className=\"w-6 h-6\" />} />\r\n          <DashboardCard title=\"Accessories\" value={stats.accessories.toString()} href=\"/accessories\" icon={<Package className=\"w-6 h-6\" />} />\r\n        </DashboardGrid1>\r\n\r\n        <DashboardGrid2>\r\n          <InfoCard title=\"üìà Revenue Overview\">\r\n            <p className=\"text-2xl font-bold\">\r\n              {formatCurrency(stats.revenue)} from {stats.bookings} bookings this month\r\n            </p>\r\n          </InfoCard>\r\n\r\n          <InfoCard title=\"üìù Recent Activity\">\r\n            <RecentActivityItem text=\"New booking received from John Doe\" />\r\n            <RecentActivityItem text='Station \"My Khe Beach\" updated' />\r\n            <RecentActivityItem text='Vehicle \"VIN DE0183\" marked as under maintenance' />\r\n            <RecentActivityItem text='New model \"EMOVE Flex\" added' />\r\n          </InfoCard>\r\n        </DashboardGrid2>\r\n\r\n        <section className=\"bg-white rounded-2xl shadow p-6 border border-gray-200\">\r\n          <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">‚ö° Quick Actions</h2>\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 md:grid-cols-4 gap-4\">\r\n            <QuickAction label=\"Add New Station\" href=\"/my-business/stations\" />\r\n            <QuickAction label=\"Create Vehicle Model\" href=\"/vehicles\" />\r\n            <QuickAction label=\"Assign Staff\" href=\"/my-business/staff\" />\r\n            <QuickAction label=\"Form Builder\" href=\"/my-business/form-builder\" />\r\n            <QuickAction label=\"View Bookings\" href=\"/bookings\" />\r\n            <QuickAction label=\"Upload Invoice\" href=\"/my-business/documents\" />\r\n            <QuickAction label=\"View Reports\" href=\"/reports\" />\r\n            <QuickAction label=\"Manage Vehicle Issues\" href=\"/vehicle-issues\" />\r\n            <QuickAction label=\"Manage Accessories\" href=\"/accessories\" />\r\n          </div>\r\n        </section>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DashboardGrid1({ children }: { children: React.ReactNode }) {\r\n  return <section className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\">{children}</section>;\r\n}\r\n\r\nfunction DashboardGrid2({ children }: { children: React.ReactNode }) {\r\n  return <section className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6\">{children}</section>;\r\n}\r\n\r\nfunction DashboardCard({\r\n  title,\r\n  value,\r\n  href,\r\n  icon,\r\n}: {\r\n  title: string;\r\n  value: string;\r\n  href: string;\r\n  icon: JSX.Element;\r\n}) {\r\n  return (\r\n    <Link\r\n      href={href}\r\n      className=\"bg-white p-4 rounded-xl shadow hover:shadow-lg transition border border-gray-200 flex items-center gap-4\"\r\n    >\r\n      <div className=\"text-[#00d289] bg-[#e6fff5] rounded-full p-3 flex items-center justify-center w-10 h-10\">\r\n        {icon}\r\n      </div>\r\n      <div>\r\n        <p className=\"text-sm text-gray-500\">{title}</p>\r\n        <h3 className=\"text-lg font-bold text-gray-800\">{value}</h3>\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\n\r\nfunction InfoCard({ title, children }: { title: string; children: React.ReactNode }) {\r\n  return (\r\n    <div className=\"bg-white rounded-2xl p-6 border shadow space-y-2\">\r\n      <h2 className=\"text-xl font-semibold text-gray-800\">{title}</h2>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction RecentActivityItem({ text }: { text: string }) {\r\n  return (\r\n    <li className=\"flex items-start gap-2\">\r\n      <FileText className=\"mt-0.5 w-4 h-4 text-[#00d289]\" />\r\n      <span>{text}</span>\r\n    </li>\r\n  );\r\n}\r\n\r\nfunction QuickAction({ label, href }: { label: string; href: string }) {\r\n  return (\r\n    <Link\r\n      href={href}\r\n      className=\"block bg-[#00d289] hover:bg-[#00b67a] text-white text-center font-medium px-4 py-3 rounded-xl transition\"\r\n    >\r\n      {label}\r\n    </Link>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2575, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/my-business/dashboards/PrivateProviderDashboard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { collection, getDocs, query, where } from 'firebase/firestore';\r\nimport { db } from '@/src/firebaseConfig';\r\nimport { useUser } from '@/src/context/AuthContext';\r\nimport Header from '@/src/components/landingpage/Header';\r\nimport Footer from '@/src/components/landingpage/Footer';\r\nimport Link from 'next/link';\r\nimport {\r\n  Bike,\r\n  FileText,\r\n  LineChart,\r\n  Star,\r\n  Wrench,\r\n  ClipboardList,\r\n  PackagePlus,\r\n} from 'lucide-react';\r\n\r\ninterface DashboardStats {\r\n  ebikes: number;\r\n  issues: number;\r\n  accessories: number;\r\n}\r\n\r\nexport default function PrivateProviderDashboard() {\r\n  const { user } = useUser();\r\n  const [stats, setStats] = useState<DashboardStats>({\r\n    ebikes: 0,\r\n    issues: 0,\r\n    accessories: 0,\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchStats = async () => {\r\n      if (!user?.uid) return;\r\n\r\n      const companySnap = await getDocs(\r\n        query(collection(db, 'rentalCompanies'), where('ownerId', '==', user.uid))\r\n      );\r\n      if (companySnap.empty) return;\r\n\r\n      const companyId = companySnap.docs[0].id;\r\n\r\n      const ebikeSnap = await getDocs(\r\n        query(collection(db, 'ebikes'), where('companyId', '==', companyId))\r\n      );\r\n      const issuesSnap = await getDocs(\r\n        query(collection(db, 'vehicleIssues'), where('companyId', '==', companyId))\r\n      );\r\n      const accessoriesSnap = await getDocs(\r\n        query(collection(db, 'accessories'), where('companyId', '==', companyId))\r\n      );\r\n\r\n      setStats({\r\n        ebikes: ebikeSnap.size,\r\n        issues: issuesSnap.size,\r\n        accessories: accessoriesSnap.size,\r\n      });\r\n\r\n      setLoading(false);\r\n    };\r\n\r\n    fetchStats();\r\n  }, [user]);\r\n\r\n  if (loading) return <div className=\"text-center py-10\">Loading...</div>;\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-gray-50\">\r\n      <Header />\r\n\r\n      <main className=\"flex-1 px-6 py-10 space-y-10\">\r\n        <h1 className=\"text-3xl font-bold text-center text-gray-800\">üö¥ Private Provider Dashboard</h1>\r\n\r\n        <DashboardGrid>\r\n          <DashboardCard\r\n            title=\"My eBikes\"\r\n            value={stats.ebikes.toString()}\r\n            href=\"/ebikes\"\r\n            icon={<Bike className=\"w-6 h-6\" />}\r\n          />\r\n          <DashboardCard\r\n            title=\"Vehicle Issues\"\r\n            value={stats.issues.toString()}\r\n            href=\"/vehicle-issues\"\r\n            icon={<Wrench className=\"w-6 h-6\" />}\r\n          />\r\n          <DashboardCard\r\n            title=\"Accessories\"\r\n            value={stats.accessories.toString()}\r\n            href=\"/accessories\"\r\n            icon={<PackagePlus className=\"w-6 h-6\" />}\r\n          />\r\n          <DashboardCard\r\n            title=\"Ratings & Reviews\"\r\n            value=\"4.7/5\"\r\n            href=\"/reviews\"\r\n            icon={<Star className=\"w-6 h-6\" />}\r\n          />\r\n          <DashboardCard\r\n            title=\"Earnings Overview\"\r\n            value=\"$1,280\"\r\n            href=\"/reports\"\r\n            icon={<LineChart className=\"w-6 h-6\" />}\r\n          />\r\n          <DashboardCard\r\n            icon={<ClipboardList className=\"w-6 h-6\" />}\r\n            title=\"Programs\"\r\n            value=\"Manage\"\r\n            href=\"/my-business/programs\"\r\n          />\r\n        </DashboardGrid>\r\n\r\n        <section className=\"bg-white rounded-2xl shadow p-6 border border-gray-200\">\r\n          <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">‚ö° Quick Actions</h2>\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\">\r\n            <QuickAction label=\"Add New eBike\" href=\"/ebikes\" />\r\n            <QuickAction label=\"Check Reviews\" href=\"/reviews\" />\r\n            <QuickAction label=\"Form Builder\" href=\"/my-business/form-builder\" />\r\n            <QuickAction label=\"View Reports\" href=\"/reports\" />\r\n            <QuickAction label=\"Manage Vehicle Issues\" href=\"/vehicle-issues\" />\r\n          </div>\r\n        </section>\r\n\r\n        <section className=\"bg-white rounded-2xl p-6 border shadow\">\r\n          <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">üìù Recent Activity</h2>\r\n          <ul className=\"text-sm text-gray-700 space-y-2\">\r\n            <RecentActivityItem text='eBike \"VN-0123\" marked as available' />\r\n            <RecentActivityItem text=\"New customer review received\" />\r\n            <RecentActivityItem text='Maintenance log updated for eBike \"VN-0088\"' />\r\n          </ul>\r\n        </section>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DashboardGrid({ children }: { children: React.ReactNode }) {\r\n  return <section className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">{children}</section>;\r\n}\r\n\r\nfunction DashboardCard({\r\n  title,\r\n  value,\r\n  href,\r\n  icon,\r\n}: {\r\n  title: string;\r\n  value: string;\r\n  href: string;\r\n  icon: JSX.Element;\r\n}) {\r\n  return (\r\n    <Link\r\n      href={href}\r\n      className=\"bg-white p-4 rounded-xl shadow hover:shadow-lg transition border border-gray-200 flex items-center gap-4\"\r\n    >\r\n      <div className=\"text-[#00d289] bg-[#e6fff5] rounded-full p-3 flex items-center justify-center w-10 h-10\">\r\n        {icon}\r\n      </div>\r\n      <div>\r\n        <p className=\"text-sm text-gray-500\">{title}</p>\r\n        <h3 className=\"text-lg font-bold text-gray-800\">{value}</h3>\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\n\r\nfunction QuickAction({ label, href }: { label: string; href: string }) {\r\n  return (\r\n    <Link\r\n      href={href}\r\n      className=\"block bg-[#00d289] hover:bg-[#00b67a] text-white text-center font-medium px-4 py-3 rounded-xl transition\"\r\n    >\r\n      {label}\r\n    </Link>\r\n  );\r\n}\r\n\r\nfunction RecentActivityItem({ text }: { text: string }) {\r\n  return (\r\n    <li className=\"flex items-start gap-2\">\r\n      <FileText className=\"mt-0.5 w-4 h-4 text-[#00d289]\" />\r\n      <span>{text}</span>\r\n    </li>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2991, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/my-business/dashboards/AgentDashboard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport Header from '@/src/components/landingpage/Header';\r\nimport Footer from '@/src/components/landingpage/Footer';\r\nimport { useUser } from '@/src/context/AuthContext';\r\nimport { collection, getDocs, query, where } from 'firebase/firestore';\r\nimport { db } from '@/src/firebaseConfig';\r\nimport Link from 'next/link';\r\nimport {\r\n  Handshake,\r\n  Users,\r\n  DollarSign,\r\n  FileText,\r\n  BarChart2,\r\n} from 'lucide-react';\r\n\r\ninterface ActivityLog {\r\n  bookingId: string;\r\n  commission: number;\r\n}\r\n\r\ninterface DashboardData {\r\n  referrals: number;\r\n  totalCommission: number;\r\n  paidCommission: number;\r\n  pendingCommission: number;\r\n  activity: ActivityLog[];\r\n  paymentRequests: number;\r\n}\r\n\r\nexport default function AgentDashboard() {\r\n  const { user } = useUser();\r\n  const [data, setData] = useState<DashboardData>({\r\n    referrals: 0,\r\n    totalCommission: 0,\r\n    paidCommission: 0,\r\n    pendingCommission: 0,\r\n    activity: [],\r\n    paymentRequests: 0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (!user) return;\r\n\r\n    const fetchData = async () => {\r\n      const bookingsQuery = query(collection(db, 'bookings'), where('agentId', '==', user.uid));\r\n      const bookingsSnap = await getDocs(bookingsQuery);\r\n\r\n      let total = 0, paid = 0, pending = 0;\r\n      const logs: ActivityLog[] = [];\r\n\r\n      bookingsSnap.forEach((doc) => {\r\n        const booking = doc.data();\r\n        const amount = booking.agentCommission || 0;\r\n        total += amount;\r\n        if (booking.agentCommissionPaid) paid += amount;\r\n        else pending += amount;\r\n\r\n        logs.push({\r\n          bookingId: doc.id,\r\n          commission: amount,\r\n        });\r\n      });\r\n\r\n      const requestQuery = query(collection(db, 'paymentRequests'), where('agentId', '==', user.uid));\r\n      const requestSnap = await getDocs(requestQuery);\r\n\r\n      setData({\r\n        referrals: bookingsSnap.size,\r\n        totalCommission: total,\r\n        paidCommission: paid,\r\n        pendingCommission: pending,\r\n        activity: logs.slice(0, 5),\r\n        paymentRequests: requestSnap.size,\r\n      });\r\n    };\r\n\r\n    fetchData();\r\n  }, [user]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-gray-50\">\r\n      <Header />\r\n\r\n      <main className=\"flex-1 px-6 py-10 space-y-10\">\r\n        <h1 className=\"text-3xl font-bold text-center text-gray-800\">ü§ù Agent Dashboard</h1>\r\n\r\n        <DashboardGrid>\r\n          <DashboardCard title=\"Referrals\" value={data.referrals.toString()} href=\"#\" icon={<Users className=\"w-6 h-6\" />} />\r\n          <DashboardCard title=\"Total Commission\" value={`$${data.totalCommission.toLocaleString()}`} href=\"#\" icon={<DollarSign className=\"w-6 h-6\" />} />\r\n          <DashboardCard title=\"Paid Commission\" value={`$${data.paidCommission.toLocaleString()}`} href=\"#\" icon={<DollarSign className=\"w-6 h-6\" />} />\r\n          <DashboardCard title=\"Pending Commission\" value={`$${data.pendingCommission.toLocaleString()}`} href=\"#\" icon={<DollarSign className=\"w-6 h-6\" />} />\r\n          <DashboardCard title=\"Join New Program\" value=\"Available\" href=\"/my-business/programs\" icon={<Handshake className=\"w-6 h-6\" />} />\r\n          <DashboardCard title=\"Payment Requests\" value={`${data.paymentRequests} times`} href=\"/my-business/earnings\" icon={<BarChart2 className=\"w-6 h-6\" />} />\r\n        </DashboardGrid>\r\n\r\n        <section className=\"bg-white rounded-2xl p-6 border shadow\">\r\n          <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">üìù Recent Activity</h2>\r\n          <ul className=\"text-sm text-gray-700 space-y-2\">\r\n            {data.activity.length > 0 ? (\r\n              data.activity.map((log, index) => (\r\n                <li key={index} className=\"flex items-start gap-2\">\r\n                  <FileText className=\"mt-0.5\" />\r\n                  <Link href={`/bookings/${log.bookingId}`} className=\"text-blue-500 underline\">\r\n                    Booking {log.bookingId}\r\n                  </Link>\r\n                  <span>- Commission ${log.commission.toLocaleString()}</span>\r\n                </li>\r\n              ))\r\n            ) : (\r\n              <p className=\"text-gray-500\">No activity yet.</p>\r\n            )}\r\n          </ul>\r\n        </section>\r\n\r\n        <section className=\"bg-white rounded-2xl shadow p-6 border border-gray-200\">\r\n          <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">‚ö° Quick Actions</h2>\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\">\r\n            <QuickAction label=\"Refer a Customer\" href=\"/rent\" />\r\n            <QuickAction label=\"View Commission History\" href=\"/my-business/earnings\" />\r\n            <QuickAction label=\"Join New Program\" href=\"/my-business/programs\" />\r\n            {data.pendingCommission > 0 && <QuickAction label=\"Request Payment\" href=\"/my-business/request-payment\" />}\r\n          </div>\r\n        </section>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DashboardGrid({ children }: { children: React.ReactNode }) {\r\n  return <section className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6\">{children}</section>;\r\n}\r\n\r\nfunction DashboardCard({ title, value, href, icon }: { title: string; value: string; href: string; icon: JSX.Element }) {\r\n  return (\r\n    <Link href={href} className=\"bg-white p-4 rounded-xl shadow hover:shadow-lg transition border border-gray-200 flex items-center gap-4\">\r\n      <div className=\"text-[#00d289] bg-[#e6fff5] rounded-full p-3 flex items-center justify-center w-10 h-10\">\r\n        {icon}\r\n      </div>\r\n      <div>\r\n        <p className=\"text-sm text-gray-500\">{title}</p>\r\n        <h3 className=\"text-lg font-bold text-gray-800\">{value}</h3>\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\n\r\nfunction QuickAction({ label, href }: { label: string; href: string }) {\r\n  return (\r\n    <Link href={href} className=\"block bg-[#00d289] hover:bg-[#00b67a] text-white text-center font-medium px-4 py-3 rounded-xl transition\">\r\n      {label}\r\n    </Link>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3401, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/ui/card.tsx"],"sourcesContent":["// Card Component\r\nimport { ReactNode } from 'react';\r\n\r\ninterface CardProps {\r\n  className?: string;\r\n  children: ReactNode;\r\n}\r\n\r\nexport const Card = ({ className = '', children }: CardProps) => {\r\n  return <div className={`bg-white rounded-xl shadow p-4 ${className}`}>{children}</div>;\r\n};\r\n\r\nexport const CardContent = ({ className = '', children }: CardProps) => {\r\n  return <div className={className}>{children}</div>;\r\n};\r\n"],"names":[],"mappings":"AAAA,iBAAiB;;;;;;;AAQV,MAAM,OAAO,CAAC,EAAE,YAAY,EAAE,EAAE,QAAQ,EAAa;IAC1D,qBAAO,8OAAC;QAAI,WAAW,CAAC,+BAA+B,EAAE,WAAW;kBAAG;;;;;;AACzE;AAEO,MAAM,cAAc,CAAC,EAAE,YAAY,EAAE,EAAE,QAAQ,EAAa;IACjE,qBAAO,8OAAC;QAAI,WAAW;kBAAY;;;;;;AACrC","debugId":null}},
    {"offset": {"line": 3434, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/my-business/dashboards/AdminDashboard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useRouter } from 'next/navigation';\r\nimport Header from '@/src/components/landingpage/Header';\r\nimport Footer from '@/src/components/landingpage/Footer';\r\n\r\nimport { Card, CardContent } from '@/src/components/ui/card';\r\nimport {\r\n  FaStore,\r\n  FaMotorcycle,\r\n  FaUser,\r\n  FaUserCog,\r\n  FaBatteryFull,\r\n  FaPencilAlt,\r\n  FaWrench,\r\n  FaClipboardList,\r\n  FaToolbox,\r\n  FaFileExport,\r\n} from 'react-icons/fa';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faFileContract } from '@fortawesome/free-solid-svg-icons';\r\n\r\nexport default function AdminDashboard() {\r\n  const router = useRouter();\r\n\r\n  const items = [\r\n    {\r\n      icon: <FaStore className=\"w-6 h-6 text-[#00d289]\" />,\r\n      title: 'Rental Companies',\r\n      description: 'Manage all rental businesses',\r\n      route: '/rental-companies',\r\n    },\r\n    {\r\n      icon: <FaMotorcycle className=\"w-6 h-6 text-[#00d289]\" />,\r\n      title: 'Vehicle Management',\r\n      description: 'Manage all Vehicles in the system',\r\n      route: '/vehicles',\r\n    },\r\n    {\r\n      icon: <FaWrench className=\"w-6 h-6 text-[#00d289]\" />,\r\n      title: 'Vehicle Issues Management',\r\n      description: 'Monitor and manage all vehicle issues',\r\n      route: '/vehicle-issues',\r\n    },\r\n    {\r\n      icon: <FaUser className=\"w-6 h-6 text-[#00d289]\" />,\r\n      title: 'Users Management',\r\n      description: 'Control user accounts and access',\r\n      route: '/users',\r\n    },\r\n    {\r\n      icon: <FaUserCog className=\"w-6 h-6 text-[#00d289]\" />,\r\n      title: 'Staff Management',\r\n      description: 'Manage all staff members in the system',\r\n      route: '/my-business/staff',\r\n    },\r\n    {\r\n      icon: <FaUserCog className=\"w-6 h-6 text-[#00d289]\" />,\r\n      title: 'Customers Management',\r\n      description: 'View and manage customer data',\r\n      route: '/customers',\r\n    },\r\n    {\r\n      icon: <FaBatteryFull className=\"w-6 h-6 text-[#00d289]\" />,\r\n      title: 'Battery Management',\r\n      description: 'Track battery inventory and status',\r\n      route: '/battery',\r\n    },\r\n    {\r\n      icon: <FaToolbox className=\"w-6 h-6 text-[#00d289]\" />,\r\n      title: 'Accessories Management',\r\n      description: 'Manage accessories and parts',\r\n      route: '/accessories',\r\n    },\r\n    {\r\n      icon: <FaFileExport className=\"w-6 h-6 text-[#00d289]\" />,\r\n      title: 'Accessory Export',\r\n      description: 'Export accessory inventory to Excel',\r\n      route: '/accessories/exports',\r\n    },\r\n    {\r\n      icon: <FaClipboardList className=\"w-6 h-6 text-[#00d289]\" />,\r\n      title: 'Bookings',\r\n      description: 'View and manage all bookings',\r\n      route: '/bookings',\r\n    },\r\n    {\r\n      icon: <FontAwesomeIcon icon={faFileContract} className=\"w-5 h-5 text-[#00d289]\" />,\r\n      title: 'Subscription Packages',\r\n      description: 'Set up pricing and rental packages',\r\n      route: '/subscriptionPackages',\r\n    },\r\n    {\r\n      icon: <FaPencilAlt className=\"w-6 h-6 text-[#00d289]\" />,\r\n      title: 'Programs',\r\n      description: 'Manage special programs and promotions',\r\n      route: '/my-business/programs',\r\n    },\r\n    {\r\n      icon: <FaPencilAlt className=\"w-6 h-6 text-[#00d289]\" />,\r\n      title: 'Form Builder',\r\n      description: 'Customize rental forms for providers',\r\n      route: '/my-business/form-builder',\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"flex flex-col min-h-screen bg-gray-50\">\r\n      <Header />\r\n\r\n      <main className=\"flex-grow p-6 space-y-6\">\r\n        <h1 className=\"text-3xl font-bold text-center text-gray-800\">üõ°Ô∏è Admin Dashboard</h1>\r\n\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {items.map((item) => (\r\n            <div\r\n              key={item.title}\r\n              onClick={() => router.push(item.route)}\r\n              className=\"cursor-pointer\"\r\n            >\r\n              <Card className=\"hover:shadow-lg transition-shadow\">\r\n                <CardContent className=\"p-4 flex items-center space-x-4\">\r\n                  {item.icon}\r\n                  <div>\r\n                    <p className=\"font-semibold\">{item.title}</p>\r\n                    <p className=\"text-sm text-gray-500\">{item.description}</p>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AACA;AAYA;AACA;AApBA;;;;;;;;;AAsBe,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,QAAQ;QACZ;YACE,oBAAM,8OAAC,8IAAA,CAAA,UAAO;gBAAC,WAAU;;;;;;YACzB,OAAO;YACP,aAAa;YACb,OAAO;QACT;QACA;YACE,oBAAM,8OAAC,8IAAA,CAAA,eAAY;gBAAC,WAAU;;;;;;YAC9B,OAAO;YACP,aAAa;YACb,OAAO;QACT;QACA;YACE,oBAAM,8OAAC,8IAAA,CAAA,WAAQ;gBAAC,WAAU;;;;;;YAC1B,OAAO;YACP,aAAa;YACb,OAAO;QACT;QACA;YACE,oBAAM,8OAAC,8IAAA,CAAA,SAAM;gBAAC,WAAU;;;;;;YACxB,OAAO;YACP,aAAa;YACb,OAAO;QACT;QACA;YACE,oBAAM,8OAAC,8IAAA,CAAA,YAAS;gBAAC,WAAU;;;;;;YAC3B,OAAO;YACP,aAAa;YACb,OAAO;QACT;QACA;YACE,oBAAM,8OAAC,8IAAA,CAAA,YAAS;gBAAC,WAAU;;;;;;YAC3B,OAAO;YACP,aAAa;YACb,OAAO;QACT;QACA;YACE,oBAAM,8OAAC,8IAAA,CAAA,gBAAa;gBAAC,WAAU;;;;;;YAC/B,OAAO;YACP,aAAa;YACb,OAAO;QACT;QACA;YACE,oBAAM,8OAAC,8IAAA,CAAA,YAAS;gBAAC,WAAU;;;;;;YAC3B,OAAO;YACP,aAAa;YACb,OAAO;QACT;QACA;YACE,oBAAM,8OAAC,8IAAA,CAAA,eAAY;gBAAC,WAAU;;;;;;YAC9B,OAAO;YACP,aAAa;YACb,OAAO;QACT;QACA;YACE,oBAAM,8OAAC,8IAAA,CAAA,kBAAe;gBAAC,WAAU;;;;;;YACjC,OAAO;YACP,aAAa;YACb,OAAO;QACT;QACA;YACE,oBAAM,8OAAC,oKAAA,CAAA,kBAAe;gBAAC,MAAM,wKAAA,CAAA,iBAAc;gBAAE,WAAU;;;;;;YACvD,OAAO;YACP,aAAa;YACb,OAAO;QACT;QACA;YACE,oBAAM,8OAAC,8IAAA,CAAA,cAAW;gBAAC,WAAU;;;;;;YAC7B,OAAO;YACP,aAAa;YACb,OAAO;QACT;QACA;YACE,oBAAM,8OAAC,8IAAA,CAAA,cAAW;gBAAC,WAAU;;;;;;YAC7B,OAAO;YACP,aAAa;YACb,OAAO;QACT;KACD;IAED,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,2IAAA,CAAA,UAAM;;;;;0BAEP,8OAAC;gBAAK,WAAU;;kCACd,8OAAC;wBAAG,WAAU;kCAA+C;;;;;;kCAE7D,8OAAC;wBAAI,WAAU;kCACZ,MAAM,GAAG,CAAC,CAAC,qBACV,8OAAC;gCAEC,SAAS,IAAM,OAAO,IAAI,CAAC,KAAK,KAAK;gCACrC,WAAU;0CAEV,cAAA,8OAAC,gIAAA,CAAA,OAAI;oCAAC,WAAU;8CACd,cAAA,8OAAC,gIAAA,CAAA,cAAW;wCAAC,WAAU;;4CACpB,KAAK,IAAI;0DACV,8OAAC;;kEACC,8OAAC;wDAAE,WAAU;kEAAiB,KAAK,KAAK;;;;;;kEACxC,8OAAC;wDAAE,WAAU;kEAAyB,KAAK,WAAW;;;;;;;;;;;;;;;;;;;;;;;+BATvD,KAAK,KAAK;;;;;;;;;;;;;;;;0BAkBvB,8OAAC,2IAAA,CAAA,UAAM;;;;;;;;;;;AAGb","debugId":null}},
    {"offset": {"line": 3714, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/my-business/dashboards/StaffDashboard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { db } from '@/src/firebaseConfig';\r\nimport { collection, getDocs, query, where, doc, getDoc } from 'firebase/firestore';\r\nimport { useUser } from '@/src/context/AuthContext';\r\nimport { Loader, Users, Building2, MapPin, Wrench, FileText } from 'lucide-react';\r\nimport { Button } from '@/src/components/ui/button';\r\nimport { useRouter } from 'next/navigation';\r\nimport Header from '@/src/components/landingpage/Header';\r\nimport Footer from '@/src/components/landingpage/Footer';\r\nimport Link from 'next/link';\r\n\r\ninterface StaffEntry {\r\n  id: string;\r\n  companyId: string;\r\n  stationId?: string;\r\n  role: string;\r\n  companyName?: string;\r\n  stationName?: string;\r\n}\r\n\r\nexport default function StaffDashboard() {\r\n  const { user } = useUser();\r\n  const router = useRouter();\r\n  const [loading, setLoading] = useState(true);\r\n  const [staffRoles, setStaffRoles] = useState<StaffEntry[]>([]);\r\n\r\n  useEffect(() => {\r\n    const fetchStaffRoles = async () => {\r\n      if (!user?.uid) return;\r\n\r\n      const snap = await getDocs(query(collection(db, 'staffs'), where('userId', '==', user.uid)));\r\n      const results: StaffEntry[] = [];\r\n\r\n      for (const docSnap of snap.docs) {\r\n        const data = docSnap.data();\r\n        const staffEntry: StaffEntry = {\r\n          id: docSnap.id,\r\n          companyId: data.companyId,\r\n          stationId: data.stationId || '',\r\n          role: data.role,\r\n        };\r\n\r\n        const companySnap = await getDoc(doc(db, 'rentalCompanies', data.companyId));\r\n        if (companySnap.exists()) staffEntry.companyName = companySnap.data().name;\r\n\r\n        if (data.stationId) {\r\n          const stationSnap = await getDoc(doc(db, 'rentalStations', data.stationId));\r\n          if (stationSnap.exists()) staffEntry.stationName = stationSnap.data().name;\r\n        }\r\n\r\n        results.push(staffEntry);\r\n      }\r\n\r\n      setStaffRoles(results);\r\n      setLoading(false);\r\n    };\r\n\r\n    fetchStaffRoles();\r\n  }, [user]);\r\n\r\n  if (loading) return <div className=\"flex justify-center items-center py-10\"><Loader className=\"animate-spin w-6 h-6 text-gray-500\" /></div>;\r\n\r\n  if (!staffRoles.length) {\r\n    return (\r\n      <div className=\"min-h-screen flex flex-col\">\r\n        <Header />\r\n        <main className=\"flex-1 flex items-center justify-center text-gray-500 text-lg\">No staff roles found.</main>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-gray-50\">\r\n      <Header />\r\n\r\n      <main className=\"flex-1 p-6 space-y-10 max-w-7xl mx-auto\">\r\n        <h1 className=\"text-3xl font-bold text-center text-gray-800\">üë∑ Staff Dashboard</h1>\r\n\r\n        {/* Overview */}\r\n        <section className=\"grid grid-cols-2 md:grid-cols-4 gap-6\">\r\n          <DashboardCard icon={<Building2 />} title=\"Companies\" value={new Set(staffRoles.map(r => r.companyId)).size.toString()} />\r\n          <DashboardCard icon={<MapPin />} title=\"Stations\" value={staffRoles.filter(r => r.stationId).length.toString()} />\r\n          <DashboardCard icon={<Users />} title=\"Total Roles\" value={staffRoles.length.toString()} />\r\n          <DashboardCard icon={<Wrench />} title=\"Technician Roles\" value={staffRoles.filter(r => r.role === 'technician').length.toString()} />\r\n        </section>\r\n\r\n        {/* Staff Role Actions */}\r\n        <section className=\"space-y-6\">\r\n          {staffRoles.map((staff) => (\r\n            <div key={staff.id} className=\"bg-white rounded-xl border shadow p-6 space-y-4\">\r\n              <div className=\"space-y-1\">\r\n                <p><strong>üè¢ Company:</strong> {staff.companyName || 'N/A'}</p>\r\n                <p><strong>üìç Station:</strong> {staff.stationName || 'No Station'}</p>\r\n                <p><strong>üß∞ Role:</strong> <span className=\"capitalize\">{staff.role}</span></p>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\">\r\n                {(staff.role === 'support' || staff.role === 'station_manager') && (\r\n                  <>\r\n                    <QuickAction label=\"üö≤ Rent a Bike\" href={`/rent?companyId=${staff.companyId}&stationId=${staff.stationId}`} />\r\n                    <QuickAction label=\"üîÑ Return eBike\" href={`/return?companyId=${staff.companyId}&stationId=${staff.stationId}`} />\r\n                    <QuickAction label=\"üö® Report Vehicle Issue\" href={`/vehicle-issues/report?companyId=${staff.companyId}&stationId=${staff.stationId}`} />\r\n                    {staff.role === 'station_manager' && (\r\n                      <QuickAction label=\"üìä View Station Stats\" href={`/stats?companyId=${staff.companyId}&stationId=${staff.stationId}`} />\r\n                    )}\r\n                  </>\r\n                )}\r\n\r\n                {staff.role === 'technician' && (\r\n                  <QuickAction label=\"üõ† Maintenance\" href=\"/maintain\" />\r\n                )}\r\n\r\n                {staff.role === 'company_admin' && (\r\n                  <>\r\n                    <QuickAction label=\"üë• Manage Staff\" href=\"/manage-staff\" />\r\n                    <QuickAction label=\"üö≤ Manage eBikes\" href=\"/ebikes\" />\r\n                    <QuickAction label=\"üì¶ Manage Orders\" href=\"/rental-orders\" />\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </section>\r\n\r\n        <section className=\"bg-white rounded-2xl shadow p-6 border border-gray-200\">\r\n          <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">üìù Recent Activity</h2>\r\n          <ul className=\"text-sm text-gray-700 space-y-2\">\r\n            <li className=\"flex items-start gap-2\"><FileText className=\"mt-0.5\" /> Completed check-in for eBike #VN0087</li>\r\n            <li className=\"flex items-start gap-2\"><FileText className=\"mt-0.5\" /> New vehicle issue reported at station</li>\r\n            <li className=\"flex items-start gap-2\"><FileText className=\"mt-0.5\" /> Updated rental order #RB1029</li>\r\n          </ul>\r\n        </section>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DashboardCard({ icon, title, value }: { icon: JSX.Element; title: string; value: string }) {\r\n  return (\r\n    <div className=\"bg-white p-4 rounded-xl shadow hover:shadow-lg transition border border-gray-200 flex items-center gap-4\">\r\n      <div className=\"text-[#00d289] bg-[#e6fff5] rounded-full p-2\">{icon}</div>\r\n      <div>\r\n        <p className=\"text-sm text-gray-500\">{title}</p>\r\n        <h3 className=\"text-lg font-bold text-gray-800\">{value}</h3>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction QuickAction({ label, href }: { label: string; href: string }) {\r\n  return (\r\n    <Link href={href} className=\"block bg-[#00d289] hover:bg-[#00b67a] text-white text-center font-medium px-4 py-3 rounded-xl transition\">\r\n      {label}\r\n    </Link>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4220, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/landingpage/UserTopMenu.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useRouter } from 'next/navigation';\r\nimport {\r\n  FaCalendarAlt,\r\n  FaStore,\r\n  FaMotorcycle,\r\n  FaUser,\r\n  FaUserCog,\r\n  FaBatteryFull,\r\n  FaToolbox, // ‚úÖ Icon cho Accessories\r\n} from 'react-icons/fa';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faFileContract } from '@fortawesome/free-solid-svg-icons';\r\nimport { useUser } from '@/src/context/AuthContext';\r\nimport { IconType } from 'react-icons';\r\n\r\ntype MenuItem = {\r\n  label: string;\r\n  path: string;\r\n  icon: IconType | typeof faFileContract;\r\n  roles: string[];\r\n};\r\n\r\nconst menuItems: MenuItem[] = [\r\n  {\r\n    label: 'Bookings',\r\n    path: '/bookings',\r\n    icon: FaCalendarAlt,\r\n    roles: ['admin', 'company_owner', 'private_owner', 'company_admin', 'station_manager', 'staff'],\r\n  },\r\n  {\r\n    label: 'Rental Companies',\r\n    path: '/rental-companies',\r\n    icon: FaStore,\r\n    roles: ['admin'],\r\n  },\r\n  {\r\n    label: 'Vehicle Management',\r\n    path: '/vehicles',\r\n    icon: FaMotorcycle,\r\n    roles: ['admin', 'company_owner', 'private_owner', 'company_admin', 'station_manager', 'staff'],\r\n  },\r\n  {\r\n    label: 'Users Management',\r\n    path: '/users',\r\n    icon: FaUser,\r\n    roles: ['admin'],\r\n  },\r\n  {\r\n    label: 'Customers Management',\r\n    path: '/customers',\r\n    icon: FaUserCog,\r\n    roles: ['admin', 'company_owner', 'private_owner', 'company_admin', 'staff'],\r\n  },\r\n  {\r\n    label: 'Battery Management',\r\n    path: '/battery',\r\n    icon: FaBatteryFull,\r\n    roles: ['admin', 'company_owner', 'private_owner', 'company_admin', 'station_manager', 'technician'],\r\n  },\r\n  {\r\n    label: 'Accessories Management',\r\n    path: '/accessories',\r\n    icon: FaToolbox,\r\n    roles: ['admin', 'company_owner', 'private_owner', 'company_admin', 'station_manager', 'technician'],\r\n  },\r\n  {\r\n    label: 'Accessory Exports',\r\n    path: '/accessories/exports',\r\n    icon: FaToolbox,\r\n    roles: ['admin', 'company_owner', 'private_owner', 'company_admin', 'station_manager', 'technician'],\r\n  },\r\n  {\r\n    label: 'Subscription Packages',\r\n    path: '/subscriptionPackages',\r\n    icon: faFileContract,\r\n    roles: ['admin', 'company_owner', 'private_owner', 'company_admin'],\r\n  },\r\n];\r\n\r\nexport default function UserTopMenu() {\r\n  const router = useRouter();\r\n  const { role } = useUser();\r\n\r\n  if (!role) return null;\r\n\r\n  const normalizedRole = role.toLowerCase();\r\n\r\n  const filteredMenu = menuItems.filter((item) =>\r\n    item.roles.includes(normalizedRole)\r\n  );\r\n\r\n  if (!filteredMenu.length) return null;\r\n\r\n  return (\r\n    <div className=\"hidden md:flex font-inter bg-[#00d289] text-white w-full px-1 py-2 justify-center gap-x-8 items-center\">\r\n      {filteredMenu.map((item) => (\r\n        <button\r\n          key={item.label}\r\n          onClick={() => router.push(item.path)}\r\n          className=\"flex items-center space-x-2 font-medium text-sm hover:underline\"\r\n        >\r\n          {'icon' in item &&\r\n            (typeof item.icon === 'function' ? (\r\n              <item.icon />\r\n            ) : (\r\n              <FontAwesomeIcon icon={item.icon} className=\"w-4 h-4\" />\r\n            ))}\r\n          <span>{item.label}</span>\r\n        </button>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AASA;AACA;AACA;AAdA;;;;;;;AAwBA,MAAM,YAAwB;IAC5B;QACE,OAAO;QACP,MAAM;QACN,MAAM,8IAAA,CAAA,gBAAa;QACnB,OAAO;YAAC;YAAS;YAAiB;YAAiB;YAAiB;YAAmB;SAAQ;IACjG;IACA;QACE,OAAO;QACP,MAAM;QACN,MAAM,8IAAA,CAAA,UAAO;QACb,OAAO;YAAC;SAAQ;IAClB;IACA;QACE,OAAO;QACP,MAAM;QACN,MAAM,8IAAA,CAAA,eAAY;QAClB,OAAO;YAAC;YAAS;YAAiB;YAAiB;YAAiB;YAAmB;SAAQ;IACjG;IACA;QACE,OAAO;QACP,MAAM;QACN,MAAM,8IAAA,CAAA,SAAM;QACZ,OAAO;YAAC;SAAQ;IAClB;IACA;QACE,OAAO;QACP,MAAM;QACN,MAAM,8IAAA,CAAA,YAAS;QACf,OAAO;YAAC;YAAS;YAAiB;YAAiB;YAAiB;SAAQ;IAC9E;IACA;QACE,OAAO;QACP,MAAM;QACN,MAAM,8IAAA,CAAA,gBAAa;QACnB,OAAO;YAAC;YAAS;YAAiB;YAAiB;YAAiB;YAAmB;SAAa;IACtG;IACA;QACE,OAAO;QACP,MAAM;QACN,MAAM,8IAAA,CAAA,YAAS;QACf,OAAO;YAAC;YAAS;YAAiB;YAAiB;YAAiB;YAAmB;SAAa;IACtG;IACA;QACE,OAAO;QACP,MAAM;QACN,MAAM,8IAAA,CAAA,YAAS;QACf,OAAO;YAAC;YAAS;YAAiB;YAAiB;YAAiB;YAAmB;SAAa;IACtG;IACA;QACE,OAAO;QACP,MAAM;QACN,MAAM,wKAAA,CAAA,iBAAc;QACpB,OAAO;YAAC;YAAS;YAAiB;YAAiB;SAAgB;IACrE;CACD;AAEc,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,8HAAA,CAAA,UAAO,AAAD;IAEvB,IAAI,CAAC,MAAM,OAAO;IAElB,MAAM,iBAAiB,KAAK,WAAW;IAEvC,MAAM,eAAe,UAAU,MAAM,CAAC,CAAC,OACrC,KAAK,KAAK,CAAC,QAAQ,CAAC;IAGtB,IAAI,CAAC,aAAa,MAAM,EAAE,OAAO;IAEjC,qBACE,8OAAC;QAAI,WAAU;kBACZ,aAAa,GAAG,CAAC,CAAC,qBACjB,8OAAC;gBAEC,SAAS,IAAM,OAAO,IAAI,CAAC,KAAK,IAAI;gBACpC,WAAU;;oBAET,UAAU,QACT,CAAC,OAAO,KAAK,IAAI,KAAK,2BACpB,8OAAC,KAAK,IAAI;;;;6CAEV,8OAAC,oKAAA,CAAA,kBAAe;wBAAC,MAAM,KAAK,IAAI;wBAAE,WAAU;;;;;4BAC7C;kCACH,8OAAC;kCAAM,KAAK,KAAK;;;;;;;eAVZ,KAAK,KAAK;;;;;;;;;;AAezB","debugId":null}},
    {"offset": {"line": 4392, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/lib/utils.ts"],"sourcesContent":["// src/lib/utils.ts\r\nexport function cn(...args: any[]) {\r\n    return args.filter(Boolean).join(\" \");\r\n  }\r\n  "],"names":[],"mappings":"AAAA,mBAAmB;;;;AACZ,SAAS,GAAG,GAAG,IAAW;IAC7B,OAAO,KAAK,MAAM,CAAC,SAAS,IAAI,CAAC;AACnC","debugId":null}},
    {"offset": {"line": 4405, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/ui/dialog.tsx"],"sourcesContent":["'use client';\r\n\r\nimport * as React from \"react\";\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\";\r\nimport { X } from \"lucide-react\";\r\nimport { cn } from \"@/src/lib/utils\";\r\n\r\nconst Dialog = DialogPrimitive.Root;\r\nconst DialogTrigger = DialogPrimitive.Trigger;\r\nconst DialogPortal = DialogPrimitive.Portal;\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm transition-all\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName;\r\n\r\nconst DialogContent = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DialogPortal>\r\n    <DialogOverlay />\r\n    <DialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed z-50 left-1/2 top-1/2 w-full max-w-lg -translate-x-1/2 -translate-y-1/2 rounded-xl bg-white p-6 shadow-lg transition-all\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 text-gray-500 hover:text-gray-700\">\r\n        <X className=\"h-5 w-5\" />\r\n      </DialogPrimitive.Close>\r\n    </DialogPrimitive.Content>\r\n  </DialogPortal>\r\n));\r\nDialogContent.displayName = DialogPrimitive.Content.displayName;\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div className={cn(\"mb-4 space-y-2 text-center\", className)} {...props} />\r\n);\r\nDialogHeader.displayName = \"DialogHeader\";\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold\", className)}\r\n    {...props}\r\n  />\r\n));\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName;\r\n\r\n// ‚úÖ B·ªï sung th√™m DialogDescription\r\nconst DialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-gray-500\", className)}\r\n    {...props}\r\n  />\r\n));\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName;\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div className={cn(\"flex justify-end gap-2 pt-4\", className)} {...props} />\r\n);\r\nDialogFooter.displayName = \"DialogFooter\";\r\n\r\nexport {\r\n  Dialog,\r\n  DialogTrigger,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogDescription, // ‚úÖ Export ra lu√¥n\r\n  DialogFooter,\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOA,MAAM,SAAS,kKAAA,CAAA,OAAoB;AACnC,MAAM,gBAAgB,kKAAA,CAAA,UAAuB;AAC7C,MAAM,eAAe,kKAAA,CAAA,SAAsB;AAE3C,MAAM,8BAAgB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,UAAuB;QACtB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kEACA;QAED,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,kKAAA,CAAA,UAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGnC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,kKAAA,CAAA,UAAuB;gBACtB,KAAK;gBACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kIACA;gBAED,GAAG,KAAK;;oBAER;kCACD,8OAAC,kKAAA,CAAA,QAAqB;wBAAC,WAAU;kCAC/B,cAAA,8OAAC,4LAAA,CAAA,IAAC;4BAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;AAKrB,cAAc,WAAW,GAAG,kKAAA,CAAA,UAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QAAI,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAAa,GAAG,KAAK;;;;;;AAExE,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,QAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,yBAAyB;QACtC,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,kKAAA,CAAA,QAAqB,CAAC,WAAW;AAE3D,mCAAmC;AACnC,MAAM,kCAAoB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,cAA2B;QAC1B,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,yBAAyB;QACtC,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,kKAAA,CAAA,cAA2B,CAAC,WAAW;AAEvE,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QAAI,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,+BAA+B;QAAa,GAAG,KAAK;;;;;;AAEzE,aAAa,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 4526, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/ui/button.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { ReactNode } from 'react';\r\n\r\ntype ButtonVariant =\r\n  | 'default'\r\n  | 'ghost'\r\n  | 'outline'\r\n  | 'secondary'\r\n  | 'danger'\r\n  | 'greenOutline'\r\n  | 'destructive';\r\n\r\ntype ButtonSize = 'sm' | 'md' | 'lg';\r\n\r\ninterface ButtonProps {\r\n  className?: string;\r\n  children: ReactNode;\r\n  onClick?: () => void;\r\n  type?: 'button' | 'submit' | 'reset';\r\n  variant?: ButtonVariant;\r\n  size?: ButtonSize;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport const Button = ({\r\n  className = '',\r\n  children,\r\n  onClick,\r\n  type = 'button',\r\n  variant = 'default',\r\n  size = 'md',\r\n  disabled = false,\r\n}: ButtonProps) => {\r\n\r\n  const baseClass = 'inline-flex items-center justify-center font-semibold rounded-md transition-all';\r\n\r\n  const sizeClass: Record<ButtonSize, string> = {\r\n    sm: 'px-3 py-1 text-xs',\r\n    md: 'px-4 py-2 text-sm',\r\n    lg: 'px-6 py-3 text-base',\r\n  };\r\n\r\n  const variantClass: Record<ButtonVariant, string> = {\r\n    default: 'bg-[#00d289] text-white border border-[#00d289] hover:bg-[#00b67a]',\r\n    ghost: 'bg-transparent text-[#00d289] border border-transparent hover:bg-[#e6fff5]',\r\n    outline: 'bg-white text-[#00d289] border border-[#00d289] hover:bg-[#f0fdf8]',\r\n    secondary: 'bg-gray-100 text-gray-800 border border-gray-300 hover:bg-gray-200',\r\n    danger: 'bg-red-500 text-white border border-red-500 hover:bg-red-600',\r\n    greenOutline: 'bg-transparent text-[#00d289] border border-[#00d289] hover:bg-[#00d289]/10',\r\n    destructive: 'bg-white text-red-600 border border-red-500 hover:bg-red-50',\r\n  };\r\n\r\n  const disabledClass = disabled ? 'opacity-50 cursor-not-allowed pointer-events-none' : '';\r\n\r\n  return (\r\n    <button\r\n      type={type}\r\n      disabled={disabled}\r\n      onClick={onClick}\r\n      className={[\r\n        baseClass,\r\n        sizeClass[size],\r\n        variantClass[variant],\r\n        disabledClass,\r\n        className,\r\n      ].join(' ')}\r\n    >\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;AAyBO,MAAM,SAAS,CAAC,EACrB,YAAY,EAAE,EACd,QAAQ,EACR,OAAO,EACP,OAAO,QAAQ,EACf,UAAU,SAAS,EACnB,OAAO,IAAI,EACX,WAAW,KAAK,EACJ;IAEZ,MAAM,YAAY;IAElB,MAAM,YAAwC;QAC5C,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,MAAM,eAA8C;QAClD,SAAS;QACT,OAAO;QACP,SAAS;QACT,WAAW;QACX,QAAQ;QACR,cAAc;QACd,aAAa;IACf;IAEA,MAAM,gBAAgB,WAAW,sDAAsD;IAEvF,qBACE,8OAAC;QACC,MAAM;QACN,UAAU;QACV,SAAS;QACT,WAAW;YACT;YACA,SAAS,CAAC,KAAK;YACf,YAAY,CAAC,QAAQ;YACrB;YACA;SACD,CAAC,IAAI,CAAC;kBAEN;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 4573, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/ui/NotificationDialog.tsx"],"sourcesContent":["'use client';\r\n\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogFooter,\r\n  DialogDescription,\r\n} from '@/src/components/ui/dialog';\r\nimport { Button } from '@/src/components/ui/button';\r\nimport { CheckCircle, AlertCircle, Info, Trash2 } from 'lucide-react';\r\nimport { cn } from '@/src/lib/utils';\r\n\r\nexport type NotificationType = 'success' | 'error' | 'info' | 'confirm';\r\n\r\nexport interface NotificationDialogProps {\r\n  open: boolean;\r\n  type: NotificationType;\r\n  title: string;\r\n  description?: string;\r\n  onClose: () => void;\r\n  onConfirm?: () => void;\r\n}\r\n\r\nexport default function NotificationDialog({\r\n  open,\r\n  type,\r\n  title,\r\n  description,\r\n  onClose,\r\n  onConfirm,\r\n}: NotificationDialogProps) {\r\n  const renderIcon = () => {\r\n    const baseClass = 'w-8 h-8 animate-pop shrink-0';\r\n    switch (type) {\r\n      case 'success':\r\n        return <CheckCircle className={cn(baseClass, 'text-green-500')} />;\r\n      case 'error':\r\n        return <AlertCircle className={cn(baseClass, 'text-red-500')} />;\r\n      case 'info':\r\n        return <Info className={cn(baseClass, 'text-blue-500')} />;\r\n      case 'confirm':\r\n        return <Trash2 className={cn(baseClass, 'text-orange-500')} />;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onClose}>\r\n      <DialogContent className=\"w-full max-w-md p-6 rounded-2xl space-y-5 pb-8\">\r\n        <DialogHeader className=\"flex items-center gap-3\">\r\n          {renderIcon()}\r\n          <DialogTitle className=\"text-lg sm:text-xl\">\r\n            {title}\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        {description && (\r\n          <DialogDescription>\r\n            {description}\r\n          </DialogDescription>\r\n        )}\r\n\r\n        <DialogFooter className=\"flex justify-end gap-3 mt-6\">\r\n          {type === 'confirm' ? (\r\n            <>\r\n              <Button\r\n                variant=\"ghost\"\r\n                className=\"w-full sm:w-auto\"\r\n                onClick={onClose}\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                variant=\"destructive\"\r\n                className=\"w-full sm:w-auto\"\r\n                onClick={onConfirm}\r\n              >\r\n                Confirm\r\n              </Button>\r\n            </>\r\n          ) : (\r\n            <Button\r\n              className=\"w-full sm:w-auto\"\r\n              onClick={onClose}\r\n            >\r\n              OK\r\n            </Button>\r\n          )}\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAQA;AACA;AAAA;AAAA;AAAA;AACA;AAZA;;;;;;AAyBe,SAAS,mBAAmB,EACzC,IAAI,EACJ,IAAI,EACJ,KAAK,EACL,WAAW,EACX,OAAO,EACP,SAAS,EACe;IACxB,MAAM,aAAa;QACjB,MAAM,YAAY;QAClB,OAAQ;YACN,KAAK;gBACH,qBAAO,8OAAC,2NAAA,CAAA,cAAW;oBAAC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,WAAW;;;;;;YAC/C,KAAK;gBACH,qBAAO,8OAAC,oNAAA,CAAA,cAAW;oBAAC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,WAAW;;;;;;YAC/C,KAAK;gBACH,qBAAO,8OAAC,kMAAA,CAAA,OAAI;oBAAC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,WAAW;;;;;;YACxC,KAAK;gBACH,qBAAO,8OAAC,0MAAA,CAAA,SAAM;oBAAC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,WAAW;;;;;;YAC1C;gBACE,OAAO;QACX;IACF;IAEA,qBACE,8OAAC,kIAAA,CAAA,SAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,8OAAC,kIAAA,CAAA,gBAAa;YAAC,WAAU;;8BACvB,8OAAC,kIAAA,CAAA,eAAY;oBAAC,WAAU;;wBACrB;sCACD,8OAAC,kIAAA,CAAA,cAAW;4BAAC,WAAU;sCACpB;;;;;;;;;;;;gBAIJ,6BACC,8OAAC,kIAAA,CAAA,oBAAiB;8BACf;;;;;;8BAIL,8OAAC,kIAAA,CAAA,eAAY;oBAAC,WAAU;8BACrB,SAAS,0BACR;;0CACE,8OAAC,kIAAA,CAAA,SAAM;gCACL,SAAQ;gCACR,WAAU;gCACV,SAAS;0CACV;;;;;;0CAGD,8OAAC,kIAAA,CAAA,SAAM;gCACL,SAAQ;gCACR,WAAU;gCACV,SAAS;0CACV;;;;;;;qDAKH,8OAAC,kIAAA,CAAA,SAAM;wBACL,WAAU;wBACV,SAAS;kCACV;;;;;;;;;;;;;;;;;;;;;;AAQb","debugId":null}},
    {"offset": {"line": 4718, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/hooks/useVehicleIssues.ts"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { db } from \"@/src/firebaseConfig\";\r\nimport {\r\n  collection,\r\n  onSnapshot,\r\n  query,\r\n  where,\r\n  doc,\r\n  updateDoc,\r\n  getDocs,\r\n} from \"firebase/firestore\";\r\nimport { ExtendedVehicleIssue } from \"@/src/lib/vehicleIssues/vehicleIssueTypes\";\r\n\r\ninterface Options {\r\n  role?: string;\r\n  companyId?: string;\r\n  technicianUserId?: string;\r\n}\r\n\r\nexport function useVehicleIssues(options?: Options) {\r\n  const [issues, setIssues] = useState<ExtendedVehicleIssue[]>([]);\r\n  const [rawIssues, setRawIssues] = useState<ExtendedVehicleIssue[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [technicianMap, setTechnicianMap] = useState<Record<string, string>>({});\r\n  const [userMap, setUserMap] = useState<Record<string, string>>({});\r\n\r\n  const normalizedRole = options?.role?.toLowerCase();\r\n  const isAdmin = normalizedRole === \"admin\";\r\n  const companyId = options?.companyId;\r\n\r\n  // Load technician map\r\n  useEffect(() => {\r\n    if (!companyId && !isAdmin) return;\r\n\r\n    const fetchTechnicians = async () => {\r\n      const q = isAdmin\r\n        ? query(collection(db, \"staffs\"))\r\n        : query(collection(db, \"staffs\"), where(\"companyId\", \"==\", companyId));\r\n\r\n      const snapshot = await getDocs(q);\r\n      const map: Record<string, string> = {};\r\n      snapshot.docs.forEach(doc => {\r\n        const data = doc.data();\r\n        if (data.userId) {\r\n          map[data.userId] = data.name || \"Unnamed Technician\";\r\n        }\r\n      });\r\n      setTechnicianMap(map);\r\n    };\r\n\r\n    fetchTechnicians();\r\n  }, [companyId, isAdmin]);\r\n\r\n  // Load user map (for closedBy)\r\n  useEffect(() => {\r\n    const fetchUsers = async () => {\r\n      const snapshot = await getDocs(collection(db, \"users\"));\r\n      const map: Record<string, string> = {};\r\n      snapshot.docs.forEach(doc => {\r\n        const data = doc.data();\r\n        map[doc.id] = data.name || data.email || \"Unknown User\";\r\n      });\r\n      setUserMap(map);\r\n    };\r\n\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  // Load vehicle issues\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    if (!companyId && !isAdmin && !options?.technicianUserId) {\r\n      setRawIssues([]);\r\n      setIssues([]);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    let q;\r\n    if (isAdmin) {\r\n      q = query(collection(db, \"vehicleIssues\"));\r\n    } else if (options?.technicianUserId) {\r\n      q = query(collection(db, \"vehicleIssues\"), where(\"assignedTo\", \"==\", options.technicianUserId));\r\n    } else {\r\n      q = query(collection(db, \"vehicleIssues\"), where(\"companyId\", \"==\", companyId!));\r\n    }\r\n\r\n    const unsubscribe = onSnapshot(q, (snapshot) => {\r\n      const fetched: ExtendedVehicleIssue[] = snapshot.docs.map(doc => ({\r\n        ...(doc.data() as ExtendedVehicleIssue),\r\n        id: doc.id,\r\n      }));\r\n      setRawIssues(fetched);\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [companyId, options?.technicianUserId, normalizedRole]);\r\n\r\n  // Enrich issues with names\r\n  useEffect(() => {\r\n    const enriched = rawIssues.map(issue => ({\r\n      ...issue,\r\n      assignedToName: issue.assignedTo ? technicianMap[issue.assignedTo] || issue.assignedTo : undefined,\r\n      closedByName: issue.closedBy ? userMap[issue.closedBy] || issue.closedBy : undefined,\r\n    }));\r\n    setIssues(enriched);\r\n  }, [rawIssues, technicianMap, userMap]);\r\n\r\n  const updateIssue = async (id: string, data: Partial<ExtendedVehicleIssue>) => {\r\n    await updateDoc(doc(db, \"vehicleIssues\", id), data);\r\n  };\r\n\r\n  return { issues, loading, updateIssue };\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4830, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/hooks/useTechnicianMap.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { db } from \"@/src/firebaseConfig\";\r\nimport { collection, getDocs, query, where } from \"firebase/firestore\";\r\n\r\n/**\r\n * Custom hook d√πng ƒë·ªÉ l·∫•y danh s√°ch technicians (map userId -> name)\r\n * theo companyId.\r\n */\r\nexport function useTechnicianMap(companyId?: string) {\r\n  const [technicianMap, setTechnicianMap] = useState<Record<string, string>>({});\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!companyId) {\r\n      setTechnicianMap({});\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const fetchTechnicians = async () => {\r\n      setLoading(true);\r\n\r\n      try {\r\n        const q = query(\r\n          collection(db, \"staffs\"),\r\n          where(\"companyId\", \"==\", companyId),\r\n          where(\"role\", \"in\", [\"technician\", \"Technician\"])\r\n        );\r\n\r\n        const snapshot = await getDocs(q);\r\n        const map: Record<string, string> = {};\r\n\r\n        snapshot.docs.forEach((doc) => {\r\n          const data = doc.data();\r\n          const userId = data.userId;\r\n          const name = data.name;\r\n\r\n          if (userId) {\r\n            map[userId] = name || \"Unnamed Technician\";\r\n          }\r\n        });\r\n\r\n        setTechnicianMap(map);\r\n      } catch (error) {\r\n        console.error(\"‚ùå Error fetching technicians:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchTechnicians();\r\n  }, [companyId]);\r\n\r\n  return { technicianMap, loading };\r\n}\r\n"],"names":[],"mappings":";;;AAEA;AACA;AAAA;AACA;AAAA;AAJA;;;;AAUO,SAAS,iBAAiB,SAAkB;IACjD,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAA0B,CAAC;IAC5E,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,WAAW;YACd,iBAAiB,CAAC;YAClB,WAAW;YACX;QACF;QAEA,MAAM,mBAAmB;YACvB,WAAW;YAEX,IAAI;gBACF,MAAM,IAAI,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EACZ,CAAA,GAAA,iKAAA,CAAA,aAAU,AAAD,EAAE,qIAAA,CAAA,KAAE,EAAE,WACf,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,aAAa,MAAM,YACzB,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,QAAQ,MAAM;oBAAC;oBAAc;iBAAa;gBAGlD,MAAM,WAAW,MAAM,CAAA,GAAA,iKAAA,CAAA,UAAO,AAAD,EAAE;gBAC/B,MAAM,MAA8B,CAAC;gBAErC,SAAS,IAAI,CAAC,OAAO,CAAC,CAAC;oBACrB,MAAM,OAAO,IAAI,IAAI;oBACrB,MAAM,SAAS,KAAK,MAAM;oBAC1B,MAAM,OAAO,KAAK,IAAI;oBAEtB,IAAI,QAAQ;wBACV,GAAG,CAAC,OAAO,GAAG,QAAQ;oBACxB;gBACF;gBAEA,iBAAiB;YACnB,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,iCAAiC;YACjD,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG;QAAC;KAAU;IAEd,OAAO;QAAE;QAAe;IAAQ;AAClC","debugId":null}},
    {"offset": {"line": 4890, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/ui/input.tsx"],"sourcesContent":["import { ReactNode, InputHTMLAttributes } from 'react';\r\n\r\ninterface InputProps extends InputHTMLAttributes<HTMLInputElement> {\r\n  className?: string;\r\n  icon?: ReactNode;\r\n}\r\n\r\nexport const Input = ({ className = '', icon, ...props }: InputProps) => {\r\n  return (\r\n    <div className={`flex items-center border border-[#00d289] rounded-sm p-2 ${className}`}>\r\n      {icon && <span className=\"mr-2\">{icon}</span>}\r\n      <input\r\n        className=\"flex-1 outline-none bg-transparent\"\r\n        {...props}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAOO,MAAM,QAAQ,CAAC,EAAE,YAAY,EAAE,EAAE,IAAI,EAAE,GAAG,OAAmB;IAClE,qBACE,8OAAC;QAAI,WAAW,CAAC,yDAAyD,EAAE,WAAW;;YACpF,sBAAQ,8OAAC;gBAAK,WAAU;0BAAQ;;;;;;0BACjC,8OAAC;gBACC,WAAU;gBACT,GAAG,KAAK;;;;;;;;;;;;AAIjB","debugId":null}},
    {"offset": {"line": 4928, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/src/lib/utils\";\r\n\r\nexport interface TextareaProps extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <textarea\r\n        ref={ref}\r\n        className={cn(\r\n          \"flex w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-[#00d289] focus:border-transparent\",\r\n          className\r\n        )}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\n\r\nTextarea.displayName = \"Textarea\";\r\n\r\nexport { Textarea };\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAIA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,8LACA;QAED,GAAG,KAAK;;;;;;AAGf;AAGF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 4956, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/vehicleIssues/ProposalPopup.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/src/components/ui/dialog\";\r\nimport { Button } from \"@/src/components/ui/button\";\r\nimport { Input } from \"@/src/components/ui/input\";\r\nimport { Textarea } from \"@/src/components/ui/textarea\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\ninterface Props {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  onSubmit: (solution: string, cost: number) => void;\r\n}\r\n\r\nfunction formatCurrency(value: string) {\r\n  const number = parseInt(value.replace(/\\D/g, \"\")) || 0;\r\n  return number.toLocaleString(\"vi-VN\");\r\n}\r\n\r\nexport default function ProposalPopup({ open, onClose, onSubmit }: Props) {\r\n  const [solution, setSolution] = useState(\"\");\r\n  const [cost, setCost] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (!open) {\r\n      setSolution(\"\");\r\n      setCost(\"\");\r\n    }\r\n  }, [open]);\r\n\r\n  const handleSubmit = () => {\r\n    const numericCost = parseInt(cost.replace(/\\D/g, \"\")) || 0;\r\n    onSubmit(solution, numericCost);\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onClose}>\r\n      <DialogContent>\r\n        <DialogHeader>\r\n          <DialogTitle>Submit Proposal</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"space-y-4\">\r\n          <Textarea\r\n            placeholder=\"Proposed Solution\"\r\n            value={solution}\r\n            onChange={(e) => setSolution(e.target.value)}\r\n          />\r\n          <Input\r\n            placeholder=\"Proposed Cost (VNƒê)\"\r\n            inputMode=\"numeric\"\r\n            value={formatCurrency(cost)}\r\n            onChange={(e) => setCost(e.target.value)}\r\n            onKeyDown={(e) => {\r\n              if (e.key === \"Enter\" && solution && cost) {\r\n                e.preventDefault();\r\n                handleSubmit();\r\n              }\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        <DialogFooter className=\"mt-4\">\r\n          <Button variant=\"ghost\" onClick={onClose}>Cancel</Button>\r\n          <Button disabled={!solution || !cost} onClick={handleSubmit}>\r\n            Submit Proposal\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAcA,SAAS,eAAe,KAAa;IACnC,MAAM,SAAS,SAAS,MAAM,OAAO,CAAC,OAAO,QAAQ;IACrD,OAAO,OAAO,cAAc,CAAC;AAC/B;AAEe,SAAS,cAAc,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAS;IACtE,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEjC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,MAAM;YACT,YAAY;YACZ,QAAQ;QACV;IACF,GAAG;QAAC;KAAK;IAET,MAAM,eAAe;QACnB,MAAM,cAAc,SAAS,KAAK,OAAO,CAAC,OAAO,QAAQ;QACzD,SAAS,UAAU;IACrB;IAEA,qBACE,8OAAC,kIAAA,CAAA,SAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,8OAAC,kIAAA,CAAA,gBAAa;;8BACZ,8OAAC,kIAAA,CAAA,eAAY;8BACX,cAAA,8OAAC,kIAAA,CAAA,cAAW;kCAAC;;;;;;;;;;;8BAGf,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,oIAAA,CAAA,WAAQ;4BACP,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;;;;;;sCAE7C,8OAAC,iIAAA,CAAA,QAAK;4BACJ,aAAY;4BACZ,WAAU;4BACV,OAAO,eAAe;4BACtB,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;4BACvC,WAAW,CAAC;gCACV,IAAI,EAAE,GAAG,KAAK,WAAW,YAAY,MAAM;oCACzC,EAAE,cAAc;oCAChB;gCACF;4BACF;;;;;;;;;;;;8BAIJ,8OAAC,kIAAA,CAAA,eAAY;oBAAC,WAAU;;sCACtB,8OAAC,kIAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAQ,SAAS;sCAAS;;;;;;sCAC1C,8OAAC,kIAAA,CAAA,SAAM;4BAAC,UAAU,CAAC,YAAY,CAAC;4BAAM,SAAS;sCAAc;;;;;;;;;;;;;;;;;;;;;;;AAOvE","debugId":null}},
    {"offset": {"line": 5088, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/my-business/dashboards/TechnicianDashboard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport Header from '@/src/components/landingpage/Header';\r\nimport Footer from '@/src/components/landingpage/Footer';\r\nimport UserTopMenu from '@/src/components/landingpage/UserTopMenu';\r\nimport NotificationDialog from '@/src/components/ui/NotificationDialog';\r\nimport { useUser } from '@/src/context/AuthContext';\r\nimport { useVehicleIssues } from '@/src/hooks/useVehicleIssues';\r\nimport { useTechnicianMap } from '@/src/hooks/useTechnicianMap';\r\nimport { ExtendedVehicleIssue, VehicleIssueStatus } from '@/src/lib/vehicleIssues/vehicleIssueTypes';\r\nimport { collection, getDocs, query, where } from 'firebase/firestore';\r\nimport { db } from '@/src/firebaseConfig';\r\nimport ProposalPopup from '@/src/components/vehicleIssues/ProposalPopup';\r\nimport Link from 'next/link';\r\nimport { Wrench, ClipboardList, CheckCircle, AlertTriangle, FileText } from 'lucide-react';\r\nimport { Button } from '@/src/components/ui/button';\r\n\r\nfunction formatCurrency(value: number) {\r\n  return value.toLocaleString('vi-VN', {\r\n    style: 'currency',\r\n    currency: 'VND',\r\n    minimumFractionDigits: 0,\r\n  });\r\n}\r\n\r\nfunction renderStatusBadge(status: VehicleIssueStatus) {\r\n  const colorMap: Record<VehicleIssueStatus, string> = {\r\n    pending: 'bg-gray-400',\r\n    assigned: 'bg-blue-500',\r\n    proposed: 'bg-yellow-500',\r\n    confirmed: 'bg-green-500',\r\n    rejected: 'bg-red-500',\r\n    in_progress: 'bg-indigo-500',\r\n    resolved: 'bg-purple-500',\r\n    closed: 'bg-black',\r\n  };\r\n\r\n  return (\r\n    <span className={`px-2 py-1 text-white rounded ${colorMap[status]}`}>\r\n      {status.replace('_', ' ')}\r\n    </span>\r\n  );\r\n}\r\n\r\nexport default function TechnicianDashboard() {\r\n  const { user, role, companyId } = useUser();\r\n  const [notification, setNotification] = useState<string | null>(null);\r\n  const [checkingRole, setCheckingRole] = useState(true);\r\n  const [isTechnician, setIsTechnician] = useState(false);\r\n  const { technicianMap, loading: technicianMapLoading } = useTechnicianMap(companyId ?? undefined);\r\n  const { issues, updateIssue, loading: issuesLoading } = useVehicleIssues({\r\n    companyId: companyId ?? undefined,\r\n    role: role ?? undefined,\r\n    technicianUserId: isTechnician ? user?.uid : undefined,\r\n  });\r\n\r\n  const [proposingIssue, setProposingIssue] = useState<ExtendedVehicleIssue | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!user) return;\r\n    const checkRole = async () => {\r\n      const q = query(collection(db, 'staffs'), where('userId', '==', user.uid));\r\n      const snap = await getDocs(q);\r\n      if (!snap.empty) {\r\n        const staff = snap.docs[0].data();\r\n        setIsTechnician((staff.role || '').toLowerCase() === 'technician');\r\n      }\r\n      setCheckingRole(false);\r\n    };\r\n    checkRole();\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    if (notification) {\r\n      const timer = setTimeout(() => setNotification(null), 3000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [notification]);\r\n\r\n  if (!user || checkingRole) return <div className=\"text-center py-10\">üîé Checking permission...</div>;\r\n  if (!isTechnician) return <div className=\"text-center py-10 text-red-500\">üö´ Technician only.</div>;\r\n  if (issuesLoading || technicianMapLoading) return <div className=\"text-center py-10\">‚è≥ Loading...</div>;\r\n\r\n  const handleUpdateStatus = async (issue: ExtendedVehicleIssue, newStatus: VehicleIssueStatus) => {\r\n    await updateIssue(issue.id, { status: newStatus });\r\n    setNotification(`Status updated to \"${newStatus}\".`);\r\n  };\r\n\r\n  const handlePropose = async (solution: string, cost: number) => {\r\n    if (!proposingIssue) return;\r\n\r\n    await updateIssue(proposingIssue.id, {\r\n      status: 'proposed',\r\n      proposedSolution: solution,\r\n      proposedCost: cost,\r\n    });\r\n\r\n    setNotification('Proposal submitted for approval.');\r\n    setProposingIssue(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-gray-50\">\r\n      <Header />\r\n      <UserTopMenu />\r\n\r\n      <main className=\"flex-1 px-6 py-10 space-y-10 max-w-7xl mx-auto\">\r\n        <h1 className=\"text-3xl font-bold text-center text-gray-800\">üõ†Ô∏è Technician Dashboard</h1>\r\n\r\n        {/* Overview Cards */}\r\n        <section className=\"grid grid-cols-2 md:grid-cols-4 gap-6\">\r\n          <DashboardCard icon={<ClipboardList />} title=\"Assigned\" value={issues.length.toString()} />\r\n          <DashboardCard icon={<AlertTriangle />} title=\"Proposed\" value={issues.filter(i => i.status === 'proposed').length.toString()} />\r\n          <DashboardCard icon={<Wrench />} title=\"In Progress\" value={issues.filter(i => i.status === 'in_progress').length.toString()} />\r\n          <DashboardCard icon={<CheckCircle />} title=\"Resolved\" value={issues.filter(i => i.status === 'resolved').length.toString()} />\r\n        </section>\r\n\r\n        {/* Quick Actions */}\r\n        <section className=\"bg-white rounded-2xl shadow p-6 border border-gray-200\">\r\n          <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">‚ö° Quick Actions</h2>\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\">\r\n            <QuickAction label=\"View My Issues\" href=\"/vehicle-issues\" />\r\n            <QuickAction label=\"Proposal History\" href=\"/vehicle-issues/proposals\" />\r\n            <QuickAction label=\"View Reports\" href=\"/reports\" />\r\n          </div>\r\n        </section>\r\n\r\n        {/* Issues Table */}\r\n        <section className=\"bg-white rounded-2xl shadow p-6 border border-gray-200\">\r\n          <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">üöß Assigned Issues</h2>\r\n\r\n          <div className=\"overflow-auto border rounded-xl\">\r\n            <table className=\"min-w-full text-sm\">\r\n              <thead>\r\n                <tr className=\"bg-gray-100 text-left\">\r\n                  <th className=\"p-2\">VIN</th>\r\n                  <th className=\"p-2\">Plate</th>\r\n                  <th className=\"p-2\">Issue Type</th>\r\n                  <th className=\"p-2\">Description</th>\r\n                  <th className=\"p-2\">Status</th>\r\n                  <th className=\"p-2\">Company</th>\r\n                  <th className=\"p-2\">Station</th>\r\n                  <th className=\"p-2\">Reported By</th>\r\n                  <th className=\"p-2\">Reported At</th>\r\n                  <th className=\"p-2\">Proposed Solution</th>\r\n                  <th className=\"p-2\">Proposed Cost</th>\r\n                  <th className=\"p-2\">Actions</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {[...issues]\r\n                  .sort((a, b) => (b.reportedAt?.toDate().getTime() ?? 0) - (a.reportedAt?.toDate().getTime() ?? 0))\r\n                  .map(issue => (\r\n                    <tr key={issue.id} className=\"border-t hover:bg-gray-50\">\r\n                      <td className=\"p-2\">{issue.vin}</td>\r\n                      <td className=\"p-2\">{issue.plateNumber}</td>\r\n                      <td className=\"p-2\">{issue.issueType}</td>\r\n                      <td className=\"p-2\">{issue.description}</td>\r\n                      <td className=\"p-2\">{renderStatusBadge(issue.status)}</td>\r\n                      <td className=\"p-2\">{issue.companyName}</td>\r\n                      <td className=\"p-2\">{issue.stationName}</td>\r\n                      <td className=\"p-2\">{issue.reportedBy}</td>\r\n                      <td className=\"p-2\">{issue.reportedAt?.toDate().toLocaleString()}</td>\r\n                      <td className=\"p-2\">{issue.proposedSolution || '-'}</td>\r\n                      <td className=\"p-2\">{issue.proposedCost ? formatCurrency(issue.proposedCost) : '-'}</td>\r\n                      <td className=\"p-2 space-x-2\">\r\n                        {issue.status === 'assigned' && (\r\n                          <Button onClick={() => setProposingIssue(issue)}>Submit Proposal</Button>\r\n                        )}\r\n                        {issue.status === 'confirmed' && (\r\n                          <Button onClick={() => handleUpdateStatus(issue, 'in_progress')}>Mark In Progress</Button>\r\n                        )}\r\n                        {issue.status === 'in_progress' && (\r\n                          <Button onClick={() => handleUpdateStatus(issue, 'resolved')}>Mark Resolved</Button>\r\n                        )}\r\n                        {issue.status === 'proposed' && <span className=\"text-green-600\">Waiting Approval</span>}\r\n                        {issue.status === 'rejected' && <span className=\"text-gray-400 italic\">No actions</span>}\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </section>\r\n      </main>\r\n\r\n      <Footer />\r\n\r\n      <NotificationDialog\r\n        open={!!notification}\r\n        type=\"success\"\r\n        title=\"Success\"\r\n        description={notification || undefined}\r\n        onClose={() => setNotification(null)}\r\n      />\r\n\r\n      <ProposalPopup\r\n        open={!!proposingIssue}\r\n        onClose={() => setProposingIssue(null)}\r\n        onSubmit={handlePropose}\r\n      />\r\n      \r\n      <ActualResultPopup\r\n        open={!!updatingActualIssue}\r\n        onClose={() => setUpdatingActualIssue(null)}\r\n        onSubmit={handleActualSubmit}\r\n      />\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DashboardCard({ icon, title, value }: { icon: JSX.Element; title: string; value: string }) {\r\n  return (\r\n    <div className=\"bg-white p-4 rounded-xl shadow hover:shadow-lg transition border border-gray-200 flex items-center gap-4\">\r\n      <div className=\"text-[#00d289] bg-[#e6fff5] rounded-full p-2\">{icon}</div>\r\n      <div>\r\n        <p className=\"text-sm text-gray-500\">{title}</p>\r\n        <h3 className=\"text-lg font-bold text-gray-800\">{value}</h3>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction QuickAction({ label, href }: { label: string; href: string }) {\r\n  return (\r\n    <Link href={href} className=\"block bg-[#00d289] hover:bg-[#00b67a] text-white text-center font-medium px-4 py-3 rounded-xl transition\">\r\n      {label}\r\n    </Link>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5769, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/my-business/dashboards/CompanyAdminDashboard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { db } from '@/src/firebaseConfig';\r\nimport { collection, query, where, getDocs } from 'firebase/firestore';\r\nimport { useUser } from '@/src/context/AuthContext';\r\nimport Header from '@/src/components/landingpage/Header';\r\nimport Footer from '@/src/components/landingpage/Footer';\r\nimport { Card, CardContent } from '@/src/components/ui/card';\r\nimport { MapPin, Bike, DollarSign, Users, FileText, Wrench, PackagePlus } from 'lucide-react';\r\nimport Link from 'next/link';\r\nimport { formatCurrency } from '@/src/utils/formatCurrency';\r\n\r\nexport default function CompanyAdminDashboard() {\r\n  const { companyId } = useUser();\r\n  const [stationCount, setStationCount] = useState(0);\r\n  const [ebikeCount, setEbikeCount] = useState(0);\r\n  const [staffCount, setStaffCount] = useState(0);\r\n  const [bookingCount, setBookingCount] = useState(0);\r\n  const [accessoryCount, setAccessoryCount] = useState(0);\r\n  const [revenue, setRevenue] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (!companyId) return;\r\n\r\n    const fetchData = async () => {\r\n      const stationSnap = await getDocs(\r\n        query(collection(db, 'rentalStations'), where('companyId', '==', companyId))\r\n      );\r\n      setStationCount(stationSnap.size);\r\n\r\n      const ebikeSnap = await getDocs(\r\n        query(collection(db, 'ebikes'), where('companyId', '==', companyId))\r\n      );\r\n      setEbikeCount(ebikeSnap.size);\r\n\r\n      const staffSnap = await getDocs(\r\n        query(collection(db, 'staffs'), where('companyId', '==', companyId))\r\n      );\r\n      setStaffCount(staffSnap.size);\r\n\r\n      const bookingSnap = await getDocs(\r\n        query(collection(db, 'bookings'), where('companyId', '==', companyId))\r\n      );\r\n      const bookings = bookingSnap.docs.map(doc => doc.data());\r\n\r\n      const now = new Date();\r\n      const monthlyBookings = bookings.filter((b: any) => {\r\n        const date = b.createdAt?.toDate?.() || new Date(b.createdAt);\r\n        return date.getFullYear() === now.getFullYear() && date.getMonth() === now.getMonth();\r\n      });\r\n\r\n      setBookingCount(monthlyBookings.length);\r\n      setRevenue(monthlyBookings.reduce((sum, b) => sum + (b.totalAmount || 0), 0));\r\n\r\n      const accessorySnap = await getDocs(\r\n        query(collection(db, 'accessories'), where('companyId', '==', companyId))\r\n      );\r\n      setAccessoryCount(accessorySnap.size);\r\n    };\r\n\r\n    fetchData();\r\n  }, [companyId]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-gray-50\">\r\n      <Header />\r\n      <main className=\"flex-1 px-6 py-10 space-y-10\">\r\n        <h1 className=\"text-3xl font-bold text-center\">üè¢ Company Admin Dashboard</h1>\r\n\r\n        <section className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6\">\r\n          <DashboardCard icon={<MapPin />} title=\"Stations\" value={stationCount} href=\"/my-business/stations\" />\r\n          <DashboardCard icon={<Bike />} title=\"eBikes\" value={ebikeCount} href=\"/ebikeManagement\" />\r\n          <DashboardCard icon={<DollarSign />} title=\"Revenue (This Month)\" value={formatCurrency(revenue)} href=\"/bookings\" />\r\n          <DashboardCard icon={<Users />} title=\"Staff\" value={staffCount} href=\"/my-business/staff\" />\r\n          <DashboardCard icon={<FileText />} title=\"Bookings\" value={bookingCount} href=\"/bookings\" />\r\n          <DashboardCard icon={<PackagePlus />} title=\"Accessories\" value={accessoryCount} href=\"/accessories\" />\r\n        </section>\r\n      </main>\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DashboardCard({\r\n  icon,\r\n  title,\r\n  value,\r\n  href,\r\n}: {\r\n  icon: JSX.Element;\r\n  title: string;\r\n  value: string | number;\r\n  href: string;\r\n}) {\r\n  return (\r\n    <Link\r\n      href={href}\r\n      className=\"bg-white p-4 rounded-xl shadow hover:shadow-lg transition border border-gray-200 flex items-center gap-4\"\r\n    >\r\n      <div className=\"text-[#00d289] bg-[#e6fff5] rounded-full p-2\">{icon}</div>\r\n      <div>\r\n        <p className=\"text-sm text-gray-500\">{title}</p>\r\n        <h3 className=\"text-lg font-bold text-gray-800\">{value}</h3>\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6013, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/src/components/my-business/dashboards/StationManagerDashboard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { db } from '@/src/firebaseConfig';\r\nimport { collection, query, where, getDocs } from 'firebase/firestore';\r\nimport { useUser } from '@/src/context/AuthContext';\r\nimport Header from '@/src/components/landingpage/Header';\r\nimport Footer from '@/src/components/landingpage/Footer';\r\nimport { Card, CardContent } from '@/src/components/ui/card';\r\nimport { Bike, DollarSign, FileText, Wrench, PackagePlus } from 'lucide-react';\r\nimport Link from 'next/link';\r\nimport { formatCurrency } from '@/src/utils/formatCurrency';\r\n\r\nexport default function StationManagerDashboard() {\r\n  const { stationId } = useUser();\r\n  const [ebikeCount, setEbikeCount] = useState(0);\r\n  const [bookingCount, setBookingCount] = useState(0);\r\n  const [revenue, setRevenue] = useState(0);\r\n  const [issueCount, setIssueCount] = useState(0);\r\n  const [accessoryCount, setAccessoryCount] = useState(0); // ‚úÖ Accessories\r\n\r\n  useEffect(() => {\r\n    if (!stationId) return;\r\n\r\n    const fetchData = async () => {\r\n      // eBikes\r\n      const ebikeSnap = await getDocs(query(collection(db, 'ebikes'), where('stationId', '==', stationId)));\r\n      setEbikeCount(ebikeSnap.size);\r\n\r\n      // Bookings\r\n      const bookingSnap = await getDocs(query(collection(db, 'bookings'), where('stationId', '==', stationId)));\r\n      const bookings = bookingSnap.docs.map(doc => doc.data());\r\n\r\n      const now = new Date();\r\n      const monthlyBookings = bookings.filter((b: any) => {\r\n        const date = b.createdAt?.toDate?.() || new Date(b.createdAt);\r\n        return date.getFullYear() === now.getFullYear() && date.getMonth() === now.getMonth();\r\n      });\r\n\r\n      setBookingCount(monthlyBookings.length);\r\n      setRevenue(monthlyBookings.reduce((sum, b) => sum + (b.totalAmount || 0), 0));\r\n\r\n      // Issues\r\n      const issueSnap = await getDocs(query(collection(db, 'vehicleIssues'), where('stationId', '==', stationId)));\r\n      setIssueCount(issueSnap.size);\r\n\r\n      // Accessories\r\n      const accessorySnap = await getDocs(query(collection(db, 'accessories'), where('stationId', '==', stationId)));\r\n      setAccessoryCount(accessorySnap.size);\r\n    };\r\n\r\n    fetchData();\r\n  }, [stationId]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-gray-50\">\r\n      <Header />\r\n      <main className=\"flex-1 px-6 py-10 space-y-10\">\r\n        <h1 className=\"text-3xl font-bold text-center\">üè¨ Station Manager Dashboard</h1>\r\n\r\n        <section className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6\">\r\n          <DashboardCard icon={<Bike />} title=\"eBikes\" value={ebikeCount} href=\"/ebikeManagement\" />\r\n          <DashboardCard icon={<DollarSign />} title=\"Revenue (This Month)\" value={formatCurrency(revenue)} href=\"/bookings\" />\r\n          <DashboardCard icon={<FileText />} title=\"Bookings\" value={bookingCount} href=\"/bookings\" />\r\n          <DashboardCard icon={<Wrench />} title=\"Vehicle Issues\" value={issueCount} href=\"/vehicle-issues\" />\r\n          <DashboardCard icon={<PackagePlus />} title=\"Accessories\" value={accessoryCount} href=\"/accessories\" /> {/* ‚úÖ */}\r\n        </section>\r\n      </main>\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DashboardCard({\r\n  icon,\r\n  title,\r\n  value,\r\n  href,\r\n}: {\r\n  icon: JSX.Element;\r\n  title: string;\r\n  value: string | number;\r\n  href: string;\r\n}) {\r\n  return (\r\n    <Link\r\n      href={href}\r\n      className=\"bg-white p-4 rounded-xl shadow hover:shadow-lg transition border border-gray-200 flex items-center gap-4\"\r\n    >\r\n      <div className=\"text-[#00d289] bg-[#e6fff5] rounded-full p-2\">{icon}</div>\r\n      <div>\r\n        <p className=\"text-sm text-gray-500\">{title}</p>\r\n        <h3 className=\"text-lg font-bold text-gray-800\">{value}</h3>\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6244, "column": 0}, "map": {"version":3,"sources":["file://D%3A/1.%202025/12.%20Code%20website/ebikerental/app/my-business/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useRouter } from 'next/navigation';\r\nimport { useEffect, useState } from 'react';\r\nimport { getDocs, query, where, collection } from 'firebase/firestore';\r\nimport { db } from '@/src/firebaseConfig';\r\nimport { useUser } from '@/src/context/AuthContext';\r\n\r\nimport RentalCompanyDashboard from '@/src/components/my-business/dashboards/RentalCompanyDashboard';\r\nimport PrivateProviderDashboard from '@/src/components/my-business/dashboards/PrivateProviderDashboard';\r\nimport AgentDashboard from '@/src/components/my-business/dashboards/AgentDashboard';\r\nimport AdminDashboard from '@/src/components/my-business/dashboards/AdminDashboard';\r\nimport StaffDashboard from '@/src/components/my-business/dashboards/StaffDashboard';\r\nimport TechnicianDashboard from '@/src/components/my-business/dashboards/TechnicianDashboard';\r\nimport CompanyAdminDashboard from '@/src/components/my-business/dashboards/CompanyAdminDashboard';\r\nimport StationManagerDashboard from '@/src/components/my-business/dashboards/StationManagerDashboard';\r\n\r\n// Type cho staff\r\ninterface StaffEntry {\r\n  id: string;\r\n  role: string;\r\n  [key: string]: any;\r\n}\r\n\r\nexport default function MyBusinessPage() {\r\n  const { user, role, companyId, loading } = useUser();\r\n  const router = useRouter();\r\n\r\n  const [businessType, setBusinessType] = useState<\r\n    'admin' |\r\n    'rental_company_owner' |\r\n    'private_provider' |\r\n    'agent' |\r\n    'company_admin' |\r\n    'station_manager' |\r\n    'staff' |\r\n    'technician' |\r\n    null\r\n  >(null);\r\n\r\n  const [staffRoles, setStaffRoles] = useState<StaffEntry[]>([]);\r\n\r\n  useEffect(() => {\r\n    if (loading || !user) return;\r\n\r\n    if (role === 'Admin') {\r\n      setBusinessType('admin');\r\n      return;\r\n    }\r\n\r\n    const fetchData = async () => {\r\n      // Check owner roles\r\n      const rentalQuery = query(collection(db, 'rentalCompanies'), where('ownerId', '==', user.uid));\r\n      const agentQuery = query(collection(db, 'agents'), where('ownerId', '==', user.uid));\r\n      const providerQuery = query(collection(db, 'privateProviders'), where('ownerId', '==', user.uid));\r\n\r\n      const [rentalSnap, agentSnap, providerSnap] = await Promise.all([\r\n        getDocs(rentalQuery),\r\n        getDocs(agentQuery),\r\n        getDocs(providerQuery),\r\n      ]);\r\n\r\n      if (!rentalSnap.empty) {\r\n        setBusinessType('rental_company_owner');\r\n        return;\r\n      }\r\n\r\n      if (!agentSnap.empty) {\r\n        setBusinessType('agent');\r\n        return;\r\n      }\r\n\r\n      if (!providerSnap.empty) {\r\n        setBusinessType('private_provider');\r\n        return;\r\n      }\r\n\r\n      // Check staff\r\n      const staffQuery = query(collection(db, 'staffs'), where('userId', '==', user.uid));\r\n      const staffSnap = await getDocs(staffQuery);\r\n\r\n      if (!staffSnap.empty) {\r\n        const staffData: StaffEntry[] = staffSnap.docs.map(doc => {\r\n          const data = doc.data() as { role: string };\r\n          return {\r\n            id: doc.id,\r\n            ...data,\r\n          };\r\n        });\r\n\r\n        setStaffRoles(staffData);\r\n\r\n        const staffRole = staffData[0]?.role?.toLowerCase() || '';\r\n\r\n        switch (staffRole) {\r\n          case 'technician':\r\n            setBusinessType('technician');\r\n            break;\r\n          case 'station_manager':\r\n            setBusinessType('station_manager');\r\n            break;\r\n          case 'company_admin':\r\n            setBusinessType('company_admin');\r\n            break;\r\n          default:\r\n            setBusinessType('staff');\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      // No role ‚Üí redirect to create business\r\n      router.replace('/my-business/create');\r\n    };\r\n\r\n    fetchData();\r\n  }, [user, role, loading, router]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-screen text-gray-500\">\r\n        Loading...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main className=\"min-h-screen space-y-6 bg-gray-50\">\r\n      {businessType === 'admin' && <AdminDashboard />}\r\n      {businessType === 'rental_company_owner' && <RentalCompanyDashboard />}\r\n      {businessType === 'private_provider' && <PrivateProviderDashboard />}\r\n      {businessType === 'agent' && <AgentDashboard />}\r\n      {businessType === 'company_admin' && <CompanyAdminDashboard />}\r\n      {businessType === 'station_manager' && <StationManagerDashboard />}\r\n      {businessType === 'staff' && <StaffDashboard />}\r\n      {businessType === 'technician' && <TechnicianDashboard />}\r\n      {!businessType && (\r\n        <div className=\"text-center text-gray-500\">No business found.</div>\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;;;;;;;;;;;;;;;AAwBe,SAAS;IACtB,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,8HAAA,CAAA,UAAO,AAAD;IACjD,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAU7C;IAEF,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAgB,EAAE;IAE7D,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,WAAW,CAAC,MAAM;QAEtB,IAAI,SAAS,SAAS;YACpB,gBAAgB;YAChB;QACF;QAEA,MAAM,YAAY;YAChB,oBAAoB;YACpB,MAAM,cAAc,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,CAAA,GAAA,iKAAA,CAAA,aAAU,AAAD,EAAE,qIAAA,CAAA,KAAE,EAAE,oBAAoB,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,WAAW,MAAM,KAAK,GAAG;YAC5F,MAAM,aAAa,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,CAAA,GAAA,iKAAA,CAAA,aAAU,AAAD,EAAE,qIAAA,CAAA,KAAE,EAAE,WAAW,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,WAAW,MAAM,KAAK,GAAG;YAClF,MAAM,gBAAgB,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,CAAA,GAAA,iKAAA,CAAA,aAAU,AAAD,EAAE,qIAAA,CAAA,KAAE,EAAE,qBAAqB,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,WAAW,MAAM,KAAK,GAAG;YAE/F,MAAM,CAAC,YAAY,WAAW,aAAa,GAAG,MAAM,QAAQ,GAAG,CAAC;gBAC9D,CAAA,GAAA,iKAAA,CAAA,UAAO,AAAD,EAAE;gBACR,CAAA,GAAA,iKAAA,CAAA,UAAO,AAAD,EAAE;gBACR,CAAA,GAAA,iKAAA,CAAA,UAAO,AAAD,EAAE;aACT;YAED,IAAI,CAAC,WAAW,KAAK,EAAE;gBACrB,gBAAgB;gBAChB;YACF;YAEA,IAAI,CAAC,UAAU,KAAK,EAAE;gBACpB,gBAAgB;gBAChB;YACF;YAEA,IAAI,CAAC,aAAa,KAAK,EAAE;gBACvB,gBAAgB;gBAChB;YACF;YAEA,cAAc;YACd,MAAM,aAAa,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,CAAA,GAAA,iKAAA,CAAA,aAAU,AAAD,EAAE,qIAAA,CAAA,KAAE,EAAE,WAAW,CAAA,GAAA,iKAAA,CAAA,QAAK,AAAD,EAAE,UAAU,MAAM,KAAK,GAAG;YACjF,MAAM,YAAY,MAAM,CAAA,GAAA,iKAAA,CAAA,UAAO,AAAD,EAAE;YAEhC,IAAI,CAAC,UAAU,KAAK,EAAE;gBACpB,MAAM,YAA0B,UAAU,IAAI,CAAC,GAAG,CAAC,CAAA;oBACjD,MAAM,OAAO,IAAI,IAAI;oBACrB,OAAO;wBACL,IAAI,IAAI,EAAE;wBACV,GAAG,IAAI;oBACT;gBACF;gBAEA,cAAc;gBAEd,MAAM,YAAY,SAAS,CAAC,EAAE,EAAE,MAAM,iBAAiB;gBAEvD,OAAQ;oBACN,KAAK;wBACH,gBAAgB;wBAChB;oBACF,KAAK;wBACH,gBAAgB;wBAChB;oBACF,KAAK;wBACH,gBAAgB;wBAChB;oBACF;wBACE,gBAAgB;gBACpB;gBAEA;YACF;YAEA,wCAAwC;YACxC,OAAO,OAAO,CAAC;QACjB;QAEA;IACF,GAAG;QAAC;QAAM;QAAM;QAAS;KAAO;IAEhC,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBAA0D;;;;;;IAI7E;IAEA,qBACE,8OAAC;QAAK,WAAU;;YACb,iBAAiB,yBAAW,8OAAC,oKAAA,CAAA,UAAc;;;;;YAC3C,iBAAiB,wCAA0B,8OAAC,4KAAA,CAAA,UAAsB;;;;;YAClE,iBAAiB,oCAAsB,8OAAC,8KAAA,CAAA,UAAwB;;;;;YAChE,iBAAiB,yBAAW,8OAAC,oKAAA,CAAA,UAAc;;;;;YAC3C,iBAAiB,iCAAmB,8OAAC,2KAAA,CAAA,UAAqB;;;;;YAC1D,iBAAiB,mCAAqB,8OAAC,6KAAA,CAAA,UAAuB;;;;;YAC9D,iBAAiB,yBAAW,8OAAC,oKAAA,CAAA,UAAc;;;;;YAC3C,iBAAiB,8BAAgB,8OAAC,yKAAA,CAAA,UAAmB;;;;;YACrD,CAAC,8BACA,8OAAC;gBAAI,WAAU;0BAA4B;;;;;;;;;;;;AAInD","debugId":null}}]
}